var xh=Object.create;var Ei=Object.defineProperty;var Eh=Object.getOwnPropertyDescriptor;var kh=Object.getOwnPropertyNames,rl=Object.getOwnPropertySymbols,Ch=Object.getPrototypeOf,nl=Object.prototype.hasOwnProperty,Sh=Object.prototype.propertyIsEnumerable;var al=(r,e,n)=>e in r?Ei(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,ki=(r,e)=>{for(var n in e||(e={}))nl.call(e,n)&&al(r,n,e[n]);if(rl)for(var n of rl(e))Sh.call(e,n)&&al(r,n,e[n]);return r};var Th=r=>Ei(r,"__esModule",{value:!0});var Xn=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Dh=(r,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of kh(e))!nl.call(r,i)&&i!=="default"&&Ei(r,i,{get:()=>e[i],enumerable:!(n=Eh(e,i))||n.enumerable});return r},Bo=r=>Dh(Th(Ei(r!=null?xh(Ch(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var mn=(r,e,n)=>new Promise((i,o)=>{var s=h=>{try{f(n.next(h))}catch(p){o(p)}},l=h=>{try{f(n.throw(h))}catch(p){o(p)}},f=h=>h.done?i(h.value):Promise.resolve(h.value).then(s,l);f((n=n.apply(r,e)).next())});var ll=Xn((jy,sl)=>{var Ph="Expected a function",il=0/0,Ah="[object Symbol]",Lh=/^\s+|\s+$/g,Bh=/^[-+]0x[0-9a-f]+$/i,Mh=/^0b[01]+$/i,Rh=/^0o[0-7]+$/i,Oh=parseInt,Ih=typeof global=="object"&&global&&global.Object===Object&&global,zh=typeof self=="object"&&self&&self.Object===Object&&self,Nh=Ih||zh||Function("return this")(),Fh=Object.prototype,$h=Fh.toString,_h=Math.max,Vh=Math.min,Mo=function(){return Nh.Date.now()};function Hh(r,e,n){var i,o,s,l,f,h,p=0,g=!1,m=!1,y=!0;if(typeof r!="function")throw new TypeError(Ph);e=ol(e)||0,Ro(n)&&(g=!!n.leading,m="maxWait"in n,s=m?_h(ol(n.maxWait)||0,e):s,y="trailing"in n?!!n.trailing:y);function w(ee){var _=i,te=o;return i=o=void 0,p=ee,l=r.apply(te,_),l}function A(ee){return p=ee,f=setTimeout(R,e),g?w(ee):l}function k(ee){var _=ee-h,te=ee-p,q=e-_;return m?Vh(q,s-te):q}function B(ee){var _=ee-h,te=ee-p;return h===void 0||_>=e||_<0||m&&te>=s}function R(){var ee=Mo();if(B(ee))return z(ee);f=setTimeout(R,k(ee))}function z(ee){return f=void 0,y&&i?w(ee):(i=o=void 0,l)}function $(){f!==void 0&&clearTimeout(f),p=0,i=h=o=f=void 0}function H(){return f===void 0?l:z(Mo())}function X(){var ee=Mo(),_=B(ee);if(i=arguments,o=this,h=ee,_){if(f===void 0)return A(h);if(m)return f=setTimeout(R,e),w(h)}return f===void 0&&(f=setTimeout(R,e)),l}return X.cancel=$,X.flush=H,X}function Ro(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function qh(r){return!!r&&typeof r=="object"}function Kh(r){return typeof r=="symbol"||qh(r)&&$h.call(r)==Ah}function ol(r){if(typeof r=="number")return r;if(Kh(r))return il;if(Ro(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Ro(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(Lh,"");var n=Mh.test(r);return n||Rh.test(r)?Oh(r.slice(2),n?2:8):Bh.test(r)?il:+r}sl.exports=Hh});var cl=Xn((Oo,ul)=>{(function(){var r,e,n,i,o,s,l,f,h,p,g,m,y,w,A;n=Math.floor,p=Math.min,e=function(k,B){return k<B?-1:k>B?1:0},h=function(k,B,R,z,$){var H;if(R==null&&(R=0),$==null&&($=e),R<0)throw new Error("lo must be non-negative");for(z==null&&(z=k.length);R<z;)H=n((R+z)/2),$(B,k[H])<0?z=H:R=H+1;return[].splice.apply(k,[R,R-R].concat(B)),B},s=function(k,B,R){return R==null&&(R=e),k.push(B),w(k,0,k.length-1,R)},o=function(k,B){var R,z;return B==null&&(B=e),R=k.pop(),k.length?(z=k[0],k[0]=R,A(k,0,B)):z=R,z},f=function(k,B,R){var z;return R==null&&(R=e),z=k[0],k[0]=B,A(k,0,R),z},l=function(k,B,R){var z;return R==null&&(R=e),k.length&&R(k[0],B)<0&&(z=[k[0],B],B=z[0],k[0]=z[1],A(k,0,R)),B},i=function(k,B){var R,z,$,H,X,ee,_,te;for(B==null&&(B=e),ee=function(){te=[];for(var q=0,ae=n(k.length/2);0<=ae?q<ae:q>ae;0<=ae?q++:q--)te.push(q);return te}.apply(this).reverse(),_=[],z=0,H=ee.length;z<H;z++)R=ee[z],_.push(A(k,R,B));return _},y=function(k,B,R){var z;if(R==null&&(R=e),z=k.indexOf(B),z!==-1)return w(k,0,z,R),A(k,z,R)},g=function(k,B,R){var z,$,H,X,ee;if(R==null&&(R=e),$=k.slice(0,B),!$.length)return $;for(i($,R),ee=k.slice(B),H=0,X=ee.length;H<X;H++)z=ee[H],l($,z,R);return $.sort(R).reverse()},m=function(k,B,R){var z,$,H,X,ee,_,te,q,ae,ne;if(R==null&&(R=e),B*10<=k.length){if(X=k.slice(0,B).sort(R),!X.length)return X;for(H=X[X.length-1],q=k.slice(B),ee=0,te=q.length;ee<te;ee++)z=q[ee],R(z,H)<0&&(h(X,z,0,null,R),X.pop(),H=X[X.length-1]);return X}for(i(k,R),ne=[],$=_=0,ae=p(B,k.length);0<=ae?_<ae:_>ae;$=0<=ae?++_:--_)ne.push(o(k,R));return ne},w=function(k,B,R,z){var $,H,X;for(z==null&&(z=e),$=k[R];R>B;){if(X=R-1>>1,H=k[X],z($,H)<0){k[R]=H,R=X;continue}break}return k[R]=$},A=function(k,B,R){var z,$,H,X,ee;for(R==null&&(R=e),$=k.length,ee=B,H=k[B],z=2*B+1;z<$;)X=z+1,X<$&&!(R(k[z],k[X])<0)&&(z=X),k[B]=k[z],B=z,z=2*B+1;return k[B]=H,w(k,ee,B,R)},r=function(){k.push=s,k.pop=o,k.replace=f,k.pushpop=l,k.heapify=i,k.updateItem=y,k.nlargest=g,k.nsmallest=m;function k(B){this.cmp=B??e,this.nodes=[]}return k.prototype.push=function(B){return s(this.nodes,B,this.cmp)},k.prototype.pop=function(){return o(this.nodes,this.cmp)},k.prototype.peek=function(){return this.nodes[0]},k.prototype.contains=function(B){return this.nodes.indexOf(B)!==-1},k.prototype.replace=function(B){return f(this.nodes,B,this.cmp)},k.prototype.pushpop=function(B){return l(this.nodes,B,this.cmp)},k.prototype.heapify=function(){return i(this.nodes,this.cmp)},k.prototype.updateItem=function(B){return y(this.nodes,B,this.cmp)},k.prototype.clear=function(){return this.nodes=[]},k.prototype.empty=function(){return this.nodes.length===0},k.prototype.size=function(){return this.nodes.length},k.prototype.clone=function(){var B;return B=new k,B.nodes=this.nodes.slice(0),B},k.prototype.toArray=function(){return this.nodes.slice(0)},k.prototype.insert=k.prototype.push,k.prototype.top=k.prototype.peek,k.prototype.front=k.prototype.peek,k.prototype.has=k.prototype.contains,k.prototype.copy=k.prototype.clone,k}(),function(k,B){return typeof define=="function"&&define.amd?define([],B):typeof Oo=="object"?ul.exports=B():k.Heap=B()}(this,function(){return r})}).call(Oo)});var hl=Xn((Zy,fl)=>{fl.exports=cl()});var Cs=Xn((e0,$c)=>{"use strict";function vl(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var Ci=vl(ll()),jn=vl(hl());function gt(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gt=function(e){return typeof e}:gt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(r)}function Io(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function dl(r,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function zo(r,e,n){return e&&dl(r.prototype,e),n&&dl(r,n),r}function pl(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function mr(r,e){return Gh(r)||Wh(r,e)||Yh()}function Gh(r){if(Array.isArray(r))return r}function Wh(r,e){var n=[],i=!0,o=!1,s=void 0;try{for(var l=r[Symbol.iterator](),f;!(i=(f=l.next()).done)&&(n.push(f.value),!(e&&n.length===e));i=!0);}catch(h){o=!0,s=h}finally{try{!i&&l.return!=null&&l.return()}finally{if(o)throw s}}return n}function Yh(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var ht=typeof window=="undefined"?null:window,gl=ht?ht.navigator:null,Qy=ht?ht.document:null,Uh=gt(""),ml=gt({}),Xh=gt(function(){}),jh=typeof HTMLElement=="undefined"?"undefined":gt(HTMLElement),Zn=function(e){return e&&e.instanceString&&vt(e.instanceString)?e.instanceString():null},Fe=function(e){return e!=null&&gt(e)==Uh},vt=function(e){return e!=null&&gt(e)===Xh},at=function(e){return!Wt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},je=function(e){return e!=null&&gt(e)===ml&&!at(e)&&e.constructor===Object},Zh=function(e){return e!=null&&gt(e)===ml},Ae=function(e){return e!=null&&gt(e)===gt(1)&&!isNaN(e)},Qh=function(e){return Ae(e)&&Math.floor(e)===e},Si=function(e){if(jh!=="undefined")return e!=null&&e instanceof HTMLElement},Wt=function(e){return Qn(e)||yl(e)},Qn=function(e){return Zn(e)==="collection"&&e._private.single},yl=function(e){return Zn(e)==="collection"&&!e._private.single},No=function(e){return Zn(e)==="core"},bl=function(e){return Zn(e)==="stylesheet"},Jh=function(e){return Zn(e)==="event"},Mr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},ev=function(e){return typeof HTMLElement=="undefined"?!1:e instanceof HTMLElement},tv=function(e){return je(e)&&Ae(e.x1)&&Ae(e.x2)&&Ae(e.y1)&&Ae(e.y2)},rv=function(e){return Zh(e)&&vt(e.then)},nv=function(){return gl&&gl.userAgent.match(/msie|trident|edge/i)},Jn=function(e,n){n||(n=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var s=[],l=0;l<arguments.length;l++)s.push(arguments[l]);return s.join("$")});var i=function o(){var s=this,l=arguments,f,h=n.apply(s,l),p=o.cache;return(f=p[h])||(f=p[h]=e.apply(s,l)),f};return i.cache={},i},Fo=Jn(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Ti=Jn(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),wl=Jn(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),xl=function(e){return Mr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},mt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",av="rgb[a]?\\(("+mt+"[%]?)\\s*,\\s*("+mt+"[%]?)\\s*,\\s*("+mt+"[%]?)(?:\\s*,\\s*("+mt+"))?\\)",iv="rgb[a]?\\((?:"+mt+"[%]?)\\s*,\\s*(?:"+mt+"[%]?)\\s*,\\s*(?:"+mt+"[%]?)(?:\\s*,\\s*(?:"+mt+"))?\\)",ov="hsl[a]?\\(("+mt+")\\s*,\\s*("+mt+"[%])\\s*,\\s*("+mt+"[%])(?:\\s*,\\s*("+mt+"))?\\)",sv="hsl[a]?\\((?:"+mt+")\\s*,\\s*(?:"+mt+"[%])\\s*,\\s*(?:"+mt+"[%])(?:\\s*,\\s*(?:"+mt+"))?\\)",lv="\\#[0-9a-fA-F]{3}",uv="\\#[0-9a-fA-F]{6}",El=function(e,n){return e<n?-1:e>n?1:0},cv=function(e,n){return-1*El(e,n)},_e=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,n=1;n<e.length;n++){var i=e[n];if(i!=null)for(var o=Object.keys(i),s=0;s<o.length;s++){var l=o[s];r[l]=i[l]}}return r},fv=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var n=e.length===4,i,o,s,l=16;return n?(i=parseInt(e[1]+e[1],l),o=parseInt(e[2]+e[2],l),s=parseInt(e[3]+e[3],l)):(i=parseInt(e[1]+e[2],l),o=parseInt(e[3]+e[4],l),s=parseInt(e[5]+e[6],l)),[i,o,s]}},hv=function(e){var n,i,o,s,l,f,h,p;function g(A,k,B){return B<0&&(B+=1),B>1&&(B-=1),B<1/6?A+(k-A)*6*B:B<1/2?k:B<2/3?A+(k-A)*(2/3-B)*6:A}var m=new RegExp("^"+ov+"$").exec(e);if(m){if(i=parseInt(m[1]),i<0?i=(360- -1*i%360)%360:i>360&&(i=i%360),i/=360,o=parseFloat(m[2]),o<0||o>100||(o=o/100,s=parseFloat(m[3]),s<0||s>100)||(s=s/100,l=m[4],l!==void 0&&(l=parseFloat(l),l<0||l>1)))return;if(o===0)f=h=p=Math.round(s*255);else{var y=s<.5?s*(1+o):s+o-s*o,w=2*s-y;f=Math.round(255*g(w,y,i+1/3)),h=Math.round(255*g(w,y,i)),p=Math.round(255*g(w,y,i-1/3))}n=[f,h,p,l]}return n},vv=function(e){var n,i=new RegExp("^"+av+"$").exec(e);if(i){n=[];for(var o=[],s=1;s<=3;s++){var l=i[s];if(l[l.length-1]==="%"&&(o[s]=!0),l=parseFloat(l),o[s]&&(l=l/100*255),l<0||l>255)return;n.push(Math.floor(l))}var f=o[1]||o[2]||o[3],h=o[1]&&o[2]&&o[3];if(f&&!h)return;var p=i[4];if(p!==void 0){if(p=parseFloat(p),p<0||p>1)return;n.push(p)}}return n},dv=function(e){return gv[e.toLowerCase()]},pv=function(e){return(at(e)?e:null)||dv(e)||fv(e)||vv(e)||hv(e)},gv={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},kl=function(e){for(var n=e.map,i=e.keys,o=i.length,s=0;s<o;s++){var l=i[s];if(je(l))throw Error("Tried to set map with object key");s<i.length-1?(n[l]==null&&(n[l]={}),n=n[l]):n[l]=e.value}},Cl=function(e){for(var n=e.map,i=e.keys,o=i.length,s=0;s<o;s++){var l=i[s];if(je(l))throw Error("Tried to get map with object key");if(n=n[l],n==null)return n}return n},$o=ht?ht.performance:null,Sl=$o&&$o.now?function(){return $o.now()}:function(){return Date.now()},mv=function(){if(ht){if(ht.requestAnimationFrame)return function(r){ht.requestAnimationFrame(r)};if(ht.mozRequestAnimationFrame)return function(r){ht.mozRequestAnimationFrame(r)};if(ht.webkitRequestAnimationFrame)return function(r){ht.webkitRequestAnimationFrame(r)};if(ht.msRequestAnimationFrame)return function(r){ht.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(Sl())},1e3/60)}}(),Di=function(e){return mv(e)},yr=Sl,yn=9261,Tl=65599,pa=5381,Dl=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yn,i=n,o;o=e.next(),!o.done;)i=i*Tl+o.value|0;return i},ga=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yn;return n*Tl+e|0},Sa=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pa;return(n<<5)+n+e|0},yv=function(e,n){return e*2097152+n},Rr=function(e){return e[0]*2097152+e[1]},Pi=function(e,n){return[ga(e[0],n[0]),Sa(e[1],n[1])]},bv=function(e,n){var i={value:0,done:!1},o=0,s=e.length,l={next:function(){return o<s?i.value=e[o++]:i.done=!0,i}};return Dl(l,n)},Qr=function(e,n){var i={value:0,done:!1},o=0,s=e.length,l={next:function(){return o<s?i.value=e.charCodeAt(o++):i.done=!0,i}};return Dl(l,n)},Pl=function(){return wv(arguments)},wv=function(e){for(var n,i=0;i<e.length;i++){var o=e[i];i===0?n=Qr(o):n=Qr(o,n)}return n},Al=!0,xv=console.warn!=null,Ev=console.trace!=null,_o=Number.MAX_SAFE_INTEGER||9007199254740991,Ll=function(){return!0},Ai=function(){return!1},Bl=function(){return 0},Vo=function(){},pt=function(e){throw new Error(e)},Ml=function(e){if(e!==void 0)Al=!!e;else return Al},rt=function(e){!Ml()||(xv?console.warn(e):(console.log(e),Ev&&console.trace()))},kv=function(e){return _e({},e)},lr=function(e){return e==null?e:at(e)?e.slice():je(e)?kv(e):e},Cv=function(e){return e.slice()},Rl=function(e,n){for(n=e="";e++<36;n+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return n},Sv={},Ol=function(){return Sv},kt=function(e){var n=Object.keys(e);return function(i){for(var o={},s=0;s<n.length;s++){var l=n[s],f=i==null?void 0:i[l];o[l]=f===void 0?e[l]:f}return o}},Or=function(e,n,i){for(var o=e.length-1;o>=0&&!(e[o]===n&&(e.splice(o,1),i));o--);},Ho=function(e){e.splice(0,e.length)},Tv=function(e,n){for(var i=0;i<n.length;i++){var o=n[i];e.push(o)}},nr=function(e,n,i){return i&&(n=wl(i,n)),e[n]},Ir=function(e,n,i,o){i&&(n=wl(i,n)),e[n]=o},Dv=function(){function r(){Io(this,r),this._obj={}}return zo(r,[{key:"set",value:function(n,i){return this._obj[n]=i,this}},{key:"delete",value:function(n){return this._obj[n]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(n){return this._obj[n]!==void 0}},{key:"get",value:function(n){return this._obj[n]}}]),r}(),ur=typeof Map!="undefined"?Map:Dv,Pv="undefined",Av=function(){function r(e){if(Io(this,r),this._obj=Object.create(null),this.size=0,e!=null){var n;e.instanceString!=null&&e.instanceString()===this.instanceString()?n=e.toArray():n=e;for(var i=0;i<n.length;i++)this.add(n[i])}}return zo(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(n){var i=this._obj;i[n]!==1&&(i[n]=1,this.size++)}},{key:"delete",value:function(n){var i=this._obj;i[n]===1&&(i[n]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(n){return this._obj[n]===1}},{key:"toArray",value:function(){var n=this;return Object.keys(this._obj).filter(function(i){return n.has(i)})}},{key:"forEach",value:function(n,i){return this.toArray().forEach(n,i)}}]),r}(),bn=(typeof Set=="undefined"?"undefined":gt(Set))!==Pv?Set:Av,Li=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||n===void 0||!No(e)){pt("An element must have a core reference and parameters set");return}var o=n.group;if(o==null&&(n.data&&n.data.source!=null&&n.data.target!=null?o="edges":o="nodes"),o!=="nodes"&&o!=="edges"){pt("An element must be of type `nodes` or `edges`; you specified `"+o+"`");return}this.length=1,this[0]=this;var s=this._private={cy:e,single:!0,data:n.data||{},position:n.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:o,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!n.selected,selectable:n.selectable===void 0?!0:!!n.selectable,locked:!!n.locked,grabbed:!1,grabbable:n.grabbable===void 0?!0:!!n.grabbable,pannable:n.pannable===void 0?o==="edges":!!n.pannable,active:!1,classes:new bn,animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(s.position.x==null&&(s.position.x=0),s.position.y==null&&(s.position.y=0),n.renderedPosition){var l=n.renderedPosition,f=e.pan(),h=e.zoom();s.position={x:(l.x-f.x)/h,y:(l.y-f.y)/h}}var p=[];at(n.classes)?p=n.classes:Fe(n.classes)&&(p=n.classes.split(/\s+/));for(var g=0,m=p.length;g<m;g++){var y=p[g];!y||y===""||s.classes.add(y)}this.createEmitter();var w=n.style||n.css;w&&(rt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(w)),(i===void 0||i)&&this.restore()},Il=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(i,o,s){var l;je(i)&&!Wt(i)&&(l=i,i=l.roots||l.root,o=l.visit,s=l.directed),s=arguments.length===2&&!vt(o)?o:s,o=vt(o)?o:function(){};for(var f=this._private.cy,h=i=Fe(i)?this.filter(i):i,p=[],g=[],m={},y={},w={},A=0,k,B=this.byGroup(),R=B.nodes,z=B.edges,$=0;$<h.length;$++){var H=h[$],X=H.id();H.isNode()&&(p.unshift(H),e.bfs&&(w[X]=!0,g.push(H)),y[X]=0)}var ee=function(){var oe=e.bfs?p.shift():p.pop(),ie=oe.id();if(e.dfs){if(w[ie])return"continue";w[ie]=!0,g.push(oe)}var ve=y[ie],le=m[ie],he=le!=null?le.source():null,se=le!=null?le.target():null,ce=le==null?void 0:oe.same(he)?se[0]:he[0],be=void 0;if(be=o(oe,le,ce,A++,ve),be===!0)return k=oe,"break";if(be===!1)return"break";for(var de=oe.connectedEdges().filter(function(me){return(!s||me.source().same(oe))&&z.has(me)}),xe=0;xe<de.length;xe++){var Ce=de[xe],Te=Ce.connectedNodes().filter(function(me){return!me.same(oe)&&R.has(me)}),Se=Te.id();Te.length!==0&&!w[Se]&&(Te=Te[0],p.push(Te),e.bfs&&(w[Se]=!0,g.push(Te)),m[Se]=Ce,y[Se]=y[ie]+1)}};e:for(;p.length!==0;){var _=ee();switch(_){case"continue":continue;case"break":break e}}for(var te=f.collection(),q=0;q<g.length;q++){var ae=g[q],ne=m[ae.id()];ne!=null&&te.push(ne),te.push(ae)}return{path:f.collection(te),found:f.collection(k)}}},Ta={breadthFirstSearch:Il({bfs:!0}),depthFirstSearch:Il({dfs:!0})};Ta.bfs=Ta.breadthFirstSearch;Ta.dfs=Ta.depthFirstSearch;var Lv=kt({root:null,weight:function(e){return 1},directed:!1}),Bv={dijkstra:function(e){if(!je(e)){var n=arguments;e={root:n[0],weight:n[1],directed:n[2]}}var i=Lv(e),o=i.root,s=i.weight,l=i.directed,f=this,h=s,p=Fe(o)?this.filter(o)[0]:o[0],g={},m={},y={},w=this.byGroup(),A=w.nodes,k=w.edges;k.unmergeBy(function(ve){return ve.isLoop()});for(var B=function(le){return g[le.id()]},R=function(le,he){g[le.id()]=he,z.updateItem(le)},z=new jn(function(ve,le){return B(ve)-B(le)}),$=0;$<A.length;$++){var H=A[$];g[H.id()]=H.same(p)?0:1/0,z.push(H)}for(var X=function(le,he){for(var se=(l?le.edgesTo(he):le.edgesWith(he)).intersect(k),ce=1/0,be,de=0;de<se.length;de++){var xe=se[de],Ce=h(xe);(Ce<ce||!be)&&(ce=Ce,be=xe)}return{edge:be,dist:ce}};z.size()>0;){var ee=z.pop(),_=B(ee),te=ee.id();if(y[te]=_,_!==1/0)for(var q=ee.neighborhood().intersect(A),ae=0;ae<q.length;ae++){var ne=q[ae],re=ne.id(),oe=X(ee,ne),ie=_+oe.dist;ie<B(ne)&&(R(ne,ie),m[re]={node:ee,edge:oe.edge})}}return{distanceTo:function(le){var he=Fe(le)?A.filter(le)[0]:le[0];return y[he.id()]},pathTo:function(le){var he=Fe(le)?A.filter(le)[0]:le[0],se=[],ce=he,be=ce.id();if(he.length>0)for(se.unshift(he);m[be];){var de=m[be];se.unshift(de.edge),se.unshift(de.node),ce=de.node,be=ce.id()}return f.spawn(se)}}}},Mv={kruskal:function(e){e=e||function($){return 1};for(var n=this.byGroup(),i=n.nodes,o=n.edges,s=i.length,l=new Array(s),f=i,h=function(H){for(var X=0;X<l.length;X++){var ee=l[X];if(ee.has(H))return X}},p=0;p<s;p++)l[p]=this.spawn(i[p]);for(var g=o.sort(function($,H){return e($)-e(H)}),m=0;m<g.length;m++){var y=g[m],w=y.source()[0],A=y.target()[0],k=h(w),B=h(A),R=l[k],z=l[B];k!==B&&(f.merge(y),R.merge(z),l.splice(B,1))}return f}},Rv=kt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Ov={aStar:function(e){var n=this.cy(),i=Rv(e),o=i.root,s=i.goal,l=i.heuristic,f=i.directed,h=i.weight;o=n.collection(o)[0],s=n.collection(s)[0];var p=o.id(),g=s.id(),m={},y={},w={},A=new jn(function(be,de){return y[be.id()]-y[de.id()]}),k=new bn,B={},R={},z=function(de,xe){A.push(de),k.add(xe)},$,H,X=function(){$=A.pop(),H=$.id(),k.delete(H)},ee=function(de){return k.has(de)};z(o,p),m[p]=0,y[p]=l(o);for(var _=0;A.size()>0;){if(X(),_++,H===g){for(var te=[],q=s,ae=g,ne=R[ae];te.unshift(q),ne!=null&&te.unshift(ne),q=B[ae],q!=null;)ae=q.id(),ne=R[ae];return{found:!0,distance:m[H],path:this.spawn(te),steps:_}}w[H]=!0;for(var re=$._private.edges,oe=0;oe<re.length;oe++){var ie=re[oe];if(!!this.hasElementWithId(ie.id())&&!(f&&ie.data("source")!==H)){var ve=ie.source(),le=ie.target(),he=ve.id()!==H?ve:le,se=he.id();if(!!this.hasElementWithId(se)&&!w[se]){var ce=m[H]+h(ie);if(!ee(se)){m[se]=ce,y[se]=ce+l(he),z(he,se),B[se]=$,R[se]=ie;continue}ce<m[se]&&(m[se]=ce,y[se]=ce+l(he),B[se]=$,R[se]=ie)}}}}return{found:!1,distance:void 0,path:void 0,steps:_}}},Iv=kt({weight:function(e){return 1},directed:!1}),zv={floydWarshall:function(e){for(var n=this.cy(),i=Iv(e),o=i.weight,s=i.directed,l=o,f=this.byGroup(),h=f.nodes,p=f.edges,g=h.length,m=g*g,y=function(Ce){return h.indexOf(Ce)},w=function(Ce){return h[Ce]},A=new Array(m),k=0;k<m;k++){var B=k%g,R=(k-B)/g;R===B?A[k]=0:A[k]=1/0}for(var z=new Array(m),$=new Array(m),H=0;H<p.length;H++){var X=p[H],ee=X.source()[0],_=X.target()[0];if(ee!==_){var te=y(ee),q=y(_),ae=te*g+q,ne=l(X);if(A[ae]>ne&&(A[ae]=ne,z[ae]=q,$[ae]=X),!s){var re=q*g+te;!s&&A[re]>ne&&(A[re]=ne,z[re]=te,$[re]=X)}}}for(var oe=0;oe<g;oe++)for(var ie=0;ie<g;ie++)for(var ve=ie*g+oe,le=0;le<g;le++){var he=ie*g+le,se=oe*g+le;A[ve]+A[se]<A[he]&&(A[he]=A[ve]+A[se],z[he]=z[ve])}var ce=function(Ce){return(Fe(Ce)?n.filter(Ce):Ce)[0]},be=function(Ce){return y(ce(Ce))},de={distance:function(Ce,Te){var Se=be(Ce),me=be(Te);return A[Se*g+me]},path:function(Ce,Te){var Se=be(Ce),me=be(Te),ue=w(Se);if(Se===me)return ue.collection();if(z[Se*g+me]==null)return n.collection();var Ee=n.collection(),Pe=Se,De;for(Ee.merge(ue);Se!==me;)Pe=Se,Se=z[Se*g+me],De=$[Pe*g+Se],Ee.merge(De),Ee.merge(w(Se));return Ee}};return de}},Nv=kt({weight:function(e){return 1},directed:!1,root:null}),Fv={bellmanFord:function(e){var n=this,i=Nv(e),o=i.weight,s=i.directed,l=i.root,f=o,h=this,p=this.cy(),g=this.byGroup(),m=g.edges,y=g.nodes,w=y.length,A=new ur,k=!1,B=[];l=p.collection(l)[0],m.unmergeBy(function(me){return me.isLoop()});for(var R=m.length,z=function(ue){var Ee=A.get(ue.id());return Ee||(Ee={},A.set(ue.id(),Ee)),Ee},$=function(ue){return(Fe(ue)?p.$(ue):ue)[0]},H=function(ue){return z($(ue)).dist},X=function(ue){for(var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l,Pe=$(ue),De=[],Re=Pe;;){if(Re==null)return n.spawn();var Ge=z(Re),Ke=Ge.edge,Me=Ge.pred;if(De.unshift(Re[0]),Re.same(Ee)&&De.length>0)break;Ke!=null&&De.unshift(Ke),Re=Me}return h.spawn(De)},ee=0;ee<w;ee++){var _=y[ee],te=z(_);_.same(l)?te.dist=0:te.dist=1/0,te.pred=null,te.edge=null}for(var q=!1,ae=function(ue,Ee,Pe,De,Re,Ge){var Ke=De.dist+Ge;Ke<Re.dist&&!Pe.same(De.edge)&&(Re.dist=Ke,Re.pred=ue,Re.edge=Pe,q=!0)},ne=1;ne<w;ne++){q=!1;for(var re=0;re<R;re++){var oe=m[re],ie=oe.source(),ve=oe.target(),le=f(oe),he=z(ie),se=z(ve);ae(ie,ve,oe,he,se,le),s||ae(ve,ie,oe,se,he,le)}if(!q)break}if(q)for(var ce=0;ce<R;ce++){var be=m[ce],de=be.source(),xe=be.target(),Ce=f(be),Te=z(de).dist,Se=z(xe).dist;if(Te+Ce<Se||!s&&Se+Ce<Te){rt("Graph contains a negative weight cycle for Bellman-Ford"),k=!0;break}}return{distanceTo:H,pathTo:X,hasNegativeWeightCycle:k,negativeWeightCycles:B}}},$v=Math.sqrt(2),_v=function(e,n,i){i.length===0&&pt("Karger-Stein must be run on a connected (sub)graph");for(var o=i[e],s=o[1],l=o[2],f=n[s],h=n[l],p=i,g=p.length-1;g>=0;g--){var m=p[g],y=m[1],w=m[2];(n[y]===f&&n[w]===h||n[y]===h&&n[w]===f)&&p.splice(g,1)}for(var A=0;A<p.length;A++){var k=p[A];k[1]===h?(p[A]=k.slice(),p[A][1]=f):k[2]===h&&(p[A]=k.slice(),p[A][2]=f)}for(var B=0;B<n.length;B++)n[B]===h&&(n[B]=f);return p},qo=function(e,n,i,o){for(;i>o;){var s=Math.floor(Math.random()*n.length);n=_v(s,e,n),i--}return n},Vv={kargerStein:function(){var e=this,n=this.byGroup(),i=n.nodes,o=n.edges;o.unmergeBy(function(se){return se.isLoop()});var s=i.length,l=o.length,f=Math.ceil(Math.pow(Math.log(s)/Math.LN2,2)),h=Math.floor(s/$v);if(s<2){pt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var p=[],g=0;g<l;g++){var m=o[g];p.push([g,i.indexOf(m.source()),i.indexOf(m.target())])}for(var y=1/0,w=[],A=new Array(s),k=new Array(s),B=new Array(s),R=function(ce,be){for(var de=0;de<s;de++)be[de]=ce[de]},z=0;z<=f;z++){for(var $=0;$<s;$++)k[$]=$;var H=qo(k,p.slice(),s,h),X=H.slice();R(k,B);var ee=qo(k,H,h,2),_=qo(B,X,h,2);ee.length<=_.length&&ee.length<y?(y=ee.length,w=ee,R(k,A)):_.length<=ee.length&&_.length<y&&(y=_.length,w=_,R(B,A))}for(var te=this.spawn(w.map(function(se){return o[se[0]]})),q=this.spawn(),ae=this.spawn(),ne=A[0],re=0;re<A.length;re++){var oe=A[re],ie=i[re];oe===ne?q.merge(ie):ae.merge(ie)}var ve=function(ce){var be=e.spawn();return ce.forEach(function(de){be.merge(de),de.connectedEdges().forEach(function(xe){e.contains(xe)&&!te.contains(xe)&&be.merge(xe)})}),be},le=[ve(q),ve(ae)],he={cut:te,components:le,partition1:q,partition2:ae};return he}},Hv=function(e){return{x:e.x,y:e.y}},Bi=function(e,n,i){return{x:e.x*n+i.x,y:e.y*n+i.y}},zl=function(e,n,i){return{x:(e.x-i.x)/n,y:(e.y-i.y)/n}},wn=function(e){return{x:e[0],y:e[1]}},qv=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,o=1/0,s=n;s<i;s++){var l=e[s];isFinite(l)&&(o=Math.min(l,o))}return o},Kv=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,o=-1/0,s=n;s<i;s++){var l=e[s];isFinite(l)&&(o=Math.max(l,o))}return o},Gv=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,o=0,s=0,l=n;l<i;l++){var f=e[l];isFinite(f)&&(o+=f,s++)}return o/s},Wv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;o?e=e.slice(n,i):(i<e.length&&e.splice(i,e.length-i),n>0&&e.splice(0,n));for(var f=0,h=e.length-1;h>=0;h--){var p=e[h];l?isFinite(p)||(e[h]=-1/0,f++):e.splice(h,1)}s&&e.sort(function(y,w){return y-w});var g=e.length,m=Math.floor(g/2);return g%2!=0?e[m+1+f]:(e[m-1+f]+e[m+f])/2},Yv=function(e){return Math.PI*e/180},Mi=function(e,n){return Math.atan2(n,e)-Math.PI/2},Ko=Math.log2||function(r){return Math.log(r)/Math.log(2)},Nl=function(e){return e>0?1:e<0?-1:0},Jr=function(e,n){return Math.sqrt(en(e,n))},en=function(e,n){var i=n.x-e.x,o=n.y-e.y;return i*i+o*o},Uv=function(e){for(var n=e.length,i=0,o=0;o<n;o++)i+=e[o];for(var s=0;s<n;s++)e[s]=e[s]/i;return e},bt=function(e,n,i,o){return(1-o)*(1-o)*e+2*(1-o)*o*n+o*o*i},xn=function(e,n,i,o){return{x:bt(e.x,n.x,i.x,o),y:bt(e.y,n.y,i.y,o)}},Xv=function(e,n,i,o){var s={x:n.x-e.x,y:n.y-e.y},l=Jr(e,n),f={x:s.x/l,y:s.y/l};return i=i??0,o=o??i*l,{x:e.x+f.x*o,y:e.y+f.y*o}},Pa=function(e,n,i){return Math.max(e,Math.min(i,n))},Vt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},jv=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},Zv=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Qv=function(e,n){e.x1=Math.min(e.x1,n.x1),e.x2=Math.max(e.x2,n.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n.y1),e.y2=Math.max(e.y2,n.y2),e.h=e.y2-e.y1},Jv=function(e,n,i){e.x1=Math.min(e.x1,n),e.x2=Math.max(e.x2,n),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,i),e.y2=Math.max(e.y2,i),e.h=e.y2-e.y1},Ri=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=n,e.x2+=n,e.y1-=n,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Go=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],i,o,s,l;if(n.length===1)i=o=s=l=n[0];else if(n.length===2)i=s=n[0],l=o=n[1];else if(n.length===4){var f=mr(n,4);i=f[0],o=f[1],s=f[2],l=f[3]}return e.x1-=l,e.x2+=o,e.y1-=i,e.y2+=s,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Fl=function(e,n){e.x1=n.x1,e.y1=n.y1,e.x2=n.x2,e.y2=n.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Wo=function(e,n){return!(e.x1>n.x2||n.x1>e.x2||e.x2<n.x1||n.x2<e.x1||e.y2<n.y1||n.y2<e.y1||e.y1>n.y2||n.y1>e.y2)},En=function(e,n,i){return e.x1<=n&&n<=e.x2&&e.y1<=i&&i<=e.y2},ed=function(e,n){return En(e,n.x,n.y)},$l=function(e,n){return En(e,n.x1,n.y1)&&En(e,n.x2,n.y2)},_l=function(e,n,i,o,s,l,f){var h=Na(s,l),p=s/2,g=l/2,m;{var y=i-p+h-f,w=o-g-f,A=i+p-h+f,k=w;if(m=zr(e,n,i,o,y,w,A,k,!1),m.length>0)return m}{var B=i+p+f,R=o-g+h-f,z=B,$=o+g-h+f;if(m=zr(e,n,i,o,B,R,z,$,!1),m.length>0)return m}{var H=i-p+h-f,X=o+g+f,ee=i+p-h+f,_=X;if(m=zr(e,n,i,o,H,X,ee,_,!1),m.length>0)return m}{var te=i-p-f,q=o-g+h-f,ae=te,ne=o+g-h+f;if(m=zr(e,n,i,o,te,q,ae,ne,!1),m.length>0)return m}var re;{var oe=i-p+h,ie=o-g+h;if(re=Ra(e,n,i,o,oe,ie,h+f),re.length>0&&re[0]<=oe&&re[1]<=ie)return[re[0],re[1]]}{var ve=i+p-h,le=o-g+h;if(re=Ra(e,n,i,o,ve,le,h+f),re.length>0&&re[0]>=ve&&re[1]<=le)return[re[0],re[1]]}{var he=i+p-h,se=o+g-h;if(re=Ra(e,n,i,o,he,se,h+f),re.length>0&&re[0]>=he&&re[1]>=se)return[re[0],re[1]]}{var ce=i-p+h,be=o+g-h;if(re=Ra(e,n,i,o,ce,be,h+f),re.length>0&&re[0]<=ce&&re[1]>=be)return[re[0],re[1]]}return[]},td=function(e,n,i,o,s,l,f){var h=f,p=Math.min(i,s),g=Math.max(i,s),m=Math.min(o,l),y=Math.max(o,l);return p-h<=e&&e<=g+h&&m-h<=n&&n<=y+h},rd=function(e,n,i,o,s,l,f,h,p){var g={x1:Math.min(i,f,s)-p,x2:Math.max(i,f,s)+p,y1:Math.min(o,h,l)-p,y2:Math.max(o,h,l)+p};return!(e<g.x1||e>g.x2||n<g.y1||n>g.y2)},nd=function(e,n,i,o){i-=o;var s=n*n-4*e*i;if(s<0)return[];var l=Math.sqrt(s),f=2*e,h=(-n+l)/f,p=(-n-l)/f;return[h,p]},ad=function(e,n,i,o,s){var l=1e-5;e===0&&(e=l),n/=e,i/=e,o/=e;var f,h,p,g,m,y,w,A;if(h=(3*i-n*n)/9,p=-(27*o)+n*(9*i-2*(n*n)),p/=54,f=h*h*h+p*p,s[1]=0,w=n/3,f>0){m=p+Math.sqrt(f),m=m<0?-Math.pow(-m,1/3):Math.pow(m,1/3),y=p-Math.sqrt(f),y=y<0?-Math.pow(-y,1/3):Math.pow(y,1/3),s[0]=-w+m+y,w+=(m+y)/2,s[4]=s[2]=-w,w=Math.sqrt(3)*(-y+m)/2,s[3]=w,s[5]=-w;return}if(s[5]=s[3]=0,f===0){A=p<0?-Math.pow(-p,1/3):Math.pow(p,1/3),s[0]=-w+2*A,s[4]=s[2]=-(A+w);return}h=-h,g=h*h*h,g=Math.acos(p/Math.sqrt(g)),A=2*Math.sqrt(h),s[0]=-w+A*Math.cos(g/3),s[2]=-w+A*Math.cos((g+2*Math.PI)/3),s[4]=-w+A*Math.cos((g+4*Math.PI)/3)},id=function(e,n,i,o,s,l,f,h){var p=1*i*i-4*i*s+2*i*f+4*s*s-4*s*f+f*f+o*o-4*o*l+2*o*h+4*l*l-4*l*h+h*h,g=1*9*i*s-3*i*i-3*i*f-6*s*s+3*s*f+9*o*l-3*o*o-3*o*h-6*l*l+3*l*h,m=1*3*i*i-6*i*s+i*f-i*e+2*s*s+2*s*e-f*e+3*o*o-6*o*l+o*h-o*n+2*l*l+2*l*n-h*n,y=1*i*s-i*i+i*e-s*e+o*l-o*o+o*n-l*n,w=[];ad(p,g,m,y,w);for(var A=1e-7,k=[],B=0;B<6;B+=2)Math.abs(w[B+1])<A&&w[B]>=0&&w[B]<=1&&k.push(w[B]);k.push(1),k.push(0);for(var R=-1,z,$,H,X=0;X<k.length;X++)z=Math.pow(1-k[X],2)*i+2*(1-k[X])*k[X]*s+k[X]*k[X]*f,$=Math.pow(1-k[X],2)*o+2*(1-k[X])*k[X]*l+k[X]*k[X]*h,H=Math.pow(z-e,2)+Math.pow($-n,2),R>=0?H<R&&(R=H):R=H;return R},od=function(e,n,i,o,s,l){var f=[e-i,n-o],h=[s-i,l-o],p=h[0]*h[0]+h[1]*h[1],g=f[0]*f[0]+f[1]*f[1],m=f[0]*h[0]+f[1]*h[1],y=m*m/p;return m<0?g:y>p?(e-s)*(e-s)+(n-l)*(n-l):g-y},Ht=function(e,n,i){for(var o,s,l,f,h,p=0,g=0;g<i.length/2;g++)if(o=i[g*2],s=i[g*2+1],g+1<i.length/2?(l=i[(g+1)*2],f=i[(g+1)*2+1]):(l=i[(g+1-i.length/2)*2],f=i[(g+1-i.length/2)*2+1]),!(o==e&&l==e))if(o>=e&&e>=l||o<=e&&e<=l)h=(e-o)/(l-o)*(f-s)+s,h>n&&p++;else continue;return p%2!=0},br=function(e,n,i,o,s,l,f,h,p){var g=new Array(i.length),m;h[0]!=null?(m=Math.atan(h[1]/h[0]),h[0]<0?m=m+Math.PI/2:m=-m-Math.PI/2):m=h;for(var y=Math.cos(-m),w=Math.sin(-m),A=0;A<g.length/2;A++)g[A*2]=l/2*(i[A*2]*y-i[A*2+1]*w),g[A*2+1]=f/2*(i[A*2+1]*y+i[A*2]*w),g[A*2]+=o,g[A*2+1]+=s;var k;if(p>0){var B=Hl(g,-p);k=Vl(B)}else k=g;return Ht(e,n,k)},sd=function(e,n,i,o,s,l,f){for(var h=new Array(i.length),p=l/2,g=f/2,m=Xo(l,f),y=m*m,w=0;w<i.length/4;w++){var A=void 0,k=void 0;w===0?A=i.length-2:A=w*4-2,k=w*4+2;var B=o+p*i[w*4],R=s+g*i[w*4+1],z=-i[A]*i[k]-i[A+1]*i[k+1],$=m/Math.tan(Math.acos(z)/2),H=B-$*i[A],X=R-$*i[A+1],ee=B+$*i[k],_=R+$*i[k+1];h[w*4]=H,h[w*4+1]=X,h[w*4+2]=ee,h[w*4+3]=_;var te=i[A+1],q=-i[A],ae=te*i[k]+q*i[k+1];ae<0&&(te*=-1,q*=-1);var ne=H+te*m,re=X+q*m,oe=Math.pow(ne-e,2)+Math.pow(re-n,2);if(oe<=y)return!0}return Ht(e,n,h)},Vl=function(e){for(var n=new Array(e.length/2),i,o,s,l,f,h,p,g,m=0;m<e.length/4;m++){i=e[m*4],o=e[m*4+1],s=e[m*4+2],l=e[m*4+3],m<e.length/4-1?(f=e[(m+1)*4],h=e[(m+1)*4+1],p=e[(m+1)*4+2],g=e[(m+1)*4+3]):(f=e[0],h=e[1],p=e[2],g=e[3]);var y=zr(i,o,s,l,f,h,p,g,!0);n[m*2]=y[0],n[m*2+1]=y[1]}return n},Hl=function(e,n){for(var i=new Array(e.length*2),o,s,l,f,h=0;h<e.length/2;h++){o=e[h*2],s=e[h*2+1],h<e.length/2-1?(l=e[(h+1)*2],f=e[(h+1)*2+1]):(l=e[0],f=e[1]);var p=f-s,g=-(l-o),m=Math.sqrt(p*p+g*g),y=p/m,w=g/m;i[h*4]=o+y*n,i[h*4+1]=s+w*n,i[h*4+2]=l+y*n,i[h*4+3]=f+w*n}return i},ld=function(e,n,i,o,s,l){var f=i-e,h=o-n;f/=s,h/=l;var p=Math.sqrt(f*f+h*h),g=p-1;if(g<0)return[];var m=g/p;return[(i-e)*m+e,(o-n)*m+n]},tn=function(e,n,i,o,s,l,f){return e-=s,n-=l,e/=i/2+f,n/=o/2+f,e*e+n*n<=1},Ra=function(e,n,i,o,s,l,f){var h=[i-e,o-n],p=[e-s,n-l],g=h[0]*h[0]+h[1]*h[1],m=2*(p[0]*h[0]+p[1]*h[1]),y=p[0]*p[0]+p[1]*p[1]-f*f,w=m*m-4*g*y;if(w<0)return[];var A=(-m+Math.sqrt(w))/(2*g),k=(-m-Math.sqrt(w))/(2*g),B=Math.min(A,k),R=Math.max(A,k),z=[];if(B>=0&&B<=1&&z.push(B),R>=0&&R<=1&&z.push(R),z.length===0)return[];var $=z[0]*h[0]+e,H=z[0]*h[1]+n;if(z.length>1){if(z[0]==z[1])return[$,H];var X=z[1]*h[0]+e,ee=z[1]*h[1]+n;return[$,H,X,ee]}else return[$,H]},Yo=function(e,n,i){return n<=e&&e<=i||i<=e&&e<=n?e:e<=n&&n<=i||i<=n&&n<=e?n:i},zr=function(e,n,i,o,s,l,f,h,p){var g=e-s,m=i-e,y=f-s,w=n-l,A=o-n,k=h-l,B=y*w-k*g,R=m*w-A*g,z=k*m-y*A;if(z!==0){var $=B/z,H=R/z,X=.001,ee=0-X,_=1+X;return ee<=$&&$<=_&&ee<=H&&H<=_?[e+$*m,n+$*A]:p?[e+$*m,n+$*A]:[]}else return B===0||R===0?Yo(e,i,f)===f?[f,h]:Yo(e,i,s)===s?[s,l]:Yo(s,f,i)===i?[i,o]:[]:[]},Oa=function(e,n,i,o,s,l,f,h){var p=[],g,m=new Array(i.length),y=!0;l==null&&(y=!1);var w;if(y){for(var A=0;A<m.length/2;A++)m[A*2]=i[A*2]*l+o,m[A*2+1]=i[A*2+1]*f+s;if(h>0){var k=Hl(m,-h);w=Vl(k)}else w=m}else w=i;for(var B,R,z,$,H=0;H<w.length/2;H++)B=w[H*2],R=w[H*2+1],H<w.length/2-1?(z=w[(H+1)*2],$=w[(H+1)*2+1]):(z=w[0],$=w[1]),g=zr(e,n,o,s,B,R,z,$),g.length!==0&&p.push(g[0],g[1]);return p},ud=function(e,n,i,o,s,l,f,h){for(var p=[],g,m=new Array(i.length),y=l/2,w=f/2,A=Xo(l,f),k=0;k<i.length/4;k++){var B=void 0,R=void 0;k===0?B=i.length-2:B=k*4-2,R=k*4+2;var z=o+y*i[k*4],$=s+w*i[k*4+1],H=-i[B]*i[R]-i[B+1]*i[R+1],X=A/Math.tan(Math.acos(H)/2),ee=z-X*i[B],_=$-X*i[B+1],te=z+X*i[R],q=$+X*i[R+1];k===0?(m[i.length-2]=ee,m[i.length-1]=_):(m[k*4-2]=ee,m[k*4-1]=_),m[k*4]=te,m[k*4+1]=q;var ae=i[B+1],ne=-i[B],re=ae*i[R]+ne*i[R+1];re<0&&(ae*=-1,ne*=-1);var oe=ee+ae*A,ie=_+ne*A;g=Ra(e,n,o,s,oe,ie,A),g.length!==0&&p.push(g[0],g[1])}for(var ve=0;ve<m.length/4;ve++)g=zr(e,n,o,s,m[ve*4],m[ve*4+1],m[ve*4+2],m[ve*4+3],!1),g.length!==0&&p.push(g[0],g[1]);if(p.length>2){for(var le=[p[0],p[1]],he=Math.pow(le[0]-e,2)+Math.pow(le[1]-n,2),se=1;se<p.length/2;se++){var ce=Math.pow(p[se*2]-e,2)+Math.pow(p[se*2+1]-n,2);ce<=he&&(le[0]=p[se*2],le[1]=p[se*2+1],he=ce)}return le}return p},Oi=function(e,n,i){var o=[e[0]-n[0],e[1]-n[1]],s=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=(s-i)/s;return l<0&&(l=1e-5),[n[0]+l*o[0],n[1]+l*o[1]]},zt=function(e,n){var i=Uo(e,n);return i=ql(i),i},ql=function(e){for(var n,i,o=e.length/2,s=1/0,l=1/0,f=-1/0,h=-1/0,p=0;p<o;p++)n=e[2*p],i=e[2*p+1],s=Math.min(s,n),f=Math.max(f,n),l=Math.min(l,i),h=Math.max(h,i);for(var g=2/(f-s),m=2/(h-l),y=0;y<o;y++)n=e[2*y]=e[2*y]*g,i=e[2*y+1]=e[2*y+1]*m,s=Math.min(s,n),f=Math.max(f,n),l=Math.min(l,i),h=Math.max(h,i);if(l<-1)for(var w=0;w<o;w++)i=e[2*w+1]=e[2*w+1]+(-1-l);return e},Uo=function(e,n){var i=1/e*2*Math.PI,o=e%2==0?Math.PI/2+i/2:Math.PI/2;o+=n;for(var s=new Array(e*2),l,f=0;f<e;f++)l=f*i+o,s[2*f]=Math.cos(l),s[2*f+1]=Math.sin(-l);return s},Na=function(e,n){return Math.min(e/4,n/4,8)},Xo=function(e,n){return Math.min(e/10,n/10,8)},Kl=function(){return 8},cd=function(e,n,i){return[e-2*n+i,2*(n-e),e]},jo=function(e,n){return{heightOffset:Math.min(15,.05*n),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},fd=kt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),hd={pageRank:function(e){for(var n=fd(e),i=n.dampingFactor,o=n.precision,s=n.iterations,l=n.weight,f=this._private.cy,h=this.byGroup(),p=h.nodes,g=h.edges,m=p.length,y=m*m,w=g.length,A=new Array(y),k=new Array(m),B=(1-i)/m,R=0;R<m;R++){for(var z=0;z<m;z++){var $=R*m+z;A[$]=0}k[R]=0}for(var H=0;H<w;H++){var X=g[H],ee=X.data("source"),_=X.data("target");if(ee!==_){var te=p.indexOfId(ee),q=p.indexOfId(_),ae=l(X),ne=q*m+te;A[ne]+=ae,k[te]+=ae}}for(var re=1/m+B,oe=0;oe<m;oe++)if(k[oe]===0)for(var ie=0;ie<m;ie++){var ve=ie*m+oe;A[ve]=re}else for(var le=0;le<m;le++){var he=le*m+oe;A[he]=A[he]/k[oe]+B}for(var se=new Array(m),ce=new Array(m),be,de=0;de<m;de++)se[de]=1;for(var xe=0;xe<s;xe++){for(var Ce=0;Ce<m;Ce++)ce[Ce]=0;for(var Te=0;Te<m;Te++)for(var Se=0;Se<m;Se++){var me=Te*m+Se;ce[Te]+=A[me]*se[Se]}Uv(ce),be=se,se=ce,ce=be;for(var ue=0,Ee=0;Ee<m;Ee++){var Pe=be[Ee]-se[Ee];ue+=Pe*Pe}if(ue<o)break}var De={rank:function(Ge){return Ge=f.collection(Ge)[0],se[p.indexOf(Ge)]}};return De}},Gl=kt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),kn={degreeCentralityNormalized:function(e){e=Gl(e);var n=this.cy(),i=this.nodes(),o=i.length;if(e.directed){for(var g={},m={},y=0,w=0,A=0;A<o;A++){var k=i[A],B=k.id();e.root=k;var R=this.degreeCentrality(e);y<R.indegree&&(y=R.indegree),w<R.outdegree&&(w=R.outdegree),g[B]=R.indegree,m[B]=R.outdegree}return{indegree:function($){return y==0?0:(Fe($)&&($=n.filter($)),g[$.id()]/y)},outdegree:function($){return w===0?0:(Fe($)&&($=n.filter($)),m[$.id()]/w)}}}else{for(var s={},l=0,f=0;f<o;f++){var h=i[f];e.root=h;var p=this.degreeCentrality(e);l<p.degree&&(l=p.degree),s[h.id()]=p.degree}return{degree:function($){return l===0?0:(Fe($)&&($=n.filter($)),s[$.id()]/l)}}}},degreeCentrality:function(e){e=Gl(e);var n=this.cy(),i=this,o=e,s=o.root,l=o.weight,f=o.directed,h=o.alpha;if(s=n.collection(s)[0],f){for(var w=s.connectedEdges(),A=w.filter(function(ee){return ee.target().same(s)&&i.has(ee)}),k=w.filter(function(ee){return ee.source().same(s)&&i.has(ee)}),B=A.length,R=k.length,z=0,$=0,H=0;H<A.length;H++)z+=l(A[H]);for(var X=0;X<k.length;X++)$+=l(k[X]);return{indegree:Math.pow(B,1-h)*Math.pow(z,h),outdegree:Math.pow(R,1-h)*Math.pow($,h)}}else{for(var p=s.connectedEdges().intersection(i),g=p.length,m=0,y=0;y<p.length;y++)m+=l(p[y]);return{degree:Math.pow(g,1-h)*Math.pow(m,h)}}}};kn.dc=kn.degreeCentrality;kn.dcn=kn.degreeCentralityNormalised=kn.degreeCentralityNormalized;var Wl=kt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Cn={closenessCentralityNormalized:function(e){for(var n=Wl(e),i=n.harmonic,o=n.weight,s=n.directed,l=this.cy(),f={},h=0,p=this.nodes(),g=this.floydWarshall({weight:o,directed:s}),m=0;m<p.length;m++){for(var y=0,w=p[m],A=0;A<p.length;A++)if(m!==A){var k=g.distance(w,p[A]);i?y+=1/k:y+=k}i||(y=1/y),h<y&&(h=y),f[w.id()]=y}return{closeness:function(R){return h==0?0:(Fe(R)?R=l.filter(R)[0].id():R=R.id(),f[R]/h)}}},closenessCentrality:function(e){var n=Wl(e),i=n.root,o=n.weight,s=n.directed,l=n.harmonic;i=this.filter(i)[0];for(var f=this.dijkstra({root:i,weight:o,directed:s}),h=0,p=this.nodes(),g=0;g<p.length;g++){var m=p[g];if(!m.same(i)){var y=f.distanceTo(m);l?h+=1/y:h+=y}}return l?h:1/h}};Cn.cc=Cn.closenessCentrality;Cn.ccn=Cn.closenessCentralityNormalised=Cn.closenessCentralityNormalized;var vd=kt({weight:null,directed:!1}),Zo={betweennessCentrality:function(e){for(var n=vd(e),i=n.directed,o=n.weight,s=o!=null,l=this.cy(),f=this.nodes(),h={},p={},g=0,m={set:function($,H){p[$]=H,H>g&&(g=H)},get:function($){return p[$]}},y=0;y<f.length;y++){var w=f[y],A=w.id();i?h[A]=w.outgoers().nodes():h[A]=w.openNeighborhood().nodes(),m.set(A,0)}for(var k=function($){for(var H=f[$].id(),X=[],ee={},_={},te={},q=new jn(function(Se,me){return te[Se]-te[me]}),ae=0;ae<f.length;ae++){var ne=f[ae].id();ee[ne]=[],_[ne]=0,te[ne]=1/0}for(_[H]=1,te[H]=0,q.push(H);!q.empty();){var re=q.pop();if(X.push(re),s)for(var oe=0;oe<h[re].length;oe++){var ie=h[re][oe],ve=l.getElementById(re),le=void 0;ve.edgesTo(ie).length>0?le=ve.edgesTo(ie)[0]:le=ie.edgesTo(ve)[0];var he=o(le);ie=ie.id(),te[ie]>te[re]+he&&(te[ie]=te[re]+he,q.nodes.indexOf(ie)<0?q.push(ie):q.updateItem(ie),_[ie]=0,ee[ie]=[]),te[ie]==te[re]+he&&(_[ie]=_[ie]+_[re],ee[ie].push(re))}else for(var se=0;se<h[re].length;se++){var ce=h[re][se].id();te[ce]==1/0&&(q.push(ce),te[ce]=te[re]+1),te[ce]==te[re]+1&&(_[ce]=_[ce]+_[re],ee[ce].push(re))}}for(var be={},de=0;de<f.length;de++)be[f[de].id()]=0;for(;X.length>0;){for(var xe=X.pop(),Ce=0;Ce<ee[xe].length;Ce++){var Te=ee[xe][Ce];be[Te]=be[Te]+_[Te]/_[xe]*(1+be[xe])}xe!=f[$].id()&&m.set(xe,m.get(xe)+be[xe])}},B=0;B<f.length;B++)k(B);var R={betweenness:function($){var H=l.collection($).id();return m.get(H)},betweennessNormalized:function($){if(g==0)return 0;var H=l.collection($).id();return m.get(H)/g}};return R.betweennessNormalised=R.betweennessNormalized,R}};Zo.bc=Zo.betweennessCentrality;var dd=kt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),pd=function(e){return dd(e)},gd=function(e,n){for(var i=0,o=0;o<n.length;o++)i+=n[o](e);return i},md=function(e,n,i){for(var o=0;o<n;o++)e[o*n+o]=i},Yl=function(e,n){for(var i,o=0;o<n;o++){i=0;for(var s=0;s<n;s++)i+=e[s*n+o];for(var l=0;l<n;l++)e[l*n+o]=e[l*n+o]/i}},yd=function(e,n,i){for(var o=new Array(i*i),s=0;s<i;s++){for(var l=0;l<i;l++)o[s*i+l]=0;for(var f=0;f<i;f++)for(var h=0;h<i;h++)o[s*i+h]+=e[s*i+f]*n[f*i+h]}return o},bd=function(e,n,i){for(var o=e.slice(0),s=1;s<i;s++)e=yd(e,o,n);return e},wd=function(e,n,i){for(var o=new Array(n*n),s=0;s<n*n;s++)o[s]=Math.pow(e[s],i);return Yl(o,n),o},xd=function(e,n,i,o){for(var s=0;s<i;s++){var l=Math.round(e[s]*Math.pow(10,o))/Math.pow(10,o),f=Math.round(n[s]*Math.pow(10,o))/Math.pow(10,o);if(l!==f)return!1}return!0},Ed=function(e,n,i,o){for(var s=[],l=0;l<n;l++){for(var f=[],h=0;h<n;h++)Math.round(e[l*n+h]*1e3)/1e3>0&&f.push(i[h]);f.length!==0&&s.push(o.collection(f))}return s},kd=function(e,n){for(var i=0;i<e.length;i++)if(!n[i]||e[i].id()!==n[i].id())return!1;return!0},Cd=function(e){for(var n=0;n<e.length;n++)for(var i=0;i<e.length;i++)n!=i&&kd(e[n],e[i])&&e.splice(i,1);return e},Ul=function(e){for(var n=this.nodes(),i=this.edges(),o=this.cy(),s=pd(e),l={},f=0;f<n.length;f++)l[n[f].id()]=f;for(var h=n.length,p=h*h,g=new Array(p),m,y=0;y<p;y++)g[y]=0;for(var w=0;w<i.length;w++){var A=i[w],k=l[A.source().id()],B=l[A.target().id()],R=gd(A,s.attributes);g[k*h+B]+=R,g[B*h+k]+=R}md(g,h,s.multFactor),Yl(g,h);for(var z=!0,$=0;z&&$<s.maxIterations;)z=!1,m=bd(g,h,s.expandFactor),g=wd(m,h,s.inflateFactor),xd(g,m,p,4)||(z=!0),$++;var H=Ed(g,h,n,o);return H=Cd(H),H},Sd={markovClustering:Ul,mcl:Ul},Td=function(e){return e},Xl=function(e,n){return Math.abs(n-e)},jl=function(e,n,i){return e+Xl(n,i)},Zl=function(e,n,i){return e+Math.pow(i-n,2)},Dd=function(e){return Math.sqrt(e)},Pd=function(e,n,i){return Math.max(e,Xl(n,i))},$a=function(e,n,i,o,s){for(var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Td,f=o,h,p,g=0;g<e;g++)h=n(g),p=i(g),f=s(f,h,p);return l(f)},Sn={euclidean:function(e,n,i){return e>=2?$a(e,n,i,0,Zl,Dd):$a(e,n,i,0,jl)},squaredEuclidean:function(e,n,i){return $a(e,n,i,0,Zl)},manhattan:function(e,n,i){return $a(e,n,i,0,jl)},max:function(e,n,i){return $a(e,n,i,-1/0,Pd)}};Sn["squared-euclidean"]=Sn.squaredEuclidean;Sn.squaredeuclidean=Sn.squaredEuclidean;function Ii(r,e,n,i,o,s){var l;return vt(r)?l=r:l=Sn[r]||Sn.euclidean,e===0&&vt(r)?l(o,s):l(e,n,i,o,s)}var Ad=kt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Qo=function(e){return Ad(e)},zi=function(e,n,i,o,s){var l=s!=="kMedoids",f=l?function(m){return i[m]}:function(m){return o[m](i)},h=function(y){return o[y](n)},p=i,g=n;return Ii(e,o.length,f,h,p,g)},Jo=function(e,n,i){for(var o=i.length,s=new Array(o),l=new Array(o),f=new Array(n),h=null,p=0;p<o;p++)s[p]=e.min(i[p]).value,l[p]=e.max(i[p]).value;for(var g=0;g<n;g++){h=[];for(var m=0;m<o;m++)h[m]=Math.random()*(l[m]-s[m])+s[m];f[g]=h}return f},Ql=function(e,n,i,o,s){for(var l=1/0,f=0,h=0;h<n.length;h++){var p=zi(i,e,n[h],o,s);p<l&&(l=p,f=h)}return f},Jl=function(e,n,i){for(var o=[],s=null,l=0;l<n.length;l++)s=n[l],i[s.id()]===e&&o.push(s);return o},Ld=function(e,n,i){return Math.abs(n-e)<=i},Bd=function(e,n,i){for(var o=0;o<e.length;o++)for(var s=0;s<e[o].length;s++){var l=Math.abs(e[o][s]-n[o][s]);if(l>i)return!1}return!0},Md=function(e,n,i){for(var o=0;o<i;o++)if(e===n[o])return!0;return!1},eu=function(e,n){var i=new Array(n);if(e.length<50)for(var o=0;o<n;o++){for(var s=e[Math.floor(Math.random()*e.length)];Md(s,i,o);)s=e[Math.floor(Math.random()*e.length)];i[o]=s}else for(var l=0;l<n;l++)i[l]=e[Math.floor(Math.random()*e.length)];return i},tu=function(e,n,i){for(var o=0,s=0;s<n.length;s++)o+=zi("manhattan",n[s],e,i,"kMedoids");return o},Rd=function(e){var n=this.cy(),i=this.nodes(),o=null,s=Qo(e),l=new Array(s.k),f={},h;s.testMode?typeof s.testCentroids=="number"?h=Jo(i,s.k,s.attributes):gt(s.testCentroids)==="object"?h=s.testCentroids:h=Jo(i,s.k,s.attributes):h=Jo(i,s.k,s.attributes);for(var p=!0,g=0;p&&g<s.maxIterations;){for(var m=0;m<i.length;m++)o=i[m],f[o.id()]=Ql(o,h,s.distance,s.attributes,"kMeans");p=!1;for(var y=0;y<s.k;y++){var w=Jl(y,i,f);if(w.length!==0){for(var A=s.attributes.length,k=h[y],B=new Array(A),R=new Array(A),z=0;z<A;z++){R[z]=0;for(var $=0;$<w.length;$++)o=w[$],R[z]+=s.attributes[z](o);B[z]=R[z]/w.length,Ld(B[z],k[z],s.sensitivityThreshold)||(p=!0)}h[y]=B,l[y]=n.collection(w)}}g++}return l},Od=function(e){var n=this.cy(),i=this.nodes(),o=null,s=Qo(e),l=new Array(s.k),f,h={},p,g=new Array(s.k);s.testMode?typeof s.testCentroids=="number"||(gt(s.testCentroids)==="object"?f=s.testCentroids:f=eu(i,s.k)):f=eu(i,s.k);for(var m=!0,y=0;m&&y<s.maxIterations;){for(var w=0;w<i.length;w++)o=i[w],h[o.id()]=Ql(o,f,s.distance,s.attributes,"kMedoids");m=!1;for(var A=0;A<f.length;A++){var k=Jl(A,i,h);if(k.length!==0){g[A]=tu(f[A],k,s.attributes);for(var B=0;B<k.length;B++)p=tu(k[B],k,s.attributes),p<g[A]&&(g[A]=p,f[A]=k[B],m=!0);l[A]=n.collection(k)}}y++}return l},Id=function(e,n,i,o,s){for(var l,f,h=0;h<n.length;h++)for(var p=0;p<e.length;p++)o[h][p]=Math.pow(i[h][p],s.m);for(var g=0;g<e.length;g++)for(var m=0;m<s.attributes.length;m++){l=0,f=0;for(var y=0;y<n.length;y++)l+=o[y][g]*s.attributes[m](n[y]),f+=o[y][g];e[g][m]=l/f}},zd=function(e,n,i,o,s){for(var l=0;l<e.length;l++)n[l]=e[l].slice();for(var f,h,p,g=2/(s.m-1),m=0;m<i.length;m++)for(var y=0;y<o.length;y++){f=0;for(var w=0;w<i.length;w++)h=zi(s.distance,o[y],i[m],s.attributes,"cmeans"),p=zi(s.distance,o[y],i[w],s.attributes,"cmeans"),f+=Math.pow(h/p,g);e[y][m]=1/f}},Nd=function(e,n,i,o){for(var s=new Array(i.k),l=0;l<s.length;l++)s[l]=[];for(var f,h,p=0;p<n.length;p++){f=-1/0,h=-1;for(var g=0;g<n[0].length;g++)n[p][g]>f&&(f=n[p][g],h=g);s[h].push(e[p])}for(var m=0;m<s.length;m++)s[m]=o.collection(s[m]);return s},ru=function(e){var n=this.cy(),i=this.nodes(),o=Qo(e),s,l,f,h,p;h=new Array(i.length);for(var g=0;g<i.length;g++)h[g]=new Array(o.k);f=new Array(i.length);for(var m=0;m<i.length;m++)f[m]=new Array(o.k);for(var y=0;y<i.length;y++){for(var w=0,A=0;A<o.k;A++)f[y][A]=Math.random(),w+=f[y][A];for(var k=0;k<o.k;k++)f[y][k]=f[y][k]/w}l=new Array(o.k);for(var B=0;B<o.k;B++)l[B]=new Array(o.attributes.length);p=new Array(i.length);for(var R=0;R<i.length;R++)p[R]=new Array(o.k);for(var z=!0,$=0;z&&$<o.maxIterations;)z=!1,Id(l,i,f,p,o),zd(f,h,l,i,o),Bd(f,h,o.sensitivityThreshold)||(z=!0),$++;return s=Nd(i,f,o,n),{clusters:s,degreeOfMembership:f}},Fd={kMeans:Rd,kMedoids:Od,fuzzyCMeans:ru,fcm:ru},$d=kt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),_d={single:"min",complete:"max"},Vd=function(e){var n=$d(e),i=_d[n.linkage];return i!=null&&(n.linkage=i),n},nu=function(e,n,i,o,s){for(var l=0,f=1/0,h,p=s.attributes,g=function(q,ae){return Ii(s.distance,p.length,function(ne){return p[ne](q)},function(ne){return p[ne](ae)},q,ae)},m=0;m<e.length;m++){var y=e[m].key,w=i[y][o[y]];w<f&&(l=y,f=w)}if(s.mode==="threshold"&&f>=s.threshold||s.mode==="dendrogram"&&e.length===1)return!1;var A=n[l],k=n[o[l]],B;s.mode==="dendrogram"?B={left:A,right:k,key:A.key}:B={value:A.value.concat(k.value),key:A.key},e[A.index]=B,e.splice(k.index,1),n[A.key]=B;for(var R=0;R<e.length;R++){var z=e[R];A.key===z.key?h=1/0:s.linkage==="min"?(h=i[A.key][z.key],i[A.key][z.key]>i[k.key][z.key]&&(h=i[k.key][z.key])):s.linkage==="max"?(h=i[A.key][z.key],i[A.key][z.key]<i[k.key][z.key]&&(h=i[k.key][z.key])):s.linkage==="mean"?h=(i[A.key][z.key]*A.size+i[k.key][z.key]*k.size)/(A.size+k.size):s.mode==="dendrogram"?h=g(z.value,A.value):h=g(z.value[0],A.value[0]),i[A.key][z.key]=i[z.key][A.key]=h}for(var $=0;$<e.length;$++){var H=e[$].key;if(o[H]===A.key||o[H]===k.key){for(var X=H,ee=0;ee<e.length;ee++){var _=e[ee].key;i[H][_]<i[H][X]&&(X=_)}o[H]=X}e[$].index=$}return A.key=k.key=A.index=k.index=null,!0},Ni=function r(e,n,i){!e||(e.value?n.push(e.value):(e.left&&r(e.left,n),e.right&&r(e.right,n)))},Hd=function r(e,n){if(!e)return"";if(e.left&&e.right){var i=r(e.left,n),o=r(e.right,n),s=n.add({group:"nodes",data:{id:i+","+o}});return n.add({group:"edges",data:{source:i,target:s.id()}}),n.add({group:"edges",data:{source:o,target:s.id()}}),s.id()}else if(e.value)return e.value.id()},qd=function r(e,n,i){if(!e)return[];var o=[],s=[],l=[];return n===0?(e.left&&Ni(e.left,o),e.right&&Ni(e.right,s),l=o.concat(s),[i.collection(l)]):n===1?e.value?[i.collection(e.value)]:(e.left&&Ni(e.left,o),e.right&&Ni(e.right,s),[i.collection(o),i.collection(s)]):e.value?[i.collection(e.value)]:(e.left&&(o=r(e.left,n-1,i)),e.right&&(s=r(e.right,n-1,i)),o.concat(s))},au=function(e){for(var n=this.cy(),i=this.nodes(),o=Vd(e),s=o.attributes,l=function($,H){return Ii(o.distance,s.length,function(X){return s[X]($)},function(X){return s[X](H)},$,H)},f=[],h=[],p=[],g=[],m=0;m<i.length;m++){var y={value:o.mode==="dendrogram"?i[m]:[i[m]],key:m,index:m};f[m]=y,g[m]=y,h[m]=[],p[m]=0}for(var w=0;w<f.length;w++)for(var A=0;A<=w;A++){var k=void 0;o.mode==="dendrogram"?k=w===A?1/0:l(f[w].value,f[A].value):k=w===A?1/0:l(f[w].value[0],f[A].value[0]),h[w][A]=k,h[A][w]=k,k<h[w][p[w]]&&(p[w]=A)}for(var B=nu(f,g,h,p,o);B;)B=nu(f,g,h,p,o);var R;return o.mode==="dendrogram"?(R=qd(f[0],o.dendrogramDepth,n),o.addDendrogram&&Hd(f[0],n)):(R=new Array(f.length),f.forEach(function(z,$){z.key=z.index=null,R[$]=n.collection(z.value)})),R},Kd={hierarchicalClustering:au,hca:au},Gd=kt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Wd=function(e){var n=e.damping,i=e.preference;.5<=n&&n<1||pt("Damping must range on [0.5, 1).  Got: ".concat(n));var o=["median","mean","min","max"];return o.some(function(s){return s===i})||Ae(i)||pt("Preference must be one of [".concat(o.map(function(s){return"'".concat(s,"'")}).join(", "),"] or a number.  Got: ").concat(i)),Gd(e)},Yd=function(e,n,i,o){var s=function(f,h){return o[h](f)};return-Ii(e,o.length,function(l){return s(n,l)},function(l){return s(i,l)},n,i)},Ud=function(e,n){var i=null;return n==="median"?i=Wv(e):n==="mean"?i=Gv(e):n==="min"?i=qv(e):n==="max"?i=Kv(e):i=n,i},Xd=function(e,n,i){for(var o=[],s=0;s<e;s++)n[s*e+s]+i[s*e+s]>0&&o.push(s);return o},iu=function(e,n,i){for(var o=[],s=0;s<e;s++){for(var l=-1,f=-1/0,h=0;h<i.length;h++){var p=i[h];n[s*e+p]>f&&(l=p,f=n[s*e+p])}l>0&&o.push(l)}for(var g=0;g<i.length;g++)o[i[g]]=i[g];return o},jd=function(e,n,i){for(var o=iu(e,n,i),s=0;s<i.length;s++){for(var l=[],f=0;f<o.length;f++)o[f]===i[s]&&l.push(f);for(var h=-1,p=-1/0,g=0;g<l.length;g++){for(var m=0,y=0;y<l.length;y++)m+=n[l[y]*e+l[g]];m>p&&(h=g,p=m)}i[s]=l[h]}return o=iu(e,n,i),o},ou=function(e){for(var n=this.cy(),i=this.nodes(),o=Wd(e),s={},l=0;l<i.length;l++)s[i[l].id()]=l;var f,h,p,g,m,y;f=i.length,h=f*f,p=new Array(h);for(var w=0;w<h;w++)p[w]=-1/0;for(var A=0;A<f;A++)for(var k=0;k<f;k++)A!==k&&(p[A*f+k]=Yd(o.distance,i[A],i[k],o.attributes));g=Ud(p,o.preference);for(var B=0;B<f;B++)p[B*f+B]=g;m=new Array(h);for(var R=0;R<h;R++)m[R]=0;y=new Array(h);for(var z=0;z<h;z++)y[z]=0;for(var $=new Array(f),H=new Array(f),X=new Array(f),ee=0;ee<f;ee++)$[ee]=0,H[ee]=0,X[ee]=0;for(var _=new Array(f*o.minIterations),te=0;te<_.length;te++)_[te]=0;var q;for(q=0;q<o.maxIterations;q++){for(var ae=0;ae<f;ae++){for(var ne=-1/0,re=-1/0,oe=-1,ie=0,ve=0;ve<f;ve++)$[ve]=m[ae*f+ve],ie=y[ae*f+ve]+p[ae*f+ve],ie>=ne?(re=ne,ne=ie,oe=ve):ie>re&&(re=ie);for(var le=0;le<f;le++)m[ae*f+le]=(1-o.damping)*(p[ae*f+le]-ne)+o.damping*$[le];m[ae*f+oe]=(1-o.damping)*(p[ae*f+oe]-re)+o.damping*$[oe]}for(var he=0;he<f;he++){for(var se=0,ce=0;ce<f;ce++)$[ce]=y[ce*f+he],H[ce]=Math.max(0,m[ce*f+he]),se+=H[ce];se-=H[he],H[he]=m[he*f+he],se+=H[he];for(var be=0;be<f;be++)y[be*f+he]=(1-o.damping)*Math.min(0,se-H[be])+o.damping*$[be];y[he*f+he]=(1-o.damping)*(se-H[he])+o.damping*$[he]}for(var de=0,xe=0;xe<f;xe++){var Ce=y[xe*f+xe]+m[xe*f+xe]>0?1:0;_[q%o.minIterations*f+xe]=Ce,de+=Ce}if(de>0&&(q>=o.minIterations-1||q==o.maxIterations-1)){for(var Te=0,Se=0;Se<f;Se++){X[Se]=0;for(var me=0;me<o.minIterations;me++)X[Se]+=_[me*f+Se];(X[Se]===0||X[Se]===o.minIterations)&&Te++}if(Te===f)break}}for(var ue=Xd(f,m,y),Ee=jd(f,p,ue),Pe={},De=0;De<ue.length;De++)Pe[ue[De]]=[];for(var Re=0;Re<i.length;Re++){var Ge=s[i[Re].id()],Ke=Ee[Ge];Ke!=null&&Pe[Ke].push(i[Re])}for(var Me=new Array(ue.length),Be=0;Be<ue.length;Be++)Me[Be]=n.collection(Pe[ue[Be]]);return Me},Zd={affinityPropagation:ou,ap:ou},Qd=kt({root:void 0,directed:!1}),Jd={hierholzer:function(e){if(!je(e)){var n=arguments;e={root:n[0],directed:n[1]}}var i=Qd(e),o=i.root,s=i.directed,l=this,f=!1,h,p,g;o&&(g=Fe(o)?this.filter(o)[0].id():o[0].id());var m={},y={};s?l.forEach(function(z){var $=z.id();if(z.isNode()){var H=z.indegree(!0),X=z.outdegree(!0),ee=H-X,_=X-H;ee==1?h?f=!0:h=$:_==1?p?f=!0:p=$:(_>1||ee>1)&&(f=!0),m[$]=[],z.outgoers().forEach(function(te){te.isEdge()&&m[$].push(te.id())})}else y[$]=[void 0,z.target().id()]}):l.forEach(function(z){var $=z.id();if(z.isNode()){var H=z.degree(!0);H%2&&(h?p?f=!0:p=$:h=$),m[$]=[],z.connectedEdges().forEach(function(X){return m[$].push(X.id())})}else y[$]=[z.source().id(),z.target().id()]});var w={found:!1,trail:void 0};if(f)return w;if(p&&h)if(s){if(g&&p!=g)return w;g=p}else{if(g&&p!=g&&h!=g)return w;g||(g=p)}else g||(g=l[0].id());var A=function($){for(var H=$,X=[$],ee,_,te;m[H].length;)ee=m[H].shift(),_=y[ee][0],te=y[ee][1],H!=te?(m[te]=m[te].filter(function(q){return q!=ee}),H=te):!s&&H!=_&&(m[_]=m[_].filter(function(q){return q!=ee}),H=_),X.unshift(ee),X.unshift(H);return X},k=[],B=[];for(B=A(g);B.length!=1;)m[B[0]].length==0?(k.unshift(l.getElementById(B.shift())),k.unshift(l.getElementById(B.shift()))):B=A(B.shift()).concat(B);k.unshift(l.getElementById(B.shift()));for(var R in m)if(m[R].length)return w;return w.found=!0,w.trail=this.spawn(k,!0),w}},Fi=function(){var e=this,n={},i=0,o=0,s=[],l=[],f={},h=function(y,w){for(var A=l.length-1,k=[],B=e.spawn();l[A].x!=y||l[A].y!=w;)k.push(l.pop().edge),A--;k.push(l.pop().edge),k.forEach(function(R){var z=R.connectedNodes().intersection(e);B.merge(R),z.forEach(function($){var H=$.id(),X=$.connectedEdges().intersection(e);B.merge($),n[H].cutVertex?B.merge(X.filter(function(ee){return ee.isLoop()})):B.merge(X)})}),s.push(B)},p=function m(y,w,A){y===A&&(o+=1),n[w]={id:i,low:i++,cutVertex:!1};var k=e.getElementById(w).connectedEdges().intersection(e);if(k.size()===0)s.push(e.spawn(e.getElementById(w)));else{var B,R,z,$;k.forEach(function(H){B=H.source().id(),R=H.target().id(),z=B===w?R:B,z!==A&&($=H.id(),f[$]||(f[$]=!0,l.push({x:w,y:z,edge:H})),z in n?n[w].low=Math.min(n[w].low,n[z].id):(m(y,z,w),n[w].low=Math.min(n[w].low,n[z].low),n[w].id<=n[z].low&&(n[w].cutVertex=!0,h(w,z))))})}};e.forEach(function(m){if(m.isNode()){var y=m.id();y in n||(o=0,p(y,y),n[y].cutVertex=o>1)}});var g=Object.keys(n).filter(function(m){return n[m].cutVertex}).map(function(m){return e.getElementById(m)});return{cut:e.spawn(g),components:s}},ep={hopcroftTarjanBiconnected:Fi,htbc:Fi,htb:Fi,hopcroftTarjanBiconnectedComponents:Fi},$i=function(){var e=this,n={},i=0,o=[],s=[],l=e.spawn(e),f=function h(p){s.push(p),n[p]={index:i,low:i++,explored:!1};var g=e.getElementById(p).connectedEdges().intersection(e);if(g.forEach(function(k){var B=k.target().id();B!==p&&(B in n||h(B),n[B].explored||(n[p].low=Math.min(n[p].low,n[B].low)))}),n[p].index===n[p].low){for(var m=e.spawn();;){var y=s.pop();if(m.merge(e.getElementById(y)),n[y].low=n[p].index,n[y].explored=!0,y===p)break}var w=m.edgesWith(m),A=m.merge(w);o.push(A),l=l.difference(A)}};return e.forEach(function(h){if(h.isNode()){var p=h.id();p in n||f(p)}}),{cut:l,components:o}},tp={tarjanStronglyConnected:$i,tsc:$i,tscc:$i,tarjanStronglyConnectedComponents:$i},su={};[Ta,Bv,Mv,Ov,zv,Fv,Vv,hd,kn,Cn,Zo,Sd,Fd,Kd,Zd,Jd,ep,tp].forEach(function(r){_e(su,r)});var lu=0,uu=1,cu=2,wr=function r(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=lu,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};wr.prototype={fulfill:function(e){return fu(this,uu,"fulfillValue",e)},reject:function(e){return fu(this,cu,"rejectReason",e)},then:function(e,n){var i=this,o=new wr;return i.onFulfilled.push(du(e,o,"fulfill")),i.onRejected.push(du(n,o,"reject")),hu(i),o.proxy}};var fu=function(e,n,i,o){return e.state===lu&&(e.state=n,e[i]=o,hu(e)),e},hu=function(e){e.state===uu?vu(e,"onFulfilled",e.fulfillValue):e.state===cu&&vu(e,"onRejected",e.rejectReason)},vu=function(e,n,i){if(e[n].length!==0){var o=e[n];e[n]=[];var s=function(){for(var f=0;f<o.length;f++)o[f](i)};typeof setImmediate=="function"?setImmediate(s):setTimeout(s,0)}},du=function(e,n,i){return function(o){if(typeof e!="function")n[i].call(n,o);else{var s;try{s=e(o)}catch(l){n.reject(l);return}rp(n,s)}}},rp=function r(e,n){if(e===n||e.proxy===n){e.reject(new TypeError("cannot resolve promise with itself"));return}var i;if(gt(n)==="object"&&n!==null||typeof n=="function")try{i=n.then}catch(s){e.reject(s);return}if(typeof i=="function"){var o=!1;try{i.call(n,function(s){o||(o=!0,s===n?e.reject(new TypeError("circular thenable chain")):r(e,s))},function(s){o||(o=!0,e.reject(s))})}catch(s){o||e.reject(s)}return}e.fulfill(n)};wr.all=function(r){return new wr(function(e,n){for(var i=new Array(r.length),o=0,s=function(h,p){i[h]=p,o++,o===r.length&&e(i)},l=0;l<r.length;l++)(function(f){var h=r[f],p=h!=null&&h.then!=null;if(p)h.then(function(m){s(f,m)},function(m){n(m)});else{var g=h;s(f,g)}})(l)})};wr.resolve=function(r){return new wr(function(e,n){e(r)})};wr.reject=function(r){return new wr(function(e,n){n(r)})};var Tn=typeof Promise!="undefined"?Promise:wr,es=function(e,n,i){var o=No(e),s=!o,l=this._private=_e({duration:1e3},n,i);if(l.target=e,l.style=l.style||l.css,l.started=!1,l.playing=!1,l.hooked=!1,l.applying=!1,l.progress=0,l.completes=[],l.frames=[],l.complete&&vt(l.complete)&&l.completes.push(l.complete),s){var f=e.position();l.startPosition=l.startPosition||{x:f.x,y:f.y},l.startStyle=l.startStyle||e.cy().style().getAnimationStartStyle(e,l.style)}if(o){var h=e.pan();l.startPan={x:h.x,y:h.y},l.startZoom=e.zoom()}this.length=1,this[0]=this},rn=es.prototype;_e(rn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var n,i=e.target._private.animation;e.queue?n=i.queue:n=i.current,n.push(this),Wt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var n=this._private;return e===void 0?n.progress*n.duration:this.progress(e/n.duration)},progress:function(e){var n=this._private,i=n.playing;return e===void 0?n.progress:(i&&this.pause(),n.progress=e,n.started=!1,i&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,n=e.playing;n&&this.pause(),e.progress=1-e.progress,e.started=!1;var i=function(p,g){var m=e[p];m!=null&&(e[p]=e[g],e[g]=m)};if(i("zoom","startZoom"),i("pan","startPan"),i("position","startPosition"),e.style)for(var o=0;o<e.style.length;o++){var s=e.style[o],l=s.name,f=e.startStyle[l];e.startStyle[l]=s,e.style[o]=f}return n&&this.play(),this},promise:function(e){var n=this._private,i;switch(e){case"frame":i=n.frames;break;default:case"complete":case"completed":i=n.completes}return new Tn(function(o,s){i.push(function(){o()})})}});rn.complete=rn.completed;rn.run=rn.play;rn.running=rn.playing;var np={animated:function(){return function(){var n=this,i=n.length!==void 0,o=i?n:[n],s=this._private.cy||this;if(!s.styleEnabled())return!1;var l=o[0];if(l)return l._private.animation.current.length>0}},clearQueue:function(){return function(){var n=this,i=n.length!==void 0,o=i?n:[n],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){var f=o[l];f._private.animation.queue=[]}return this}},delay:function(){return function(n,i){var o=this._private.cy||this;return o.styleEnabled()?this.animate({delay:n,duration:n,complete:i}):this}},delayAnimation:function(){return function(n,i){var o=this._private.cy||this;return o.styleEnabled()?this.animation({delay:n,duration:n,complete:i}):this}},animation:function(){return function(n,i){var o=this,s=o.length!==void 0,l=s?o:[o],f=this._private.cy||this,h=!s,p=!h;if(!f.styleEnabled())return this;var g=f.style();n=_e({},n,i);var m=Object.keys(n).length===0;if(m)return new es(l[0],n);switch(n.duration===void 0&&(n.duration=400),n.duration){case"slow":n.duration=600;break;case"fast":n.duration=200;break}if(p&&(n.style=g.getPropsList(n.style||n.css),n.css=void 0),p&&n.renderedPosition!=null){var y=n.renderedPosition,w=f.pan(),A=f.zoom();n.position=zl(y,A,w)}if(h&&n.panBy!=null){var k=n.panBy,B=f.pan();n.pan={x:B.x+k.x,y:B.y+k.y}}var R=n.center||n.centre;if(h&&R!=null){var z=f.getCenterPan(R.eles,n.zoom);z!=null&&(n.pan=z)}if(h&&n.fit!=null){var $=n.fit,H=f.getFitViewport($.eles||$.boundingBox,$.padding);H!=null&&(n.pan=H.pan,n.zoom=H.zoom)}if(h&&je(n.zoom)){var X=f.getZoomedViewport(n.zoom);X!=null?(X.zoomed&&(n.zoom=X.zoom),X.panned&&(n.pan=X.pan)):n.zoom=null}return new es(l[0],n)}},animate:function(){return function(n,i){var o=this,s=o.length!==void 0,l=s?o:[o],f=this._private.cy||this;if(!f.styleEnabled())return this;i&&(n=_e({},n,i));for(var h=0;h<l.length;h++){var p=l[h],g=p.animated()&&(n.queue===void 0||n.queue),m=p.animation(n,g?{queue:!0}:void 0);m.play()}return this}},stop:function(){return function(n,i){var o=this,s=o.length!==void 0,l=s?o:[o],f=this._private.cy||this;if(!f.styleEnabled())return this;for(var h=0;h<l.length;h++){for(var p=l[h],g=p._private,m=g.animation.current,y=0;y<m.length;y++){var w=m[y],A=w._private;i&&(A.duration=0)}n&&(g.animation.queue=[]),i||(g.animation.current=[])}return f.notify("draw"),this}}},ap={data:function(e){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(o){},beforeSet:function(o,s){},onSet:function(o){},canSet:function(o){return!0}};return e=_e({},n,e),function(o,s){var l=e,f=this,h=f.length!==void 0,p=h?f:[f],g=h?f[0]:f;if(Fe(o)){if(l.allowGetting&&s===void 0){var m;return g&&(l.beforeGet(g),m=g._private[l.field][o]),m}else if(l.allowSetting&&s!==void 0){var y=!l.immutableKeys[o];if(y){var w=pl({},o,s);l.beforeSet(f,w);for(var A=0,k=p.length;A<k;A++){var B=p[A];l.canSet(B)&&(B._private[l.field][o]=s)}l.updateStyle&&f.updateStyle(),l.onSet(f),l.settingTriggersEvent&&f[l.triggerFnName](l.settingEvent)}}}else if(l.allowSetting&&je(o)){var R=o,z,$,H=Object.keys(R);l.beforeSet(f,R);for(var X=0;X<H.length;X++){z=H[X],$=R[z];var ee=!l.immutableKeys[z];if(ee)for(var _=0;_<p.length;_++){var te=p[_];l.canSet(te)&&(te._private[l.field][z]=$)}}l.updateStyle&&f.updateStyle(),l.onSet(f),l.settingTriggersEvent&&f[l.triggerFnName](l.settingEvent)}else if(l.allowBinding&&vt(o)){var q=o;f.on(l.bindingEvent,q)}else if(l.allowGetting&&o===void 0){var ae;return g&&(l.beforeGet(g),ae=g._private[l.field]),ae}return f}},removeData:function(e){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=_e({},n,e),function(o){var s=e,l=this,f=l.length!==void 0,h=f?l:[l];if(Fe(o)){for(var p=o.split(/\s+/),g=p.length,m=0;m<g;m++){var y=p[m];if(!Mr(y)){var w=!s.immutableKeys[y];if(w)for(var A=0,k=h.length;A<k;A++)h[A]._private[s.field][y]=void 0}}s.triggerEvent&&l[s.triggerFnName](s.event)}else if(o===void 0){for(var B=0,R=h.length;B<R;B++)for(var z=h[B]._private[s.field],$=Object.keys(z),H=0;H<$.length;H++){var X=$[H],ee=!s.immutableKeys[X];ee&&(z[X]=void 0)}s.triggerEvent&&l[s.triggerFnName](s.event)}return l}}},ip={eventAliasesOn:function(e){var n=e;n.addListener=n.listen=n.bind=n.on,n.unlisten=n.unbind=n.off=n.removeListener,n.trigger=n.emit,n.pon=n.promiseOn=function(i,o){var s=this,l=Array.prototype.slice.call(arguments,0);return new Tn(function(f,h){var p=function(w){s.off.apply(s,m),f(w)},g=l.concat([p]),m=g.concat([]);s.on.apply(s,g)})}}},et={};[np,ap,ip].forEach(function(r){_e(et,r)});var op={animate:et.animate(),animation:et.animation(),animated:et.animated(),clearQueue:et.clearQueue(),delay:et.delay(),delayAnimation:et.delayAnimation(),stop:et.stop()},_i={classes:function(e){var n=this;if(e===void 0){var i=[];return n[0]._private.classes.forEach(function(A){return i.push(A)}),i}else at(e)||(e=(e||"").match(/\S+/g)||[]);for(var o=[],s=new bn(e),l=0;l<n.length;l++){for(var f=n[l],h=f._private,p=h.classes,g=!1,m=0;m<e.length;m++){var y=e[m],w=p.has(y);if(!w){g=!0;break}}g||(g=p.size!==e.length),g&&(h.classes=s,o.push(f))}return o.length>0&&this.spawn(o).updateStyle().emit("class"),n},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var n=this[0];return n!=null&&n._private.classes.has(e)},toggleClass:function(e,n){at(e)||(e=e.match(/\S+/g)||[]);for(var i=this,o=n===void 0,s=[],l=0,f=i.length;l<f;l++)for(var h=i[l],p=h._private.classes,g=!1,m=0;m<e.length;m++){var y=e[m],w=p.has(y),A=!1;n||o&&!w?(p.add(y),A=!0):(!n||o&&w)&&(p.delete(y),A=!0),!g&&A&&(s.push(h),g=!0)}return s.length>0&&this.spawn(s).updateStyle().emit("class"),i},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,n){var i=this;if(n==null)n=250;else if(n===0)return i;return i.addClass(e),setTimeout(function(){i.removeClass(e)},n),i}};_i.className=_i.classNames=_i.classes;var Ze={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:mt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ze.variable="(?:[\\w-]|(?:\\\\"+Ze.metaChar+"))+";Ze.value=Ze.string+"|"+Ze.number;Ze.className=Ze.variable;Ze.id=Ze.variable;(function(){var r,e,n;for(r=Ze.comparatorOp.split("|"),n=0;n<r.length;n++)e=r[n],Ze.comparatorOp+="|@"+e;for(r=Ze.comparatorOp.split("|"),n=0;n<r.length;n++)e=r[n],!(e.indexOf("!")>=0)&&e!=="="&&(Ze.comparatorOp+="|\\!"+e)})();var nt=function(){return{checks:[]}},Oe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ts=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return cv(r.selector,e.selector)}),sp=function(){for(var r={},e,n=0;n<ts.length;n++)e=ts[n],r[e.selector]=e.matches;return r}(),lp=function(e,n){return sp[e](n)},up="("+ts.map(function(r){return r.selector}).join("|")+")",Dn=function(e){return e.replace(new RegExp("\\\\("+Ze.metaChar+")","g"),function(n,i){return i})},Nr=function(e,n,i){e[e.length-1]=i},rs=[{name:"group",query:!0,regex:"("+Ze.group+")",populate:function(e,n,i){var o=mr(i,1),s=o[0];n.checks.push({type:Oe.GROUP,value:s==="*"?s:s+"s"})}},{name:"state",query:!0,regex:up,populate:function(e,n,i){var o=mr(i,1),s=o[0];n.checks.push({type:Oe.STATE,value:s})}},{name:"id",query:!0,regex:"\\#("+Ze.id+")",populate:function(e,n,i){var o=mr(i,1),s=o[0];n.checks.push({type:Oe.ID,value:Dn(s)})}},{name:"className",query:!0,regex:"\\.("+Ze.className+")",populate:function(e,n,i){var o=mr(i,1),s=o[0];n.checks.push({type:Oe.CLASS,value:Dn(s)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ze.variable+")\\s*\\]",populate:function(e,n,i){var o=mr(i,1),s=o[0];n.checks.push({type:Oe.DATA_EXIST,field:Dn(s)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ze.variable+")\\s*("+Ze.comparatorOp+")\\s*("+Ze.value+")\\s*\\]",populate:function(e,n,i){var o=mr(i,3),s=o[0],l=o[1],f=o[2],h=new RegExp("^"+Ze.string+"$").exec(f)!=null;h?f=f.substring(1,f.length-1):f=parseFloat(f),n.checks.push({type:Oe.DATA_COMPARE,field:Dn(s),operator:l,value:f})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ze.boolOp+")\\s*("+Ze.variable+")\\s*\\]",populate:function(e,n,i){var o=mr(i,2),s=o[0],l=o[1];n.checks.push({type:Oe.DATA_BOOL,field:Dn(l),operator:s})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ze.meta+")\\s*("+Ze.comparatorOp+")\\s*("+Ze.number+")\\s*\\]\\]",populate:function(e,n,i){var o=mr(i,3),s=o[0],l=o[1],f=o[2];n.checks.push({type:Oe.META_COMPARE,field:Dn(s),operator:l,value:parseFloat(f)})}},{name:"nextQuery",separator:!0,regex:Ze.separator,populate:function(e,n){var i=e.currentSubject,o=e.edgeCount,s=e.compoundCount,l=e[e.length-1];i!=null&&(l.subject=i,e.currentSubject=null),l.edgeCount=o,l.compoundCount=s,e.edgeCount=0,e.compoundCount=0;var f=e[e.length++]=nt();return f}},{name:"directedEdge",separator:!0,regex:Ze.directedEdge,populate:function(e,n){if(e.currentSubject==null){var i=nt(),o=n,s=nt();return i.checks.push({type:Oe.DIRECTED_EDGE,source:o,target:s}),Nr(e,n,i),e.edgeCount++,s}else{var l=nt(),f=n,h=nt();return l.checks.push({type:Oe.NODE_SOURCE,source:f,target:h}),Nr(e,n,l),e.edgeCount++,h}}},{name:"undirectedEdge",separator:!0,regex:Ze.undirectedEdge,populate:function(e,n){if(e.currentSubject==null){var i=nt(),o=n,s=nt();return i.checks.push({type:Oe.UNDIRECTED_EDGE,nodes:[o,s]}),Nr(e,n,i),e.edgeCount++,s}else{var l=nt(),f=n,h=nt();return l.checks.push({type:Oe.NODE_NEIGHBOR,node:f,neighbor:h}),Nr(e,n,l),h}}},{name:"child",separator:!0,regex:Ze.child,populate:function(e,n){if(e.currentSubject==null){var i=nt(),o=nt(),s=e[e.length-1];return i.checks.push({type:Oe.CHILD,parent:s,child:o}),Nr(e,n,i),e.compoundCount++,o}else if(e.currentSubject===n){var l=nt(),f=e[e.length-1],h=nt(),p=nt(),g=nt(),m=nt();return l.checks.push({type:Oe.COMPOUND_SPLIT,left:f,right:h,subject:p}),p.checks=n.checks,n.checks=[{type:Oe.TRUE}],m.checks.push({type:Oe.TRUE}),h.checks.push({type:Oe.PARENT,parent:m,child:g}),Nr(e,f,l),e.currentSubject=p,e.compoundCount++,g}else{var y=nt(),w=nt(),A=[{type:Oe.PARENT,parent:y,child:w}];return y.checks=n.checks,n.checks=A,e.compoundCount++,w}}},{name:"descendant",separator:!0,regex:Ze.descendant,populate:function(e,n){if(e.currentSubject==null){var i=nt(),o=nt(),s=e[e.length-1];return i.checks.push({type:Oe.DESCENDANT,ancestor:s,descendant:o}),Nr(e,n,i),e.compoundCount++,o}else if(e.currentSubject===n){var l=nt(),f=e[e.length-1],h=nt(),p=nt(),g=nt(),m=nt();return l.checks.push({type:Oe.COMPOUND_SPLIT,left:f,right:h,subject:p}),p.checks=n.checks,n.checks=[{type:Oe.TRUE}],m.checks.push({type:Oe.TRUE}),h.checks.push({type:Oe.ANCESTOR,ancestor:m,descendant:g}),Nr(e,f,l),e.currentSubject=p,e.compoundCount++,g}else{var y=nt(),w=nt(),A=[{type:Oe.ANCESTOR,ancestor:y,descendant:w}];return y.checks=n.checks,n.checks=A,e.compoundCount++,w}}},{name:"subject",modifier:!0,regex:Ze.subject,populate:function(e,n){if(e.currentSubject!=null&&e.currentSubject!==n)return rt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=n;var i=e[e.length-1],o=i.checks[0],s=o==null?null:o.type;s===Oe.DIRECTED_EDGE?o.type=Oe.NODE_TARGET:s===Oe.UNDIRECTED_EDGE&&(o.type=Oe.NODE_NEIGHBOR,o.node=o.nodes[1],o.neighbor=o.nodes[0],o.nodes=null)}}];rs.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var cp=function(e){for(var n,i,o,s=0;s<rs.length;s++){var l=rs[s],f=l.name,h=e.match(l.regexObj);if(h!=null){i=h,n=l,o=f;var p=h[0];e=e.substring(p.length);break}}return{expr:n,match:i,name:o,remaining:e}},fp=function(e){var n=e.match(/^\s+/);if(n){var i=n[0];e=e.substring(i.length)}return e},hp=function(e){var n=this,i=n.inputText=e,o=n[0]=nt();for(n.length=1,i=fp(i);;){var s=cp(i);if(s.expr==null)return rt("The selector `"+e+"`is invalid"),!1;var l=s.match.slice(1),f=s.expr.populate(n,o,l);if(f===!1)return!1;if(f!=null&&(o=f),i=s.remaining,i.match(/^\s*$/))break}var h=n[n.length-1];n.currentSubject!=null&&(h.subject=n.currentSubject),h.edgeCount=n.edgeCount,h.compoundCount=n.compoundCount;for(var p=0;p<n.length;p++){var g=n[p];if(g.compoundCount>0&&g.edgeCount>0)return rt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(g.edgeCount>1)return rt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;g.edgeCount===1&&rt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},vp=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(g){return g??""},n=function(g){return Fe(g)?'"'+g+'"':e(g)},i=function(g){return" "+g+" "},o=function(g,m){var y=g.type,w=g.value;switch(y){case Oe.GROUP:{var A=e(w);return A.substring(0,A.length-1)}case Oe.DATA_COMPARE:{var k=g.field,B=g.operator;return"["+k+i(e(B))+n(w)+"]"}case Oe.DATA_BOOL:{var R=g.operator,z=g.field;return"["+e(R)+z+"]"}case Oe.DATA_EXIST:{var $=g.field;return"["+$+"]"}case Oe.META_COMPARE:{var H=g.operator,X=g.field;return"[["+X+i(e(H))+n(w)+"]]"}case Oe.STATE:return w;case Oe.ID:return"#"+w;case Oe.CLASS:return"."+w;case Oe.PARENT:case Oe.CHILD:return s(g.parent,m)+i(">")+s(g.child,m);case Oe.ANCESTOR:case Oe.DESCENDANT:return s(g.ancestor,m)+" "+s(g.descendant,m);case Oe.COMPOUND_SPLIT:{var ee=s(g.left,m),_=s(g.subject,m),te=s(g.right,m);return ee+(ee.length>0?" ":"")+_+te}case Oe.TRUE:return""}},s=function(g,m){return g.checks.reduce(function(y,w,A){return y+(m===g&&A===0?"$":"")+o(w,m)},"")},l="",f=0;f<this.length;f++){var h=this[f];l+=s(h,h.subject),this.length>1&&f<this.length-1&&(l+=", ")}return this.toStringCache=l,l},dp={parse:hp,toString:vp},pu=function(e,n,i){var o,s=Fe(e),l=Ae(e),f=Fe(i),h,p,g=!1,m=!1,y=!1;switch(n.indexOf("!")>=0&&(n=n.replace("!",""),m=!0),n.indexOf("@")>=0&&(n=n.replace("@",""),g=!0),(s||f||g)&&(h=!s&&!l?"":""+e,p=""+i),g&&(e=h=h.toLowerCase(),i=p=p.toLowerCase()),n){case"*=":o=h.indexOf(p)>=0;break;case"$=":o=h.indexOf(p,h.length-p.length)>=0;break;case"^=":o=h.indexOf(p)===0;break;case"=":o=e===i;break;case">":y=!0,o=e>i;break;case">=":y=!0,o=e>=i;break;case"<":y=!0,o=e<i;break;case"<=":y=!0,o=e<=i;break;default:o=!1;break}return m&&(e!=null||!y)&&(o=!o),o},pp=function(e,n){switch(n){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},gp=function(e){return e!==void 0},ns=function(e,n){return e.data(n)},mp=function(e,n){return e[n]()},dt=[],ct=function(e,n){return e.checks.every(function(i){return dt[i.type](i,n)})};dt[Oe.GROUP]=function(r,e){var n=r.value;return n==="*"||n===e.group()};dt[Oe.STATE]=function(r,e){var n=r.value;return lp(n,e)};dt[Oe.ID]=function(r,e){var n=r.value;return e.id()===n};dt[Oe.CLASS]=function(r,e){var n=r.value;return e.hasClass(n)};dt[Oe.META_COMPARE]=function(r,e){var n=r.field,i=r.operator,o=r.value;return pu(mp(e,n),i,o)};dt[Oe.DATA_COMPARE]=function(r,e){var n=r.field,i=r.operator,o=r.value;return pu(ns(e,n),i,o)};dt[Oe.DATA_BOOL]=function(r,e){var n=r.field,i=r.operator;return pp(ns(e,n),i)};dt[Oe.DATA_EXIST]=function(r,e){var n=r.field,i=r.operator;return gp(ns(e,n))};dt[Oe.UNDIRECTED_EDGE]=function(r,e){var n=r.nodes[0],i=r.nodes[1],o=e.source(),s=e.target();return ct(n,o)&&ct(i,s)||ct(i,o)&&ct(n,s)};dt[Oe.NODE_NEIGHBOR]=function(r,e){return ct(r.node,e)&&e.neighborhood().some(function(n){return n.isNode()&&ct(r.neighbor,n)})};dt[Oe.DIRECTED_EDGE]=function(r,e){return ct(r.source,e.source())&&ct(r.target,e.target())};dt[Oe.NODE_SOURCE]=function(r,e){return ct(r.source,e)&&e.outgoers().some(function(n){return n.isNode()&&ct(r.target,n)})};dt[Oe.NODE_TARGET]=function(r,e){return ct(r.target,e)&&e.incomers().some(function(n){return n.isNode()&&ct(r.source,n)})};dt[Oe.CHILD]=function(r,e){return ct(r.child,e)&&ct(r.parent,e.parent())};dt[Oe.PARENT]=function(r,e){return ct(r.parent,e)&&e.children().some(function(n){return ct(r.child,n)})};dt[Oe.DESCENDANT]=function(r,e){return ct(r.descendant,e)&&e.ancestors().some(function(n){return ct(r.ancestor,n)})};dt[Oe.ANCESTOR]=function(r,e){return ct(r.ancestor,e)&&e.descendants().some(function(n){return ct(r.descendant,n)})};dt[Oe.COMPOUND_SPLIT]=function(r,e){return ct(r.subject,e)&&ct(r.left,e)&&ct(r.right,e)};dt[Oe.TRUE]=function(){return!0};dt[Oe.COLLECTION]=function(r,e){var n=r.value;return n.has(e)};dt[Oe.FILTER]=function(r,e){var n=r.value;return n(e)};var yp=function(e){var n=this;if(n.length===1&&n[0].checks.length===1&&n[0].checks[0].type===Oe.ID)return e.getElementById(n[0].checks[0].value).collection();var i=function(s){for(var l=0;l<n.length;l++){var f=n[l];if(ct(f,s))return!0}return!1};return n.text()==null&&(i=function(){return!0}),e.filter(i)},bp=function(e){for(var n=this,i=0;i<n.length;i++){var o=n[i];if(ct(o,e))return!0}return!1},wp={matches:bp,filter:yp},Fr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Fe(e)&&e.match(/^\s*$/)||(Wt(e)?this.addQuery({checks:[{type:Oe.COLLECTION,value:e.collection()}]}):vt(e)?this.addQuery({checks:[{type:Oe.FILTER,value:e}]}):Fe(e)?this.parse(e)||(this.invalid=!0):pt("A selector must be created from a string; found "))},$r=Fr.prototype;[dp,wp].forEach(function(r){return _e($r,r)});$r.text=function(){return this.inputText};$r.size=function(){return this.length};$r.eq=function(r){return this[r]};$r.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};$r.addQuery=function(r){this[this.length++]=r};$r.selector=$r.toString;var _r={allAre:function(e){var n=new Fr(e);return this.every(function(i){return n.matches(i)})},is:function(e){var n=new Fr(e);return this.some(function(i){return n.matches(i)})},some:function(e,n){for(var i=0;i<this.length;i++){var o=n?e.apply(n,[this[i],i,this]):e(this[i],i,this);if(o)return!0}return!1},every:function(e,n){for(var i=0;i<this.length;i++){var o=n?e.apply(n,[this[i],i,this]):e(this[i],i,this);if(!o)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var n=this.length,i=e.length;return n!==i?!1:n===1?this[0]===e[0]:this.every(function(o){return e.hasElementWithId(o.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(n){return e.hasElementWithId(n.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var n=this.neighborhood();return e.every(function(i){return n.hasElementWithId(i.id())})},contains:function(e){e=this.cy().collection(e);var n=this;return e.every(function(i){return n.hasElementWithId(i.id())})}};_r.allAreNeighbours=_r.allAreNeighbors;_r.has=_r.contains;_r.equal=_r.equals=_r.same;var Xt=function(e,n){return function(o,s,l,f){var h=o,p=this,g;if(h==null?g="":Wt(h)&&h.length===1&&(g=h.id()),p.length===1&&g){var m=p[0]._private,y=m.traversalCache=m.traversalCache||{},w=y[n]=y[n]||[],A=Qr(g),k=w[A];return k||(w[A]=e.call(p,o,s,l,f))}else return e.call(p,o,s,l,f)}},Pn={parent:function(e){var n=[];if(this.length===1){var i=this[0]._private.parent;if(i)return i}for(var o=0;o<this.length;o++){var s=this[o],l=s._private.parent;l&&n.push(l)}return this.spawn(n,!0).filter(e)},parents:function(e){for(var n=[],i=this.parent();i.nonempty();){for(var o=0;o<i.length;o++){var s=i[o];n.push(s)}i=i.parent()}return this.spawn(n,!0).filter(e)},commonAncestors:function(e){for(var n,i=0;i<this.length;i++){var o=this[i],s=o.parents();n=n||s,n=n.intersect(s)}return n.filter(e)},orphans:function(e){return this.stdFilter(function(n){return n.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(n){return n.isChild()}).filter(e)},children:Xt(function(r){for(var e=[],n=0;n<this.length;n++)for(var i=this[n],o=i._private.children,s=0;s<o.length;s++)e.push(o[s]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var n=[];function i(o){for(var s=0;s<o.length;s++){var l=o[s];n.push(l),l.children().nonempty()&&i(l.children())}}return i(this.children()),this.spawn(n,!0).filter(e)}};function as(r,e,n,i){for(var o=[],s=new bn,l=r.cy(),f=l.hasCompoundNodes(),h=0;h<r.length;h++){var p=r[h];n?o.push(p):f&&i(o,s,p)}for(;o.length>0;){var g=o.shift();e(g),s.add(g.id()),f&&i(o,s,g)}return r}function gu(r,e,n){if(n.isParent())for(var i=n._private.children,o=0;o<i.length;o++){var s=i[o];e.has(s.id())||r.push(s)}}Pn.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return as(this,r,e,gu)};function mu(r,e,n){if(n.isChild()){var i=n._private.parent;e.has(i.id())||r.push(i)}}Pn.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return as(this,r,e,mu)};function xp(r,e,n){mu(r,e,n),gu(r,e,n)}Pn.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return as(this,r,e,xp)};Pn.ancestors=Pn.parents;var _a,yu;_a=yu={data:et.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:et.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:et.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:et.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:et.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:et.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};_a.attr=_a.data;_a.removeAttr=_a.removeData;var Ep=yu,Vi={};function is(r){return function(e){var n=this;if(e===void 0&&(e=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var i=0,o=n[0],s=o._private.edges,l=0;l<s.length;l++){var f=s[l];!e&&f.isLoop()||(i+=r(o,f))}return i}else return}}_e(Vi,{degree:is(function(r,e){return e.source().same(e.target())?2:1}),indegree:is(function(r,e){return e.target().same(r)?1:0}),outdegree:is(function(r,e){return e.source().same(r)?1:0})});function An(r,e){return function(n){for(var i,o=this.nodes(),s=0;s<o.length;s++){var l=o[s],f=l[r](n);f!==void 0&&(i===void 0||e(f,i))&&(i=f)}return i}}_e(Vi,{minDegree:An("degree",function(r,e){return r<e}),maxDegree:An("degree",function(r,e){return r>e}),minIndegree:An("indegree",function(r,e){return r<e}),maxIndegree:An("indegree",function(r,e){return r>e}),minOutdegree:An("outdegree",function(r,e){return r<e}),maxOutdegree:An("outdegree",function(r,e){return r>e})});_e(Vi,{totalDegree:function(e){for(var n=0,i=this.nodes(),o=0;o<i.length;o++)n+=i[o].degree(e);return n}});var ar,bu,wu=function(e,n,i){for(var o=0;o<e.length;o++){var s=e[o];if(!s.locked()){var l=s._private.position,f={x:n.x!=null?n.x-l.x:0,y:n.y!=null?n.y-l.y:0};s.isParent()&&!(f.x===0&&f.y===0)&&s.children().shift(f,i),s.dirtyBoundingBoxCache()}}},xu={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,n){wu(e,n,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};ar=bu={position:et.data(xu),silentPosition:et.data(_e({},xu,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,n){wu(e,n,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,n){if(je(e))n?this.silentPosition(e):this.position(e);else if(vt(e)){var i=e,o=this.cy();o.startBatch();for(var s=0;s<this.length;s++){var l=this[s],f=void 0;(f=i(l,s))&&(n?l.silentPosition(f):l.position(f))}o.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,n,i){var o;if(je(e)?(o={x:Ae(e.x)?e.x:0,y:Ae(e.y)?e.y:0},i=n):Fe(e)&&Ae(n)&&(o={x:0,y:0},o[e]=n),o!=null){var s=this.cy();s.startBatch();for(var l=0;l<this.length;l++){var f=this[l],h=f.position(),p={x:h.x+o.x,y:h.y+o.y};i?f.silentPosition(p):f.position(p)}s.endBatch()}return this},silentShift:function(e,n){return je(e)?this.shift(e,!0):Fe(e)&&Ae(n)&&this.shift(e,n,!0),this},renderedPosition:function(e,n){var i=this[0],o=this.cy(),s=o.zoom(),l=o.pan(),f=je(e)?e:void 0,h=f!==void 0||n!==void 0&&Fe(e);if(i&&i.isNode())if(h)for(var p=0;p<this.length;p++){var g=this[p];n!==void 0?g.position(e,(n-l[e])/s):f!==void 0&&g.position(zl(f,s,l))}else{var m=i.position();return f=Bi(m,s,l),e===void 0?f:f[e]}else if(!h)return;return this},relativePosition:function(e,n){var i=this[0],o=this.cy(),s=je(e)?e:void 0,l=s!==void 0||n!==void 0&&Fe(e),f=o.hasCompoundNodes();if(i&&i.isNode())if(l)for(var h=0;h<this.length;h++){var p=this[h],g=f?p.parent():null,m=g&&g.length>0,y=m;m&&(g=g[0]);var w=y?g.position():{x:0,y:0};n!==void 0?p.position(e,n+w[e]):s!==void 0&&p.position({x:s.x+w.x,y:s.y+w.y})}else{var A=i.position(),k=f?i.parent():null,B=k&&k.length>0,R=B;B&&(k=k[0]);var z=R?k.position():{x:0,y:0};return s={x:A.x-z.x,y:A.y-z.y},e===void 0?s:s[e]}else if(!l)return;return this}};ar.modelPosition=ar.point=ar.position;ar.modelPositions=ar.points=ar.positions;ar.renderedPoint=ar.renderedPosition;ar.relativePoint=ar.relativePosition;var kp=bu,Ln,Vr;Ln=Vr={};Vr.renderedBoundingBox=function(r){var e=this.boundingBox(r),n=this.cy(),i=n.zoom(),o=n.pan(),s=e.x1*i+o.x,l=e.x2*i+o.x,f=e.y1*i+o.y,h=e.y2*i+o.y;return{x1:s,x2:l,y1:f,y2:h,w:l-s,h:h-f}};Vr.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var i=n._private;i.compoundBoundsClean=!1,i.bbCache=null,r||n.emitAndNotify("bounds")}}),this)};Vr.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function n(l){if(!l.isParent())return;var f=l._private,h=l.children(),p=l.pstyle("compound-sizing-wrt-labels").value==="include",g={width:{val:l.pstyle("min-width").pfValue,left:l.pstyle("min-width-bias-left"),right:l.pstyle("min-width-bias-right")},height:{val:l.pstyle("min-height").pfValue,top:l.pstyle("min-height-bias-top"),bottom:l.pstyle("min-height-bias-bottom")}},m=h.boundingBox({includeLabels:p,includeOverlays:!1,useCache:!1}),y=f.position;(m.w===0||m.h===0)&&(m={w:l.pstyle("width").pfValue,h:l.pstyle("height").pfValue},m.x1=y.x-m.w/2,m.x2=y.x+m.w/2,m.y1=y.y-m.h/2,m.y2=y.y+m.h/2);function w(q,ae,ne){var re=0,oe=0,ie=ae+ne;return q>0&&ie>0&&(re=ae/ie*q,oe=ne/ie*q),{biasDiff:re,biasComplementDiff:oe}}function A(q,ae,ne,re){if(ne.units==="%")switch(re){case"width":return q>0?ne.pfValue*q:0;case"height":return ae>0?ne.pfValue*ae:0;case"average":return q>0&&ae>0?ne.pfValue*(q+ae)/2:0;case"min":return q>0&&ae>0?q>ae?ne.pfValue*ae:ne.pfValue*q:0;case"max":return q>0&&ae>0?q>ae?ne.pfValue*q:ne.pfValue*ae:0;default:return 0}else return ne.units==="px"?ne.pfValue:0}var k=g.width.left.value;g.width.left.units==="px"&&g.width.val>0&&(k=k*100/g.width.val);var B=g.width.right.value;g.width.right.units==="px"&&g.width.val>0&&(B=B*100/g.width.val);var R=g.height.top.value;g.height.top.units==="px"&&g.height.val>0&&(R=R*100/g.height.val);var z=g.height.bottom.value;g.height.bottom.units==="px"&&g.height.val>0&&(z=z*100/g.height.val);var $=w(g.width.val-m.w,k,B),H=$.biasDiff,X=$.biasComplementDiff,ee=w(g.height.val-m.h,R,z),_=ee.biasDiff,te=ee.biasComplementDiff;f.autoPadding=A(m.w,m.h,l.pstyle("padding"),l.pstyle("padding-relative-to").value),f.autoWidth=Math.max(m.w,g.width.val),y.x=(-H+m.x1+m.x2+X)/2,f.autoHeight=Math.max(m.h,g.height.val),y.y=(-_+m.y1+m.y2+te)/2}for(var i=0;i<this.length;i++){var o=this[i],s=o._private;(!s.compoundBoundsClean||r)&&(n(o),e.batching()||(s.compoundBoundsClean=!0))}return this};var jt=function(e){return e===1/0||e===-1/0?0:e},ir=function(e,n,i,o,s){o-n==0||s-i==0||n==null||i==null||o==null||s==null||(e.x1=n<e.x1?n:e.x1,e.x2=o>e.x2?o:e.x2,e.y1=i<e.y1?i:e.y1,e.y2=s>e.y2?s:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},nn=function(e,n){return n==null?e:ir(e,n.x1,n.y1,n.x2,n.y2)},Va=function(e,n,i){return nr(e,n,i)},Hi=function(e,n,i){if(!n.cy().headless()){var o=n._private,s=o.rstyle,l=s.arrowWidth/2,f=n.pstyle(i+"-arrow-shape").value,h,p;if(f!=="none"){i==="source"?(h=s.srcX,p=s.srcY):i==="target"?(h=s.tgtX,p=s.tgtY):(h=s.midX,p=s.midY);var g=o.arrowBounds=o.arrowBounds||{},m=g[i]=g[i]||{};m.x1=h-l,m.y1=p-l,m.x2=h+l,m.y2=p+l,m.w=m.x2-m.x1,m.h=m.y2-m.y1,Ri(m,1),ir(e,m.x1,m.y1,m.x2,m.y2)}}},os=function(e,n,i){if(!n.cy().headless()){var o;i?o=i+"-":o="";var s=n._private,l=s.rstyle,f=n.pstyle(o+"label").strValue;if(f){var h=n.pstyle("text-halign"),p=n.pstyle("text-valign"),g=Va(l,"labelWidth",i),m=Va(l,"labelHeight",i),y=Va(l,"labelX",i),w=Va(l,"labelY",i),A=n.pstyle(o+"text-margin-x").pfValue,k=n.pstyle(o+"text-margin-y").pfValue,B=n.isEdge(),R=n.pstyle(o+"text-rotation"),z=n.pstyle("text-outline-width").pfValue,$=n.pstyle("text-border-width").pfValue,H=$/2,X=n.pstyle("text-background-padding").pfValue,ee=2,_=m,te=g,q=te/2,ae=_/2,ne,re,oe,ie;if(B)ne=y-q,re=y+q,oe=w-ae,ie=w+ae;else{switch(h.value){case"left":ne=y-te,re=y;break;case"center":ne=y-q,re=y+q;break;case"right":ne=y,re=y+te;break}switch(p.value){case"top":oe=w-_,ie=w;break;case"center":oe=w-ae,ie=w+ae;break;case"bottom":oe=w,ie=w+_;break}}ne+=A-Math.max(z,H)-X-ee,re+=A+Math.max(z,H)+X+ee,oe+=k-Math.max(z,H)-X-ee,ie+=k+Math.max(z,H)+X+ee;var ve=i||"main",le=s.labelBounds,he=le[ve]=le[ve]||{};he.x1=ne,he.y1=oe,he.x2=re,he.y2=ie,he.w=re-ne,he.h=ie-oe;var se=B&&R.strValue==="autorotate",ce=R.pfValue!=null&&R.pfValue!==0;if(se||ce){var be=se?Va(s.rstyle,"labelAngle",i):R.pfValue,de=Math.cos(be),xe=Math.sin(be),Ce=(ne+re)/2,Te=(oe+ie)/2;if(!B){switch(h.value){case"left":Ce=re;break;case"right":Ce=ne;break}switch(p.value){case"top":Te=ie;break;case"bottom":Te=oe;break}}var Se=function(Ke,Me){return Ke=Ke-Ce,Me=Me-Te,{x:Ke*de-Me*xe+Ce,y:Ke*xe+Me*de+Te}},me=Se(ne,oe),ue=Se(ne,ie),Ee=Se(re,oe),Pe=Se(re,ie);ne=Math.min(me.x,ue.x,Ee.x,Pe.x),re=Math.max(me.x,ue.x,Ee.x,Pe.x),oe=Math.min(me.y,ue.y,Ee.y,Pe.y),ie=Math.max(me.y,ue.y,Ee.y,Pe.y)}var De=ve+"Rot",Re=le[De]=le[De]||{};Re.x1=ne,Re.y1=oe,Re.x2=re,Re.y2=ie,Re.w=re-ne,Re.h=ie-oe,ir(e,ne,oe,re,ie),ir(s.labelBounds.all,ne,oe,re,ie)}return e}},Cp=function(e,n){var i=e._private.cy,o=i.styleEnabled(),s=i.headless(),l=Vt(),f=e._private,h=e.isNode(),p=e.isEdge(),g,m,y,w,A,k,B=f.rstyle,R=h&&o?e.pstyle("bounds-expansion").pfValue:[0],z=function(Ke){return Ke.pstyle("display").value!=="none"},$=!o||z(e)&&(!p||z(e.source())&&z(e.target()));if($){var H=0,X=0;o&&n.includeOverlays&&(H=e.pstyle("overlay-opacity").value,H!==0&&(X=e.pstyle("overlay-padding").value));var ee=0,_=0;if(o&&(ee=e.pstyle("width").pfValue,_=ee/2),h&&n.includeNodes){var te=e.position();A=te.x,k=te.y;var q=e.outerWidth(),ae=q/2,ne=e.outerHeight(),re=ne/2;g=A-ae,m=A+ae,y=k-re,w=k+re,ir(l,g,y,m,w)}else if(p&&n.includeEdges)if(o&&!s){var oe=e.pstyle("curve-style").strValue;if(g=Math.min(B.srcX,B.midX,B.tgtX),m=Math.max(B.srcX,B.midX,B.tgtX),y=Math.min(B.srcY,B.midY,B.tgtY),w=Math.max(B.srcY,B.midY,B.tgtY),g-=_,m+=_,y-=_,w+=_,ir(l,g,y,m,w),oe==="haystack"){var ie=B.haystackPts;if(ie&&ie.length===2){if(g=ie[0].x,y=ie[0].y,m=ie[1].x,w=ie[1].y,g>m){var ve=g;g=m,m=ve}if(y>w){var le=y;y=w,w=le}ir(l,g-_,y-_,m+_,w+_)}}else if(oe==="bezier"||oe==="unbundled-bezier"||oe==="segments"||oe==="taxi"){var he;switch(oe){case"bezier":case"unbundled-bezier":he=B.bezierPts;break;case"segments":case"taxi":he=B.linePts;break}if(he!=null)for(var se=0;se<he.length;se++){var ce=he[se];g=ce.x-_,m=ce.x+_,y=ce.y-_,w=ce.y+_,ir(l,g,y,m,w)}}}else{var be=e.source(),de=be.position(),xe=e.target(),Ce=xe.position();if(g=de.x,m=Ce.x,y=de.y,w=Ce.y,g>m){var Te=g;g=m,m=Te}if(y>w){var Se=y;y=w,w=Se}g-=_,m+=_,y-=_,w+=_,ir(l,g,y,m,w)}if(o&&n.includeEdges&&p&&(Hi(l,e,"mid-source"),Hi(l,e,"mid-target"),Hi(l,e,"source"),Hi(l,e,"target")),o){var me=e.pstyle("ghost").value==="yes";if(me){var ue=e.pstyle("ghost-offset-x").pfValue,Ee=e.pstyle("ghost-offset-y").pfValue;ir(l,l.x1+ue,l.y1+Ee,l.x2+ue,l.y2+Ee)}}var Pe=f.bodyBounds=f.bodyBounds||{};Fl(Pe,l),Go(Pe,R),Ri(Pe,1),o&&(g=l.x1,m=l.x2,y=l.y1,w=l.y2,ir(l,g-X,y-X,m+X,w+X));var De=f.overlayBounds=f.overlayBounds||{};Fl(De,l),Go(De,R),Ri(De,1);var Re=f.labelBounds=f.labelBounds||{};Re.all!=null?Zv(Re.all):Re.all=Vt(),o&&n.includeLabels&&(n.includeMainLabels&&os(l,e,null),p&&(n.includeSourceLabels&&os(l,e,"source"),n.includeTargetLabels&&os(l,e,"target")))}return l.x1=jt(l.x1),l.y1=jt(l.y1),l.x2=jt(l.x2),l.y2=jt(l.y2),l.w=jt(l.x2-l.x1),l.h=jt(l.y2-l.y1),l.w>0&&l.h>0&&$&&(Go(l,R),Ri(l,1)),l},Eu=function(e){var n=0,i=function(l){return(l?1:0)<<n++},o=0;return o+=i(e.incudeNodes),o+=i(e.includeEdges),o+=i(e.includeLabels),o+=i(e.includeMainLabels),o+=i(e.includeSourceLabels),o+=i(e.includeTargetLabels),o+=i(e.includeOverlays),o},ku=function(e){if(e.isEdge()){var n=e.source().position(),i=e.target().position(),o=function(l){return Math.round(l)};return bv([o(n.x),o(n.y),o(i.x),o(i.y)])}else return 0},Cu=function(e,n){var i=e._private,o,s=e.isEdge(),l=n==null?Su:Eu(n),f=l===Su,h=ku(e),p=i.bbCachePosKey===h,g=n.useCache&&p,m=function(k){return k._private.bbCache==null||k._private.styleDirty},y=!g||m(e)||s&&m(e.source())||m(e.target());if(y?(p||e.recalculateRenderedStyle(g),o=Cp(e,Wa),i.bbCache=o,i.bbCachePosKey=h):o=i.bbCache,!f){var w=e.isNode();o=Vt(),(n.includeNodes&&w||n.includeEdges&&!w)&&(n.includeOverlays?nn(o,i.overlayBounds):nn(o,i.bodyBounds)),n.includeLabels&&(n.includeMainLabels&&(!s||n.includeSourceLabels&&n.includeTargetLabels)?nn(o,i.labelBounds.all):(n.includeMainLabels&&nn(o,i.labelBounds.mainRot),n.includeSourceLabels&&nn(o,i.labelBounds.sourceRot),n.includeTargetLabels&&nn(o,i.labelBounds.targetRot))),o.w=o.x2-o.x1,o.h=o.y2-o.y1}return o},Wa={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},Su=Eu(Wa),Tu=kt(Wa);Vr.boundingBox=function(r){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(r===void 0||r.useCache===void 0||r.useCache===!0))r===void 0?r=Wa:r=Tu(r),e=Cu(this[0],r);else{e=Vt(),r=r||Wa;var n=Tu(r),i=this,o=i.cy(),s=o.styleEnabled();if(s)for(var l=0;l<i.length;l++){var f=i[l],h=f._private,p=ku(f),g=h.bbCachePosKey===p,m=n.useCache&&g&&!h.styleDirty;f.recalculateRenderedStyle(m)}this.updateCompoundBounds(!r.useCache);for(var y=0;y<i.length;y++){var w=i[y];nn(e,Cu(w,n))}}return e.x1=jt(e.x1),e.y1=jt(e.y1),e.x2=jt(e.x2),e.y2=jt(e.y2),e.w=jt(e.x2-e.x1),e.h=jt(e.y2-e.y1),e};Vr.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Vr.boundingBoxAt=function(r){var e=this.nodes(),n=this.cy(),i=n.hasCompoundNodes(),o=n.collection();if(i&&(o=e.filter(function(p){return p.isParent()}),e=e.not(o)),je(r)){var s=r;r=function(){return s}}var l=function(g,m){return g._private.bbAtOldPos=r(g,m)},f=function(g){return g._private.bbAtOldPos};n.startBatch(),e.forEach(l).silentPositions(r),i&&(o.dirtyCompoundBoundsCache(),o.dirtyBoundingBoxCache(),o.updateCompoundBounds(!0));var h=jv(this.boundingBox({useCache:!1}));return e.silentPositions(f),i&&(o.dirtyCompoundBoundsCache(),o.dirtyBoundingBoxCache(),o.updateCompoundBounds(!0)),n.endBatch(),h};Ln.boundingbox=Ln.bb=Ln.boundingBox;Ln.renderedBoundingbox=Ln.renderedBoundingBox;var Sp=Vr,Ya,Ua;Ya=Ua={};var Du=function(e){e.uppercaseName=xl(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=xl(e.outerName),Ya[e.name]=function(){var i=this[0],o=i._private,s=o.cy,l=s._private.styleEnabled;if(i)if(l){if(i.isParent())return i.updateCompoundBounds(),o[e.autoName]||0;var f=i.pstyle(e.name);switch(f.strValue){case"label":return i.recalculateRenderedStyle(),o.rstyle[e.labelName]||0;default:return f.pfValue}}else return 1},Ya["outer"+e.uppercaseName]=function(){var i=this[0],o=i._private,s=o.cy,l=s._private.styleEnabled;if(i)if(l){var f=i[e.name](),h=i.pstyle("border-width").pfValue,p=2*i.padding();return f+h+p}else return 1},Ya["rendered"+e.uppercaseName]=function(){var i=this[0];if(i){var o=i[e.name]();return o*this.cy().zoom()}},Ya["rendered"+e.uppercaseOuterName]=function(){var i=this[0];if(i){var o=i[e.outerName]();return o*this.cy().zoom()}}};Du({name:"width"});Du({name:"height"});Ua.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Ua.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Ua.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var Tp=Ua,Dp=function(e,n){if(e.isEdge())return n(e)},Pp=function(e,n){if(e.isEdge()){var i=e.cy();return Bi(n(e),i.zoom(),i.pan())}},Ap=function(e,n){if(e.isEdge()){var i=e.cy(),o=i.pan(),s=i.zoom();return n(e).map(function(l){return Bi(l,s,o)})}},Lp=function(e){return e.renderer().getControlPoints(e)},Bp=function(e){return e.renderer().getSegmentPoints(e)},Mp=function(e){return e.renderer().getSourceEndpoint(e)},Rp=function(e){return e.renderer().getTargetEndpoint(e)},Op=function(e){return e.renderer().getEdgeMidpoint(e)},Pu={controlPoints:{get:Lp,mult:!0},segmentPoints:{get:Bp,mult:!0},sourceEndpoint:{get:Mp},targetEndpoint:{get:Rp},midpoint:{get:Op}},Ip=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},zp=Object.keys(Pu).reduce(function(r,e){var n=Pu[e],i=Ip(e);return r[e]=function(){return Dp(this,n.get)},n.mult?r[i]=function(){return Ap(this,n.get)}:r[i]=function(){return Pp(this,n.get)},r},{}),Np=_e({},kp,Sp,Tp,zp);var Au=function(e,n){this.recycle(e,n)};function Xa(){return!1}function qi(){return!0}Au.prototype={instanceString:function(){return"event"},recycle:function(e,n){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Xa,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?qi:Xa):e!=null&&e.type?n=e:this.type=e,n!=null&&(this.originalEvent=n.originalEvent,this.type=n.type!=null?n.type:this.type,this.cy=n.cy,this.target=n.target,this.position=n.position,this.renderedPosition=n.renderedPosition,this.namespace=n.namespace,this.layout=n.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var i=this.position,o=this.cy.zoom(),s=this.cy.pan();this.renderedPosition={x:i.x*o+s.x,y:i.y*o+s.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=qi;var e=this.originalEvent;!e||e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=qi;var e=this.originalEvent;!e||e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=qi,this.stopPropagation()},isDefaultPrevented:Xa,isPropagationStopped:Xa,isImmediatePropagationStopped:Xa};var Lu=/^([^.]+)(\.(?:[^.]+))?$/,Fp=".*",Bu={qualifierCompare:function(e,n){return e===n},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Mu=Object.keys(Bu),$p={};function Ki(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$p,e=arguments.length>1?arguments[1]:void 0,n=0;n<Mu.length;n++){var i=Mu[n];this[i]=r[i]||Bu[i]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Hr=Ki.prototype,Ru=function(e,n,i,o,s,l,f){vt(o)&&(s=o,o=null),f&&(l==null?l=f:l=_e({},l,f));for(var h=at(i)?i:i.split(/\s+/),p=0;p<h.length;p++){var g=h[p];if(!Mr(g)){var m=g.match(Lu);if(m){var y=m[1],w=m[2]?m[2]:null,A=n(e,g,y,w,o,s,l);if(A===!1)break}}}},Ou=function(e,n){return e.addEventFields(e.context,n),new Au(n.type,n)},_p=function(e,n,i){if(Jh(i)){n(e,i);return}else if(je(i)){n(e,Ou(e,i));return}for(var o=at(i)?i:i.split(/\s+/),s=0;s<o.length;s++){var l=o[s];if(!Mr(l)){var f=l.match(Lu);if(f){var h=f[1],p=f[2]?f[2]:null,g=Ou(e,{type:h,namespace:p,target:e.context});n(e,g)}}}};Hr.on=Hr.addListener=function(r,e,n,i,o){return Ru(this,function(s,l,f,h,p,g,m){vt(g)&&s.listeners.push({event:l,callback:g,type:f,namespace:h,qualifier:p,conf:m})},r,e,n,i,o),this};Hr.one=function(r,e,n,i){return this.on(r,e,n,i,{one:!0})};Hr.removeListener=Hr.off=function(r,e,n,i){var o=this;this.emitting!==0&&(this.listeners=Cv(this.listeners));for(var s=this.listeners,l=function(p){var g=s[p];Ru(o,function(m,y,w,A,k,B){if((g.type===w||r==="*")&&(!A&&g.namespace!==".*"||g.namespace===A)&&(!k||m.qualifierCompare(g.qualifier,k))&&(!B||g.callback===B))return s.splice(p,1),!1},r,e,n,i)},f=s.length-1;f>=0;f--)l(f);return this};Hr.removeAllListeners=function(){return this.removeListener("*")};Hr.emit=Hr.trigger=function(r,e,n){var i=this.listeners,o=i.length;return this.emitting++,at(e)||(e=[e]),_p(this,function(s,l){n!=null&&(i=[{event:l.event,type:l.type,namespace:l.namespace,callback:n}],o=i.length);for(var f=function(g){var m=i[g];if(m.type===l.type&&(!m.namespace||m.namespace===l.namespace||m.namespace===Fp)&&s.eventMatches(s.context,m,l)){var y=[l];e!=null&&Tv(y,e),s.beforeEmit(s.context,m,l),m.conf&&m.conf.one&&(s.listeners=s.listeners.filter(function(k){return k!==m}));var w=s.callbackContext(s.context,m,l),A=m.callback.apply(w,y);s.afterEmit(s.context,m,l),A===!1&&(l.stopPropagation(),l.preventDefault())}},h=0;h<o;h++)f(h);s.bubble(s.context)&&!l.isPropagationStopped()&&s.parent(s.context).emit(l,e)},r),this.emitting--,this};var Vp={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,i){var o=n.qualifier;return o!=null?e!==i.target&&Qn(i.target)&&o.matches(i.target):!0},addEventFields:function(e,n){n.cy=e.cy(),n.target=e},callbackContext:function(e,n,i){return n.qualifier!=null?i.target:e},beforeEmit:function(e,n){n.conf&&n.conf.once&&n.conf.onceCollection.removeListener(n.event,n.qualifier,n.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Gi=function(e){return Fe(e)?new Fr(e):e},Iu={createEmitter:function(){for(var e=0;e<this.length;e++){var n=this[e],i=n._private;i.emitter||(i.emitter=new Ki(Vp,n))}return this},emitter:function(){return this._private.emitter},on:function(e,n,i){for(var o=Gi(n),s=0;s<this.length;s++){var l=this[s];l.emitter().on(e,o,i)}return this},removeListener:function(e,n,i){for(var o=Gi(n),s=0;s<this.length;s++){var l=this[s];l.emitter().removeListener(e,o,i)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var n=this[e];n.emitter().removeAllListeners()}return this},one:function(e,n,i){for(var o=Gi(n),s=0;s<this.length;s++){var l=this[s];l.emitter().one(e,o,i)}return this},once:function(e,n,i){for(var o=Gi(n),s=0;s<this.length;s++){var l=this[s];l.emitter().on(e,o,i,{once:!0,onceCollection:this})}},emit:function(e,n){for(var i=0;i<this.length;i++){var o=this[i];o.emitter().emit(e,n)}return this},emitAndNotify:function(e,n){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,n),this}};et.eventAliasesOn(Iu);var zu={nodes:function(e){return this.filter(function(n){return n.isNode()}).filter(e)},edges:function(e){return this.filter(function(n){return n.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),n=this.spawn(),i=0;i<this.length;i++){var o=this[i];o.isNode()?e.push(o):n.push(o)}return{nodes:e,edges:n}},filter:function(e,n){if(e===void 0)return this;if(Fe(e)||Wt(e))return new Fr(e).filter(this);if(vt(e)){for(var i=this.spawn(),o=this,s=0;s<o.length;s++){var l=o[s],f=n?e.apply(n,[l,s,o]):e(l,s,o);f&&i.push(l)}return i}return this.spawn()},not:function(e){if(e){Fe(e)&&(e=this.filter(e));for(var n=this.spawn(),i=0;i<this.length;i++){var o=this[i],s=e.has(o);s||n.push(o)}return n}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Fe(e)){var n=e;return this.filter(n)}for(var i=this.spawn(),o=this,s=e,l=this.length<e.length,f=l?o:s,h=l?s:o,p=0;p<f.length;p++){var g=f[p];h.has(g)&&i.push(g)}return i},xor:function(e){var n=this._private.cy;Fe(e)&&(e=n.$(e));var i=this.spawn(),o=this,s=e,l=function(h,p){for(var g=0;g<h.length;g++){var m=h[g],y=m._private.data.id,w=p.hasElementWithId(y);w||i.push(m)}};return l(o,s),l(s,o),i},diff:function(e){var n=this._private.cy;Fe(e)&&(e=n.$(e));var i=this.spawn(),o=this.spawn(),s=this.spawn(),l=this,f=e,h=function(g,m,y){for(var w=0;w<g.length;w++){var A=g[w],k=A._private.data.id,B=m.hasElementWithId(k);B?s.merge(A):y.push(A)}};return h(l,f,i),h(f,l,o),{left:i,right:o,both:s}},add:function(e){var n=this._private.cy;if(!e)return this;if(Fe(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=this.spawnSelf(),s=0;s<e.length;s++){var l=e[s],f=!this.has(l);f&&o.push(l)}return o},merge:function(e){var n=this._private,i=n.cy;if(!e)return this;if(e&&Fe(e)){var o=e;e=i.mutableElements().filter(o)}for(var s=n.map,l=0;l<e.length;l++){var f=e[l],h=f._private.data.id,p=!s.has(h);if(p){var g=this.length++;this[g]=f,s.set(h,{ele:f,index:g})}}return this},unmergeAt:function(e){var n=this[e],i=n.id(),o=this._private,s=o.map;this[e]=void 0,s.delete(i);var l=e===this.length-1;if(this.length>1&&!l){var f=this.length-1,h=this[f],p=h._private.data.id;this[f]=void 0,this[e]=h,s.set(p,{ele:h,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var n=this._private,i=e._private.data.id,o=n.map,s=o.get(i);if(!s)return this;var l=s.index;return this.unmergeAt(l),this},unmerge:function(e){var n=this._private.cy;if(!e)return this;if(e&&Fe(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=0;o<e.length;o++)this.unmergeOne(e[o]);return this},unmergeBy:function(e){for(var n=this.length-1;n>=0;n--){var i=this[n];e(i)&&this.unmergeAt(n)}return this},map:function(e,n){for(var i=[],o=this,s=0;s<o.length;s++){var l=o[s],f=n?e.apply(n,[l,s,o]):e(l,s,o);i.push(f)}return i},reduce:function(e,n){for(var i=n,o=this,s=0;s<o.length;s++)i=e(i,o[s],s,o);return i},max:function(e,n){for(var i=-1/0,o,s=this,l=0;l<s.length;l++){var f=s[l],h=n?e.apply(n,[f,l,s]):e(f,l,s);h>i&&(i=h,o=f)}return{value:i,ele:o}},min:function(e,n){for(var i=1/0,o,s=this,l=0;l<s.length;l++){var f=s[l],h=n?e.apply(n,[f,l,s]):e(f,l,s);h<i&&(i=h,o=f)}return{value:i,ele:o}}},Qe=zu;Qe.u=Qe["|"]=Qe["+"]=Qe.union=Qe.or=Qe.add;Qe["\\"]=Qe["!"]=Qe["-"]=Qe.difference=Qe.relativeComplement=Qe.subtract=Qe.not;Qe.n=Qe["&"]=Qe["."]=Qe.and=Qe.intersection=Qe.intersect;Qe["^"]=Qe["(+)"]=Qe["(-)"]=Qe.symmetricDifference=Qe.symdiff=Qe.xor;Qe.fnFilter=Qe.filterFn=Qe.stdFilter=Qe.filter;Qe.complement=Qe.abscomp=Qe.absoluteComplement;var Hp={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Nu=function(e,n){var i=e.cy(),o=i.hasCompoundNodes();function s(g){var m=g.pstyle("z-compound-depth");return m.value==="auto"?o?g.zDepth():0:m.value==="bottom"?-1:m.value==="top"?_o:0}var l=s(e)-s(n);if(l!==0)return l;function f(g){var m=g.pstyle("z-index-compare");return m.value==="auto"&&g.isNode()?1:0}var h=f(e)-f(n);if(h!==0)return h;var p=e.pstyle("z-index").value-n.pstyle("z-index").value;return p!==0?p:e.poolIndex()-n.poolIndex()},Wi={forEach:function(e,n){if(vt(e))for(var i=this.length,o=0;o<i;o++){var s=this[o],l=n?e.apply(n,[s,o,this]):e(s,o,this);if(l===!1)break}return this},toArray:function(){for(var e=[],n=0;n<this.length;n++)e.push(this[n]);return e},slice:function(e,n){var i=[],o=this.length;n==null&&(n=o),e==null&&(e=0),e<0&&(e=o+e),n<0&&(n=o+n);for(var s=e;s>=0&&s<n&&s<o;s++)i.push(this[s]);return this.spawn(i)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!vt(e))return this;var n=this.toArray().sort(e);return this.spawn(n)},sortByZIndex:function(){return this.sort(Nu)},zDepth:function(){var e=this[0];if(!!e){var n=e._private,i=n.group;if(i==="nodes"){var o=n.data.parent?e.parents().size():0;return e.isParent()?o:_o-1}else{var s=n.source,l=n.target,f=s.zDepth(),h=l.zDepth();return Math.max(f,h,0)}}}};Wi.each=Wi.forEach;var qp=function(){var e="undefined",n=(typeof Symbol=="undefined"?"undefined":gt(Symbol))!=e&&gt(Symbol.iterator)!=e;n&&(Wi[Symbol.iterator]=function(){var i=this,o={value:void 0,done:!1},s=0,l=this.length;return pl({next:function(){return s<l?o.value=i[s++]:(o.value=void 0,o.done=!0),o}},Symbol.iterator,function(){return this})})};qp();var Kp=kt({nodeDimensionsIncludeLabels:!1}),Yi={layoutDimensions:function(e){e=Kp(e);var n;if(!this.takesUpSpace())n={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var i=this.boundingBox();n={w:i.w,h:i.h}}else n={w:this.outerWidth(),h:this.outerHeight()};return(n.w===0||n.h===0)&&(n.w=n.h=1),n},layoutPositions:function(e,n,i){var o=this.nodes().filter(function(X){return!X.isParent()}),s=this.cy(),l=n.eles,f=function(ee){return ee.id()},h=Jn(i,f);e.emit({type:"layoutstart",layout:e}),e.animations=[];var p=function(ee,_,te){var q={x:_.x1+_.w/2,y:_.y1+_.h/2},ae={x:(te.x-q.x)*ee,y:(te.y-q.y)*ee};return{x:q.x+ae.x,y:q.y+ae.y}},g=n.spacingFactor&&n.spacingFactor!==1,m=function(){if(!g)return null;for(var ee=Vt(),_=0;_<o.length;_++){var te=o[_],q=h(te,_);Jv(ee,q.x,q.y)}return ee},y=m(),w=Jn(function(X,ee){var _=h(X,ee);if(g){var te=Math.abs(n.spacingFactor);_=p(te,y,_)}return n.transform!=null&&(_=n.transform(X,_)),_},f);if(n.animate){for(var A=0;A<o.length;A++){var k=o[A],B=w(k,A),R=n.animateFilter==null||n.animateFilter(k,A);if(R){var z=k.animation({position:B,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(z)}else k.position(B)}if(n.fit){var $=s.animation({fit:{boundingBox:l.boundingBoxAt(w),padding:n.padding},duration:n.animationDuration,easing:n.animationEasing});e.animations.push($)}else if(n.zoom!==void 0&&n.pan!==void 0){var H=s.animation({zoom:n.zoom,pan:n.pan,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(H)}e.animations.forEach(function(X){return X.play()}),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),Tn.all(e.animations.map(function(X){return X.promise()})).then(function(){e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e})})}else o.positions(w),n.fit&&s.fit(n.eles,n.padding),n.zoom!=null&&s.zoom(n.zoom),n.pan&&s.pan(n.pan),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var n=this.cy();return n.makeLayout(_e({},e,{eles:this}))}};Yi.createLayout=Yi.makeLayout=Yi.layout;function Fu(r,e,n){var i=n._private,o=i.styleCache=i.styleCache||[],s;return(s=o[r])!=null||(s=o[r]=e(n)),s}function Ui(r,e){return r=Qr(r),function(i){return Fu(r,e,i)}}function Xi(r,e){r=Qr(r);var n=function(o){return e.call(o)};return function(){var o=this[0];if(o)return Fu(r,n,o)}}var Ct={recalculateRenderedStyle:function(e){var n=this.cy(),i=n.renderer(),o=n.styleEnabled();return i&&o&&i.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),n=function(s){return s._private.styleCache=null};if(e.hasCompoundNodes()){var i;i=this.spawnSelf().merge(this.descendants()).merge(this.parents()),i.merge(i.connectedEdges()),i.forEach(n)}else this.forEach(function(o){n(o),o.connectedEdges().forEach(n)});return this},updateStyle:function(e){var n=this._private.cy;if(!n.styleEnabled())return this;if(n.batching()){var i=n._private.batchStyleEles;return i.merge(this),this}var o=n.hasCompoundNodes(),s=this;e=!!(e||e===void 0),o&&(s=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var l=s;return e?l.emitAndNotify("style"):l.emit("style"),s.forEach(function(f){return f._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(!!e.styleEnabled())for(var n=0;n<this.length;n++){var i=this[n];i._private.styleDirty&&(i._private.styleDirty=!1,e.style().apply(i))}},parsedStyle:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this[0],o=i.cy();if(!!o.styleEnabled()&&i){this.cleanStyle();var s=i._private.style[e];return s??(n?o.style().getDefaultProperty(e):null)}},numericStyle:function(e){var n=this[0];if(!!n.cy().styleEnabled()&&n){var i=n.pstyle(e);return i.pfValue!==void 0?i.pfValue:i.value}},numericStyleUnits:function(e){var n=this[0];if(!!n.cy().styleEnabled()&&n)return n.pstyle(e).units},renderedStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var i=this[0];if(i)return n.style().getRenderedStyle(i,e)},style:function(e,n){var i=this.cy();if(!i.styleEnabled())return this;var o=!1,s=i.style();if(je(e)){var l=e;s.applyBypass(this,l,o),this.emitAndNotify("style")}else if(Fe(e))if(n===void 0){var f=this[0];return f?s.getStylePropertyValue(f,e):void 0}else s.applyBypass(this,e,n,o),this.emitAndNotify("style");else if(e===void 0){var h=this[0];return h?s.getRawStyle(h):void 0}return this},removeStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,o=n.style(),s=this;if(e===void 0)for(var l=0;l<s.length;l++){var f=s[l];o.removeAllBypasses(f,i)}else{e=e.split(/\s+/);for(var h=0;h<s.length;h++){var p=s[h];o.removeBypasses(p,e,i)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var n=e.hasCompoundNodes(),i=this[0];if(i){var o=i._private,s=i.pstyle("opacity").value;if(!n)return s;var l=o.data.parent?i.parents():null;if(l)for(var f=0;f<l.length;f++){var h=l[f],p=h.pstyle("opacity").value;s=p*s}return s}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0],i=n.cy().hasCompoundNodes();if(n)return i?n.effectiveOpacity()===0:n.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0];return!!n._private.backgrounding}};function ss(r,e){var n=r._private,i=n.data.parent?r.parents():null;if(i)for(var o=0;o<i.length;o++){var s=i[o];if(!e(s))return!1}return!0}function ls(r){var e=r.ok,n=r.edgeOkViaNode||r.ok,i=r.parentOk||r.ok;return function(){var o=this.cy();if(!o.styleEnabled())return!0;var s=this[0],l=o.hasCompoundNodes();if(s){var f=s._private;if(!e(s))return!1;if(s.isNode())return!l||ss(s,i);var h=f.source,p=f.target;return n(h)&&(!l||ss(h,n))&&(h===p||n(p)&&(!l||ss(p,n)))}}}var Bn=Ui("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Ct.takesUpSpace=Xi("takesUpSpace",ls({ok:Bn}));var Gp=Ui("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&Bn(r)}),Wp=Ui("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&Bn(r)});Ct.interactive=Xi("interactive",ls({ok:Gp,parentOk:Wp,edgeOkViaNode:Bn}));Ct.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var Yp=Ui("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&Bn(r)}),Up=Bn;Ct.visible=Xi("visible",ls({ok:Yp,edgeOkViaNode:Up}));Ct.hidden=function(){var r=this[0];if(r)return!r.visible()};Ct.isBundledBezier=Xi("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Ct.bypass=Ct.css=Ct.style;Ct.renderedCss=Ct.renderedStyle;Ct.removeBypass=Ct.removeCss=Ct.removeStyle;Ct.pstyle=Ct.parsedStyle;var qr={};function $u(r){return function(){var e=arguments,n=[];if(e.length===2){var i=e[0],o=e[1];this.on(r.event,i,o)}else if(e.length===1&&vt(e[0])){var s=e[0];this.on(r.event,s)}else if(e.length===0||e.length===1&&at(e[0])){for(var l=e.length===1?e[0]:null,f=0;f<this.length;f++){var h=this[f],p=!r.ableField||h._private[r.ableField],g=h._private[r.field]!=r.value;if(r.overrideAble){var m=r.overrideAble(h);if(m!==void 0&&(p=m,!m))return this}p&&(h._private[r.field]=r.value,g&&n.push(h))}var y=this.spawn(n);y.updateStyle(),y.emit(r.event),l&&y.emit(l)}return this}}function Mn(r){qr[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var n=r.overrideField(e);if(n!==void 0)return n}return e._private[r.field]}},qr[r.on]=$u({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),qr[r.off]=$u({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}Mn({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Mn({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Mn({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Mn({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});qr.deselect=qr.unselect;qr.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};Mn({field:"active",on:"activate",off:"unactivate"});Mn({field:"pannable",on:"panify",off:"unpanify"});qr.inactive=function(){var r=this[0];if(r)return!r._private.active};var Lt={},_u=function(e){return function(i){for(var o=this,s=[],l=0;l<o.length;l++){var f=o[l];if(!!f.isNode()){for(var h=!1,p=f.connectedEdges(),g=0;g<p.length;g++){var m=p[g],y=m.source(),w=m.target();if(e.noIncomingEdges&&w===f&&y!==f||e.noOutgoingEdges&&y===f&&w!==f){h=!0;break}}h||s.push(f)}}return this.spawn(s,!0).filter(i)}},Vu=function(e){return function(n){for(var i=this,o=[],s=0;s<i.length;s++){var l=i[s];if(!!l.isNode())for(var f=l.connectedEdges(),h=0;h<f.length;h++){var p=f[h],g=p.source(),m=p.target();e.outgoing&&g===l?(o.push(p),o.push(m)):e.incoming&&m===l&&(o.push(p),o.push(g))}}return this.spawn(o,!0).filter(n)}},Hu=function(e){return function(n){for(var i=this,o=[],s={};;){var l=e.outgoing?i.outgoers():i.incomers();if(l.length===0)break;for(var f=!1,h=0;h<l.length;h++){var p=l[h],g=p.id();s[g]||(s[g]=!0,o.push(p),f=!0)}if(!f)break;i=l}return this.spawn(o,!0).filter(n)}};Lt.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};_e(Lt,{roots:_u({noIncomingEdges:!0}),leaves:_u({noOutgoingEdges:!0}),outgoers:Xt(Vu({outgoing:!0}),"outgoers"),successors:Hu({outgoing:!0}),incomers:Xt(Vu({incoming:!0}),"incomers"),predecessors:Hu({incoming:!0})});_e(Lt,{neighborhood:Xt(function(r){for(var e=[],n=this.nodes(),i=0;i<n.length;i++)for(var o=n[i],s=o.connectedEdges(),l=0;l<s.length;l++){var f=s[l],h=f.source(),p=f.target(),g=o===h?p:h;g.length>0&&e.push(g[0]),e.push(f[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Lt.neighbourhood=Lt.neighborhood;Lt.closedNeighbourhood=Lt.closedNeighborhood;Lt.openNeighbourhood=Lt.openNeighborhood;_e(Lt,{source:Xt(function(e){var n=this[0],i;return n&&(i=n._private.source||n.cy().collection()),i&&e?i.filter(e):i},"source"),target:Xt(function(e){var n=this[0],i;return n&&(i=n._private.target||n.cy().collection()),i&&e?i.filter(e):i},"target"),sources:qu({attr:"source"}),targets:qu({attr:"target"})});function qu(r){return function(n){for(var i=[],o=0;o<this.length;o++){var s=this[o],l=s._private[r.attr];l&&i.push(l)}return this.spawn(i,!0).filter(n)}}_e(Lt,{edgesWith:Xt(Ku(),"edgesWith"),edgesTo:Xt(Ku({thisIsSrc:!0}),"edgesTo")});function Ku(r){return function(n){var i=[],o=this._private.cy,s=r||{};Fe(n)&&(n=o.$(n));for(var l=0;l<n.length;l++)for(var f=n[l]._private.edges,h=0;h<f.length;h++){var p=f[h],g=p._private.data,m=this.hasElementWithId(g.source)&&n.hasElementWithId(g.target),y=n.hasElementWithId(g.source)&&this.hasElementWithId(g.target),w=m||y;!w||(s.thisIsSrc||s.thisIsTgt)&&(s.thisIsSrc&&!m||s.thisIsTgt&&!y)||i.push(p)}return this.spawn(i,!0)}}_e(Lt,{connectedEdges:Xt(function(r){for(var e=[],n=this,i=0;i<n.length;i++){var o=n[i];if(!!o.isNode())for(var s=o._private.edges,l=0;l<s.length;l++){var f=s[l];e.push(f)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:Xt(function(r){for(var e=[],n=this,i=0;i<n.length;i++){var o=n[i];!o.isEdge()||(e.push(o.source()[0]),e.push(o.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:Xt(Gu(),"parallelEdges"),codirectedEdges:Xt(Gu({codirected:!0}),"codirectedEdges")});function Gu(r){var e={codirected:!1};return r=_e({},e,r),function(i){for(var o=[],s=this.edges(),l=r,f=0;f<s.length;f++)for(var h=s[f],p=h._private,g=p.source,m=g._private.data.id,y=p.data.target,w=g._private.edges,A=0;A<w.length;A++){var k=w[A],B=k._private.data,R=B.target,z=B.source,$=R===y&&z===m,H=m===R&&y===z;(l.codirected&&$||!l.codirected&&($||H))&&o.push(k)}return this.spawn(o,!0).filter(i)}}_e(Lt,{components:function(e){var n=this,i=n.cy(),o=i.collection(),s=e==null?n.nodes():e.nodes(),l=[];e!=null&&s.empty()&&(s=e.sources());var f=function(g,m){o.merge(g),s.unmerge(g),m.merge(g)};if(s.empty())return n.spawn();var h=function(){var g=i.collection();l.push(g);var m=s[0];f(m,g),n.bfs({directed:!1,roots:m,visit:function(w){return f(w,g)}}),g.forEach(function(y){y.connectedEdges().forEach(function(w){n.has(w)&&g.has(w.source())&&g.has(w.target())&&g.merge(w)})})};do h();while(s.length>0);return l},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Lt.componentsOf=Lt.components;var St=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e===void 0){pt("A collection must have a reference to the core");return}var o=new ur,s=!1;if(!n)n=[];else if(n.length>0&&je(n[0])&&!Qn(n[0])){s=!0;for(var l=[],f=new bn,h=0,p=n.length;h<p;h++){var g=n[h];g.data==null&&(g.data={});var m=g.data;if(m.id==null)m.id=Rl();else if(e.hasElementWithId(m.id)||f.has(m.id))continue;var y=new Li(e,g,!1);l.push(y),f.add(m.id)}n=l}this.length=0;for(var w=0,A=n.length;w<A;w++){var k=n[w][0];if(k!=null){var B=k._private.data.id;(!i||!o.has(B))&&(i&&o.set(B,{index:this.length,ele:k}),this[this.length]=k,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(R){this.lazyMap=R},rebuildMap:function(){for(var z=this.lazyMap=new ur,$=this.eles,H=0;H<$.length;H++){var X=$[H];z.set(X.id(),{index:H,ele:X})}}},i&&(this._private.map=o),s&&this.restore()},lt=Li.prototype=St.prototype=Object.create(Array.prototype);lt.instanceString=function(){return"collection"};lt.spawn=function(r,e){return new St(this.cy(),r,e)};lt.spawnSelf=function(){return this.spawn(this)};lt.cy=function(){return this._private.cy};lt.renderer=function(){return this._private.cy.renderer()};lt.element=function(){return this[0]};lt.collection=function(){return yl(this)?this:new St(this._private.cy,[this])};lt.unique=function(){return new St(this._private.cy,this,!0)};lt.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};lt.getElementById=function(r){r=""+r;var e=this._private.cy,n=this._private.map.get(r);return n?n.ele:new St(e)};lt.$id=lt.getElementById;lt.poolIndex=function(){var r=this._private.cy,e=r._private.elements,n=this[0]._private.data.id;return e._private.map.get(n).index};lt.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};lt.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};lt.json=function(r){var e=this.element(),n=this.cy();if(e==null&&r)return this;if(e!=null){var i=e._private;if(je(r)){if(n.startBatch(),r.data){e.data(r.data);var o=i.data;if(e.isEdge()){var s=!1,l={},f=r.data.source,h=r.data.target;f!=null&&f!=o.source&&(l.source=""+f,s=!0),h!=null&&h!=o.target&&(l.target=""+h,s=!0),s&&(e=e.move(l))}else{var p="parent"in r.data,g=r.data.parent;p&&(g!=null||o.parent!=null)&&g!=o.parent&&(g===void 0&&(g=null),g!=null&&(g=""+g),e=e.move({parent:g}))}}r.position&&e.position(r.position);var m=function(k,B,R){var z=r[k];z!=null&&z!==i[k]&&(z?e[B]():e[R]())};return m("removed","remove","restore"),m("selected","select","unselect"),m("selectable","selectify","unselectify"),m("locked","lock","unlock"),m("grabbable","grabify","ungrabify"),m("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),n.endBatch(),this}else if(r===void 0){var y={data:lr(i.data),position:lr(i.position),group:i.group,removed:i.removed,selected:i.selected,selectable:i.selectable,locked:i.locked,grabbable:i.grabbable,pannable:i.pannable,classes:null};y.classes="";var w=0;return i.classes.forEach(function(A){return y.classes+=w++==0?A:" "+A}),y}}};lt.jsons=function(){for(var r=[],e=0;e<this.length;e++){var n=this[e],i=n.json();r.push(i)}return r};lt.clone=function(){for(var r=this.cy(),e=[],n=0;n<this.length;n++){var i=this[n],o=i.json(),s=new Li(r,o,!1);e.push(s)}return new St(r,e)};lt.copy=lt.clone;lt.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,i=n.cy(),o=i._private,s=[],l=[],f,h=0,p=n.length;h<p;h++){var g=n[h];e&&!g.removed()||(g.isNode()?s.push(g):l.push(g))}f=s.concat(l);var m,y=function(){f.splice(m,1),m--};for(m=0;m<f.length;m++){var w=f[m],A=w._private,k=A.data;if(w.clearTraversalCache(),!(!e&&!A.removed)){if(k.id===void 0)k.id=Rl();else if(Ae(k.id))k.id=""+k.id;else if(Mr(k.id)||!Fe(k.id)){pt("Can not create element with invalid string ID `"+k.id+"`"),y();continue}else if(i.hasElementWithId(k.id)){pt("Can not create second element with ID `"+k.id+"`"),y();continue}}var B=k.id;if(w.isNode()){var R=A.position;R.x==null&&(R.x=0),R.y==null&&(R.y=0)}if(w.isEdge()){for(var z=w,$=["source","target"],H=$.length,X=!1,ee=0;ee<H;ee++){var _=$[ee],te=k[_];Ae(te)&&(te=k[_]=""+k[_]),te==null||te===""?(pt("Can not create edge `"+B+"` with unspecified "+_),X=!0):i.hasElementWithId(te)||(pt("Can not create edge `"+B+"` with nonexistant "+_+" `"+te+"`"),X=!0)}if(X){y();continue}var q=i.getElementById(k.source),ae=i.getElementById(k.target);q.same(ae)?q._private.edges.push(z):(q._private.edges.push(z),ae._private.edges.push(z)),z._private.source=q,z._private.target=ae}A.map=new ur,A.map.set(B,{ele:w,index:0}),A.removed=!1,e&&i.addToPool(w)}for(var ne=0;ne<s.length;ne++){var re=s[ne],oe=re._private.data;Ae(oe.parent)&&(oe.parent=""+oe.parent);var ie=oe.parent,ve=ie!=null;if(ve){var le=i.getElementById(ie);if(le.empty())oe.parent=void 0;else{for(var he=!1,se=le;!se.empty();){if(re.same(se)){he=!0,oe.parent=void 0;break}se=se.parent()}he||(le[0]._private.children.push(re),re._private.parent=le[0],o.hasCompoundNodes=!0)}}}if(f.length>0){for(var ce=f.length===n.length?n:new St(i,f),be=0;be<ce.length;be++){var de=ce[be];de.isNode()||(de.parallelEdges().clearTraversalCache(),de.source().clearTraversalCache(),de.target().clearTraversalCache())}var xe;o.hasCompoundNodes?xe=i.collection().merge(ce).merge(ce.connectedNodes()).merge(ce.parent()):xe=ce,xe.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?ce.emitAndNotify("add"):e&&ce.emit("add")}return n};lt.removed=function(){var r=this[0];return r&&r._private.removed};lt.inside=function(){var r=this[0];return r&&!r._private.removed};lt.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,i=[],o={},s=n._private.cy;function l(ie){for(var ve=ie._private.edges,le=0;le<ve.length;le++)h(ve[le])}function f(ie){for(var ve=ie._private.children,le=0;le<ve.length;le++)h(ve[le])}function h(ie){var ve=o[ie.id()];e&&ie.removed()||ve||(o[ie.id()]=!0,ie.isNode()?(i.push(ie),l(ie),f(ie)):i.unshift(ie))}for(var p=0,g=n.length;p<g;p++){var m=n[p];h(m)}function y(ie,ve){var le=ie._private.edges;Or(le,ve),ie.clearTraversalCache()}function w(ie){ie.clearTraversalCache()}var A=[];A.ids={};function k(ie,ve){ve=ve[0],ie=ie[0];var le=ie._private.children,he=ie.id();Or(le,ve),ve._private.parent=null,A.ids[he]||(A.ids[he]=!0,A.push(ie))}n.dirtyCompoundBoundsCache(),e&&s.removeFromPool(i);for(var B=0;B<i.length;B++){var R=i[B];if(R.isEdge()){var z=R.source()[0],$=R.target()[0];y(z,R),y($,R);for(var H=R.parallelEdges(),X=0;X<H.length;X++){var ee=H[X];w(ee),ee.isBundledBezier()&&ee.dirtyBoundingBoxCache()}}else{var _=R.parent();_.length!==0&&k(_,R)}e&&(R._private.removed=!0)}var te=s._private.elements;s._private.hasCompoundNodes=!1;for(var q=0;q<te.length;q++){var ae=te[q];if(ae.isParent()){s._private.hasCompoundNodes=!0;break}}var ne=new St(this.cy(),i);ne.size()>0&&(r?ne.emitAndNotify("remove"):e&&ne.emit("remove"));for(var re=0;re<A.length;re++){var oe=A[re];(!e||!oe.removed())&&oe.updateStyle()}return ne};lt.move=function(r){var e=this._private.cy,n=this,i=!1,o=!1,s=function(A){return A==null?A:""+A};if(r.source!==void 0||r.target!==void 0){var l=s(r.source),f=s(r.target),h=l!=null&&e.hasElementWithId(l),p=f!=null&&e.hasElementWithId(f);(h||p)&&(e.batch(function(){n.remove(i,o),n.emitAndNotify("moveout");for(var w=0;w<n.length;w++){var A=n[w],k=A._private.data;A.isEdge()&&(h&&(k.source=l),p&&(k.target=f))}n.restore(i,o)}),n.emitAndNotify("move"))}else if(r.parent!==void 0){var g=s(r.parent),m=g===null||e.hasElementWithId(g);if(m){var y=g===null?void 0:g;e.batch(function(){var w=n.remove(i,o);w.emitAndNotify("moveout");for(var A=0;A<n.length;A++){var k=n[A],B=k._private.data;k.isNode()&&(B.parent=y)}w.restore(i,o)}),n.emitAndNotify("move")}}return this};[su,op,_i,_r,Pn,Ep,Vi,Np,Iu,zu,Hp,Wi,Yi,Ct,qr,Lt].forEach(function(r){_e(lt,r)});var Xp={add:function(e){var n,i=this;if(Wt(e)){var o=e;if(o._private.cy===i)n=o.restore();else{for(var s=[],l=0;l<o.length;l++){var f=o[l];s.push(f.json())}n=new St(i,s)}}else if(at(e)){var h=e;n=new St(i,h)}else if(je(e)&&(at(e.nodes)||at(e.edges))){for(var p=e,g=[],m=["nodes","edges"],y=0,w=m.length;y<w;y++){var A=m[y],k=p[A];if(at(k))for(var B=0,R=k.length;B<R;B++){var z=_e({group:A},k[B]);g.push(z)}}n=new St(i,g)}else{var $=e;n=new Li(i,$).collection()}return n},remove:function(e){if(!Wt(e)){if(Fe(e)){var n=e;e=this.$(n)}}return e.remove()}};function jp(r,e,n,i){var o=4,s=.001,l=1e-7,f=10,h=11,p=1/(h-1),g=typeof Float32Array!="undefined";if(arguments.length!==4)return!1;for(var m=0;m<4;++m)if(typeof arguments[m]!="number"||isNaN(arguments[m])||!isFinite(arguments[m]))return!1;r=Math.min(r,1),n=Math.min(n,1),r=Math.max(r,0),n=Math.max(n,0);var y=g?new Float32Array(h):new Array(h);function w(ae,ne){return 1-3*ne+3*ae}function A(ae,ne){return 3*ne-6*ae}function k(ae){return 3*ae}function B(ae,ne,re){return((w(ne,re)*ae+A(ne,re))*ae+k(ne))*ae}function R(ae,ne,re){return 3*w(ne,re)*ae*ae+2*A(ne,re)*ae+k(ne)}function z(ae,ne){for(var re=0;re<o;++re){var oe=R(ne,r,n);if(oe===0)return ne;var ie=B(ne,r,n)-ae;ne-=ie/oe}return ne}function $(){for(var ae=0;ae<h;++ae)y[ae]=B(ae*p,r,n)}function H(ae,ne,re){var oe,ie,ve=0;do ie=ne+(re-ne)/2,oe=B(ie,r,n)-ae,oe>0?re=ie:ne=ie;while(Math.abs(oe)>l&&++ve<f);return ie}function X(ae){for(var ne=0,re=1,oe=h-1;re!==oe&&y[re]<=ae;++re)ne+=p;--re;var ie=(ae-y[re])/(y[re+1]-y[re]),ve=ne+ie*p,le=R(ve,r,n);return le>=s?z(ae,ve):le===0?ve:H(ae,ne,ne+p)}var ee=!1;function _(){ee=!0,(r!==e||n!==i)&&$()}var te=function(ne){return ee||_(),r===e&&n===i?ne:ne===0?0:ne===1?1:B(X(ne),e,i)};te.getControlPoints=function(){return[{x:r,y:e},{x:n,y:i}]};var q="generateBezier("+[r,e,n,i]+")";return te.toString=function(){return q},te}var Zp=function(){function r(i){return-i.tension*i.x-i.friction*i.v}function e(i,o,s){var l={x:i.x+s.dx*o,v:i.v+s.dv*o,tension:i.tension,friction:i.friction};return{dx:l.v,dv:r(l)}}function n(i,o){var s={dx:i.v,dv:r(i)},l=e(i,o*.5,s),f=e(i,o*.5,l),h=e(i,o,f),p=1/6*(s.dx+2*(l.dx+f.dx)+h.dx),g=1/6*(s.dv+2*(l.dv+f.dv)+h.dv);return i.x=i.x+p*o,i.v=i.v+g*o,i}return function i(o,s,l){var f={x:-1,v:0,tension:null,friction:null},h=[0],p=0,g=1/1e4,m=16/1e3,y,w,A;for(o=parseFloat(o)||500,s=parseFloat(s)||20,l=l||null,f.tension=o,f.friction=s,y=l!==null,y?(p=i(o,s),w=p/l*m):w=m;A=n(A||f,w),h.push(1+A.x),p+=16,Math.abs(A.x)>g&&Math.abs(A.v)>g;);return y?function(k){return h[k*(h.length-1)|0]}:p}}(),ut=function(e,n,i,o){var s=jp(e,n,i,o);return function(l,f,h){return l+(f-l)*s(h)}},ji={linear:function(e,n,i){return e+(n-e)*i},ease:ut(.25,.1,.25,1),"ease-in":ut(.42,0,1,1),"ease-out":ut(0,0,.58,1),"ease-in-out":ut(.42,0,.58,1),"ease-in-sine":ut(.47,0,.745,.715),"ease-out-sine":ut(.39,.575,.565,1),"ease-in-out-sine":ut(.445,.05,.55,.95),"ease-in-quad":ut(.55,.085,.68,.53),"ease-out-quad":ut(.25,.46,.45,.94),"ease-in-out-quad":ut(.455,.03,.515,.955),"ease-in-cubic":ut(.55,.055,.675,.19),"ease-out-cubic":ut(.215,.61,.355,1),"ease-in-out-cubic":ut(.645,.045,.355,1),"ease-in-quart":ut(.895,.03,.685,.22),"ease-out-quart":ut(.165,.84,.44,1),"ease-in-out-quart":ut(.77,0,.175,1),"ease-in-quint":ut(.755,.05,.855,.06),"ease-out-quint":ut(.23,1,.32,1),"ease-in-out-quint":ut(.86,0,.07,1),"ease-in-expo":ut(.95,.05,.795,.035),"ease-out-expo":ut(.19,1,.22,1),"ease-in-out-expo":ut(1,0,0,1),"ease-in-circ":ut(.6,.04,.98,.335),"ease-out-circ":ut(.075,.82,.165,1),"ease-in-out-circ":ut(.785,.135,.15,.86),spring:function(e,n,i){if(i===0)return ji.linear;var o=Zp(e,n,i);return function(s,l,f){return s+(l-s)*o(f)}},"cubic-bezier":ut};function Wu(r,e,n,i,o){if(i===1||e===n)return n;var s=o(e,n,i);return r==null||((r.roundValue||r.color)&&(s=Math.round(s)),r.min!==void 0&&(s=Math.max(s,r.min)),r.max!==void 0&&(s=Math.min(s,r.max))),s}function Yu(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Rn(r,e,n,i,o){var s=o!=null?o.type:null;n<0?n=0:n>1&&(n=1);var l=Yu(r,o),f=Yu(e,o);if(Ae(l)&&Ae(f))return Wu(s,l,f,n,i);if(at(l)&&at(f)){for(var h=[],p=0;p<f.length;p++){var g=l[p],m=f[p];if(g!=null&&m!=null){var y=Wu(s,g,m,n,i);h.push(y)}else h.push(m)}return h}}function Qp(r,e,n,i){var o=!i,s=r._private,l=e._private,f=l.easing,h=l.startTime,p=i?r:r.cy(),g=p.style();if(!l.easingImpl)if(f==null)l.easingImpl=ji.linear;else{var m;if(Fe(f)){var y=g.parse("transition-timing-function",f);m=y.value}else m=f;var w,A;Fe(m)?(w=m,A=[]):(w=m[1],A=m.slice(2).map(function(ce){return+ce})),A.length>0?(w==="spring"&&A.push(l.duration),l.easingImpl=ji[w].apply(null,A)):l.easingImpl=ji[w]}var k=l.easingImpl,B;if(l.duration===0?B=1:B=(n-h)/l.duration,l.applying&&(B=l.progress),B<0?B=0:B>1&&(B=1),l.delay==null){var R=l.startPosition,z=l.position;if(z&&o&&!r.locked()){var $={};Za(R.x,z.x)&&($.x=Rn(R.x,z.x,B,k)),Za(R.y,z.y)&&($.y=Rn(R.y,z.y,B,k)),r.position($)}var H=l.startPan,X=l.pan,ee=s.pan,_=X!=null&&i;_&&(Za(H.x,X.x)&&(ee.x=Rn(H.x,X.x,B,k)),Za(H.y,X.y)&&(ee.y=Rn(H.y,X.y,B,k)),r.emit("pan"));var te=l.startZoom,q=l.zoom,ae=q!=null&&i;ae&&(Za(te,q)&&(s.zoom=Pa(s.minZoom,Rn(te,q,B,k),s.maxZoom)),r.emit("zoom")),(_||ae)&&r.emit("viewport");var ne=l.style;if(ne&&ne.length>0&&o){for(var re=0;re<ne.length;re++){var oe=ne[re],ie=oe.name,ve=oe,le=l.startStyle[ie],he=g.properties[le.name],se=Rn(le,ve,B,k,he);g.overrideBypass(r,ie,se)}r.emit("style")}}return l.progress=B,B}function Za(r,e){return r==null||e==null?!1:Ae(r)&&Ae(e)?!0:!!(r&&e)}function Jp(r,e,n,i){var o=e._private;o.started=!0,o.startTime=n-o.progress*o.duration}function Uu(r,e){var n=e._private.aniEles,i=[];function o(g,m){var y=g._private,w=y.animation.current,A=y.animation.queue,k=!1;if(w.length===0){var B=A.shift();B&&w.push(B)}for(var R=function(ee){for(var _=ee.length-1;_>=0;_--){var te=ee[_];te()}ee.splice(0,ee.length)},z=w.length-1;z>=0;z--){var $=w[z],H=$._private;if(H.stopped){w.splice(z,1),H.hooked=!1,H.playing=!1,H.started=!1,R(H.frames);continue}!H.playing&&!H.applying||(H.playing&&H.applying&&(H.applying=!1),H.started||Jp(g,$,r),Qp(g,$,r,m),H.applying&&(H.applying=!1),R(H.frames),H.step!=null&&H.step(r),$.completed()&&(w.splice(z,1),H.hooked=!1,H.playing=!1,H.started=!1,R(H.completes)),k=!0)}return!m&&w.length===0&&A.length===0&&i.push(g),k}for(var s=!1,l=0;l<n.length;l++){var f=n[l],h=o(f);s=s||h}var p=o(e,!0);(s||p)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(i),e.emit("step")}var eg={animate:et.animate(),animation:et.animation(),animated:et.animated(),clearQueue:et.clearQueue(),delay:et.delay(),delayAnimation:et.delayAnimation(),stop:et.stop(),addToAnimationPool:function(e){var n=this;!n.styleEnabled()||n._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function n(){!e._private.animationsRunning||Di(function(s){Uu(s,e),n()})}var i=e.renderer();i&&i.beforeRender?i.beforeRender(function(s,l){Uu(l,e)},i.beforeRenderPriorities.animations):n()}},tg={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,i){var o=n.qualifier;return o!=null?e!==i.target&&Qn(i.target)&&o.matches(i.target):!0},addEventFields:function(e,n){n.cy=e,n.target=e},callbackContext:function(e,n,i){return n.qualifier!=null?i.target:e}},Zi=function(e){return Fe(e)?new Fr(e):e},Xu={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Ki(tg,this)),this},emitter:function(){return this._private.emitter},on:function(e,n,i){return this.emitter().on(e,Zi(n),i),this},removeListener:function(e,n,i){return this.emitter().removeListener(e,Zi(n),i),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,n,i){return this.emitter().one(e,Zi(n),i),this},once:function(e,n,i){return this.emitter().one(e,Zi(n),i),this},emit:function(e,n){return this.emitter().emit(e,n),this},emitAndNotify:function(e,n){return this.emit(e),this.notify(e,n),this}};et.eventAliasesOn(Xu);var us={png:function(e){var n=this._private.renderer;return e=e||{},n.png(e)},jpg:function(e){var n=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",n.jpg(e)}};us.jpeg=us.jpg;var Qi={layout:function(e){var n=this;if(e==null){pt("Layout options must be specified to make a layout");return}if(e.name==null){pt("A `name` must be specified to make a layout");return}var i=e.name,o=n.extension("layout",i);if(o==null){pt("No such layout `"+i+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var s;Fe(e.eles)?s=n.$(e.eles):s=e.eles!=null?e.eles:n.$();var l=new o(_e({},e,{cy:n,eles:s}));return l}};Qi.createLayout=Qi.makeLayout=Qi.layout;var rg={notify:function(e,n){var i=this._private;if(this.batching()){i.batchNotifications=i.batchNotifications||{};var o=i.batchNotifications[e]=i.batchNotifications[e]||this.collection();n!=null&&o.merge(n);return}if(!!i.notificationsEnabled){var s=this.renderer();this.destroyed()||!s||s.notify(e,n)}},notifications:function(e){var n=this._private;return e===void 0?n.notificationsEnabled:(n.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var n=this.renderer();Object.keys(e.batchNotifications).forEach(function(i){var o=e.batchNotifications[i];o.empty()?n.notify(i):n.notify(i,o)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var n=this;return this.batch(function(){for(var i=Object.keys(e),o=0;o<i.length;o++){var s=i[o],l=e[s],f=n.getElementById(s);f.data(l)}})}},ng=kt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),cs={renderTo:function(e,n,i,o){var s=this._private.renderer;return s.renderTo(e,n,i,o),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var n=this,i=n.extension("renderer",e.name);if(i==null){pt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&rt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var o=ng(e);o.cy=n,n._private.renderer=new i(o),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var n=e.container();if(n)for(n._cyreg=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(i){var o=i._private;o.rscratch={},o.rstyle={},o.animation.current=[],o.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};cs.invalidateDimensions=cs.resize;var Ji={collection:function(e,n){return Fe(e)?this.$(e):Wt(e)?e.collection():at(e)?new St(this,e,n):new St(this)},nodes:function(e){var n=this.$(function(i){return i.isNode()});return e?n.filter(e):n},edges:function(e){var n=this.$(function(i){return i.isEdge()});return e?n.filter(e):n},$:function(e){var n=this._private.elements;return e?n.filter(e):n.spawnSelf()},mutableElements:function(){return this._private.elements}};Ji.elements=Ji.filter=Ji.$;var Bt={},Qa="t",ag="f";Bt.apply=function(r){for(var e=this,n=e._private,i=n.cy,o=i.collection(),s=0;s<r.length;s++){var l=r[s],f=e.getContextMeta(l);if(!f.empty){var h=e.getContextStyle(f),p=e.applyContextStyle(f,h,l);l._private.appliedInitStyle?e.updateTransitions(l,p.diffProps):l._private.appliedInitStyle=!0;var g=e.updateStyleHints(l);g&&o.push(l)}}return o};Bt.getPropertiesDiff=function(r,e){var n=this,i=n._private.propDiffs=n._private.propDiffs||{},o=r+"-"+e,s=i[o];if(s)return s;for(var l=[],f={},h=0;h<n.length;h++){var p=n[h],g=r[h]===Qa,m=e[h]===Qa,y=g!==m,w=p.mappedProperties.length>0;if(y||m&&w){var A=void 0;y&&w||y?A=p.properties:w&&(A=p.mappedProperties);for(var k=0;k<A.length;k++){for(var B=A[k],R=B.name,z=!1,$=h+1;$<n.length;$++){var H=n[$],X=e[$]===Qa;if(!!X&&(z=H.properties[B.name]!=null,z))break}!f[R]&&!z&&(f[R]=!0,l.push(R))}}}return i[o]=l,l};Bt.getContextMeta=function(r){for(var e=this,n="",i,o=r._private.styleCxtKey||"",s=0;s<e.length;s++){var l=e[s],f=l.selector&&l.selector.matches(r);f?n+=Qa:n+=ag}return i=e.getPropertiesDiff(o,n),r._private.styleCxtKey=n,{key:n,diffPropNames:i,empty:i.length===0}};Bt.getContextStyle=function(r){var e=r.key,n=this,i=this._private.contextStyles=this._private.contextStyles||{};if(i[e])return i[e];for(var o={_private:{key:e}},s=0;s<n.length;s++){var l=n[s],f=e[s]===Qa;if(!!f)for(var h=0;h<l.properties.length;h++){var p=l.properties[h];o[p.name]=p}}return i[e]=o,o};Bt.applyContextStyle=function(r,e,n){for(var i=this,o=r.diffPropNames,s={},l=i.types,f=0;f<o.length;f++){var h=o[f],p=e[h],g=n.pstyle(h);if(!p)if(g)g.bypass?p={name:h,deleteBypassed:!0}:p={name:h,delete:!0};else continue;if(g!==p){if(p.mapped===l.fn&&g!=null&&g.mapping!=null&&g.mapping.value===p.value){var m=g.mapping,y=m.fnValue=p.value(n);if(y===m.prevFnValue)continue}var w=s[h]={prev:g};i.applyParsedProperty(n,p),w.next=n.pstyle(h),w.next&&w.next.bypass&&(w.next=w.next.bypassed)}}return{diffProps:s}};Bt.updateStyleHints=function(r){var e=r._private,n=this,i=n.propertyGroupNames,o=n.propertyGroupKeys,s=function(De,Re,Ge){return n.getPropertiesHash(De,Re,Ge)},l=e.styleKey;if(r.removed())return!1;var f=e.group==="nodes",h=r._private.style;i=Object.keys(h);for(var p=0;p<o.length;p++){var g=o[p];e.styleKeys[g]=[yn,pa]}for(var m=function(De,Re){return e.styleKeys[Re][0]=ga(De,e.styleKeys[Re][0])},y=function(De,Re){return e.styleKeys[Re][1]=Sa(De,e.styleKeys[Re][1])},w=function(De,Re){m(De,Re),y(De,Re)},A=function(De,Re){for(var Ge=0;Ge<De.length;Ge++){var Ke=De.charCodeAt(Ge);m(Ke,Re),y(Ke,Re)}},k=2e9,B=function(De){return-128<De&&De<128&&Math.floor(De)!==De?k-(De*1024|0):De},R=0;R<i.length;R++){var z=i[R],$=h[z];if($!=null){var H=this.properties[z],X=H.type,ee=H.groupKey,_=void 0;H.hashOverride!=null?_=H.hashOverride(r,$):$.pfValue!=null&&(_=$.pfValue);var te=H.enums==null?$.value:null,q=_!=null,ae=te!=null,ne=q||ae,re=$.units;if(X.number&&ne&&!X.multiple){var oe=q?_:te;w(B(oe),ee),!q&&re!=null&&A(re,ee)}else A($.strValue,ee)}}for(var ie=[yn,pa],ve=0;ve<o.length;ve++){var le=o[ve],he=e.styleKeys[le];ie[0]=ga(he[0],ie[0]),ie[1]=Sa(he[1],ie[1])}e.styleKey=yv(ie[0],ie[1]);var se=e.styleKeys;e.labelDimsKey=Rr(se.labelDimensions);var ce=s(r,["label"],se.labelDimensions);if(e.labelKey=Rr(ce),e.labelStyleKey=Rr(Pi(se.commonLabel,ce)),!f){var be=s(r,["source-label"],se.labelDimensions);e.sourceLabelKey=Rr(be),e.sourceLabelStyleKey=Rr(Pi(se.commonLabel,be));var de=s(r,["target-label"],se.labelDimensions);e.targetLabelKey=Rr(de),e.targetLabelStyleKey=Rr(Pi(se.commonLabel,de))}if(f){var xe=e.styleKeys,Ce=xe.nodeBody,Te=xe.nodeBorder,Se=xe.backgroundImage,me=xe.compound,ue=xe.pie,Ee=[Ce,Te,Se,me,ue].filter(function(Pe){return Pe!=null}).reduce(Pi,[yn,pa]);e.nodeKey=Rr(Ee),e.hasPie=ue!=null&&ue[0]!==yn&&ue[1]!==pa}return l!==e.styleKey};Bt.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};Bt.applyParsedProperty=function(r,e){var n=this,i=e,o=r._private.style,s,l=n.types,f=n.properties[i.name].type,h=i.bypass,p=o[i.name],g=p&&p.bypass,m=r._private,y="mapping",w=function(Ce){return Ce==null?null:Ce.pfValue!=null?Ce.pfValue:Ce.value},A=function(){var Ce=w(p),Te=w(i);n.checkTriggers(r,i.name,Ce,Te)};if(i&&i.name.substr(0,3)==="pie"&&rt("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(i=e=this.parse(e.name,"bezier",h)),i.delete)return o[i.name]=void 0,A(),!0;if(i.deleteBypassed)return p?p.bypass?(p.bypassed=void 0,A(),!0):!1:(A(),!0);if(i.deleteBypass)return p?p.bypass?(o[i.name]=p.bypassed,A(),!0):!1:(A(),!0);var k=function(){rt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case l.mapData:{for(var B=i.field.split("."),R=m.data,z=0;z<B.length&&R;z++){var $=B[z];R=R[$]}if(R==null)return k(),!1;var H;if(Ae(R)){var X=i.fieldMax-i.fieldMin;X===0?H=0:H=(R-i.fieldMin)/X}else return rt("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+R+"` for `"+r.id()+"` is non-numeric)"),!1;if(H<0?H=0:H>1&&(H=1),f.color){var ee=i.valueMin[0],_=i.valueMax[0],te=i.valueMin[1],q=i.valueMax[1],ae=i.valueMin[2],ne=i.valueMax[2],re=i.valueMin[3]==null?1:i.valueMin[3],oe=i.valueMax[3]==null?1:i.valueMax[3],ie=[Math.round(ee+(_-ee)*H),Math.round(te+(q-te)*H),Math.round(ae+(ne-ae)*H),Math.round(re+(oe-re)*H)];s={bypass:i.bypass,name:i.name,value:ie,strValue:"rgb("+ie[0]+", "+ie[1]+", "+ie[2]+")"}}else if(f.number){var ve=i.valueMin+(i.valueMax-i.valueMin)*H;s=this.parse(i.name,ve,i.bypass,y)}else return!1;if(!s)return k(),!1;s.mapping=i,i=s;break}case l.data:{for(var le=i.field.split("."),he=m.data,se=0;se<le.length&&he;se++){var ce=le[se];he=he[ce]}if(he!=null&&(s=this.parse(i.name,he,i.bypass,y)),!s)return k(),!1;s.mapping=i,i=s;break}case l.fn:{var be=i.value,de=i.fnValue!=null?i.fnValue:be(r);if(i.prevFnValue=de,de==null)return rt("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+r.id()+"` is null)"),!1;if(s=this.parse(i.name,de,i.bypass,y),!s)return rt("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+r.id()+"` is invalid)"),!1;s.mapping=lr(i),i=s;break}case void 0:break;default:return!1}return h?(g?i.bypassed=p.bypassed:i.bypassed=p,o[i.name]=i):g?p.bypassed=i:o[i.name]=i,A(),!0};Bt.cleanElements=function(r,e){for(var n=0;n<r.length;n++){var i=r[n];if(this.clearStyleHints(i),i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),!e)i._private.style={};else for(var o=i._private.style,s=Object.keys(o),l=0;l<s.length;l++){var f=s[l],h=o[f];h!=null&&(h.bypass?h.bypassed=null:o[f]=null)}}};Bt.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};Bt.updateTransitions=function(r,e){var n=this,i=r._private,o=r.pstyle("transition-property").value,s=r.pstyle("transition-duration").pfValue,l=r.pstyle("transition-delay").pfValue;if(o.length>0&&s>0){for(var f={},h=!1,p=0;p<o.length;p++){var g=o[p],m=r.pstyle(g),y=e[g];if(!!y){var w=y.prev,A=w,k=y.next!=null?y.next:m,B=!1,R=void 0,z=1e-6;!A||(Ae(A.pfValue)&&Ae(k.pfValue)?(B=k.pfValue-A.pfValue,R=A.pfValue+z*B):Ae(A.value)&&Ae(k.value)?(B=k.value-A.value,R=A.value+z*B):at(A.value)&&at(k.value)&&(B=A.value[0]!==k.value[0]||A.value[1]!==k.value[1]||A.value[2]!==k.value[2],R=A.strValue),B&&(f[g]=k.strValue,this.applyBypass(r,g,R),h=!0))}}if(!h)return;i.transitioning=!0,new Tn(function($){l>0?r.delayAnimation(l).play().promise().then($):$()}).then(function(){return r.animation({style:f,duration:s,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(r,o),r.emitAndNotify("style"),i.transitioning=!1})}else i.transitioning&&(this.removeBypasses(r,o),r.emitAndNotify("style"),i.transitioning=!1)};Bt.checkTrigger=function(r,e,n,i,o,s){var l=this.properties[e],f=o(l);f!=null&&f(n,i)&&s(l)};Bt.checkZOrderTrigger=function(r,e,n,i){var o=this;this.checkTrigger(r,e,n,i,function(s){return s.triggersZOrder},function(){o._private.cy.notify("zorder",r)})};Bt.checkBoundsTrigger=function(r,e,n,i){this.checkTrigger(r,e,n,i,function(o){return o.triggersBounds},function(o){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e==="curve-style"&&(n==="bezier"||i==="bezier")&&o.triggersBoundsOfParallelBeziers&&r.parallelEdges().forEach(function(s){s.isBundledBezier()&&s.dirtyBoundingBoxCache()})})};Bt.checkTriggers=function(r,e,n,i){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,n,i),this.checkBoundsTrigger(r,e,n,i)};var ei={};ei.applyBypass=function(r,e,n,i){var o=this,s=[],l=!0;if(e==="*"||e==="**"){if(n!==void 0)for(var f=0;f<o.properties.length;f++){var h=o.properties[f],p=h.name,g=this.parse(p,n,!0);g&&s.push(g)}}else if(Fe(e)){var m=this.parse(e,n,!0);m&&s.push(m)}else if(je(e)){var y=e;i=n;for(var w=Object.keys(y),A=0;A<w.length;A++){var k=w[A],B=y[k];if(B===void 0&&(B=y[Ti(k)]),B!==void 0){var R=this.parse(k,B,!0);R&&s.push(R)}}}else return!1;if(s.length===0)return!1;for(var z=!1,$=0;$<r.length;$++){for(var H=r[$],X={},ee=void 0,_=0;_<s.length;_++){var te=s[_];if(i){var q=H.pstyle(te.name);ee=X[te.name]={prev:q}}z=this.applyParsedProperty(H,lr(te))||z,i&&(ee.next=H.pstyle(te.name))}z&&this.updateStyleHints(H),i&&this.updateTransitions(H,X,l)}return z};ei.overrideBypass=function(r,e,n){e=Fo(e);for(var i=0;i<r.length;i++){var o=r[i],s=o._private.style[e],l=this.properties[e].type,f=l.color,h=l.mutiple,p=s?s.pfValue!=null?s.pfValue:s.value:null;!s||!s.bypass?this.applyBypass(o,e,n):(s.value=n,s.pfValue!=null&&(s.pfValue=n),f?s.strValue="rgb("+n.join(",")+")":h?s.strValue=n.join(" "):s.strValue=""+n,this.updateStyleHints(o)),this.checkTriggers(o,e,p,n)}};ei.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};ei.removeBypasses=function(r,e,n){for(var i=!0,o=0;o<r.length;o++){for(var s=r[o],l={},f=0;f<e.length;f++){var h=e[f],p=this.properties[h],g=s.pstyle(p.name);if(!(!g||!g.bypass)){var m="",y=this.parse(h,m,!0),w=l[p.name]={prev:g};this.applyParsedProperty(s,y),w.next=s.pstyle(p.name)}}this.updateStyleHints(s),n&&this.updateTransitions(s,l,i)}};var fs={};fs.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};fs.containerCss=function(r){var e=this._private.cy,n=e.container();if(ht&&n&&ht.getComputedStyle)return ht.getComputedStyle(n).getPropertyValue(r)};var cr={};cr.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};cr.getRawStyle=function(r,e){var n=this;if(r=r[0],r){for(var i={},o=0;o<n.properties.length;o++){var s=n.properties[o],l=n.getStylePropertyValue(r,s.name,e);l!=null&&(i[s.name]=l,i[Ti(s.name)]=l)}return i}};cr.getIndexedStyle=function(r,e,n,i){var o=r.pstyle(e)[n][i];return o??r.cy().style().getDefaultProperty(e)[n][0]};cr.getStylePropertyValue=function(r,e,n){var i=this;if(r=r[0],r){var o=i.properties[e];o.alias&&(o=o.pointsTo);var s=o.type,l=r.pstyle(o.name);if(l){var f=l.value,h=l.units,p=l.strValue;if(n&&s.number&&f!=null&&Ae(f)){var g=r.cy().zoom(),m=function(B){return B*g},y=function(B,R){return m(B)+R},w=at(f),A=w?h.every(function(k){return k!=null}):h!=null;return A?w?f.map(function(k,B){return y(k,h[B])}).join(" "):y(f,h):w?f.map(function(k){return Fe(k)?k:""+m(k)}).join(" "):""+m(f)}else if(p!=null)return p}return null}};cr.getAnimationStartStyle=function(r,e){for(var n={},i=0;i<e.length;i++){var o=e[i],s=o.name,l=r.pstyle(s);l!==void 0&&(je(l)?l=this.parse(s,l.strValue):l=this.parse(s,l)),l&&(n[s]=l)}return n};cr.getPropsList=function(r){var e=this,n=[],i=r,o=e.properties;if(i)for(var s=Object.keys(i),l=0;l<s.length;l++){var f=s[l],h=i[f],p=o[f]||o[Fo(f)],g=this.parse(p.name,h);g&&n.push(g)}return n};cr.getNonDefaultPropertiesHash=function(r,e,n){var i=n.slice(),o,s,l,f,h,p;for(h=0;h<e.length;h++)if(o=e[h],s=r.pstyle(o,!1),s!=null)if(s.pfValue!=null)i[0]=ga(f,i[0]),i[1]=Sa(f,i[1]);else for(l=s.strValue,p=0;p<l.length;p++)f=l.charCodeAt(p),i[0]=ga(f,i[0]),i[1]=Sa(f,i[1]);return i};cr.getPropertiesHash=cr.getNonDefaultPropertiesHash;var eo={};eo.appendFromJson=function(r){for(var e=this,n=0;n<r.length;n++){var i=r[n],o=i.selector,s=i.style||i.css,l=Object.keys(s);e.selector(o);for(var f=0;f<l.length;f++){var h=l[f],p=s[h];e.css(h,p)}}return e};eo.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};eo.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],i=n.selector,o=n.properties,s={},l=0;l<o.length;l++){var f=o[l];s[f.name]=f.strValue}r.push({selector:i?i.toString():"core",style:s})}return r};var hs={};hs.appendFromString=function(r){var e=this,n=this,i=""+r,o,s,l;i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");function f(){i.length>o.length?i=i.substr(o.length):i=""}function h(){s.length>l.length?s=s.substr(l.length):s=""}for(;;){var p=i.match(/^\s*$/);if(p)break;var g=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!g){rt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}o=g[0];var m=g[1];if(m!=="core"){var y=new Fr(m);if(y.invalid){rt("Skipping parsing of block: Invalid selector found in string stylesheet: "+m),f();continue}}var w=g[2],A=!1;s=w;for(var k=[];;){var B=s.match(/^\s*$/);if(B)break;var R=s.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!R){rt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+w),A=!0;break}l=R[0];var z=R[1],$=R[2],H=e.properties[z];if(!H){rt("Skipping property: Invalid property name in: "+l),h();continue}var X=n.parse(z,$);if(!X){rt("Skipping property: Invalid property definition in: "+l),h();continue}k.push({name:z,val:$}),h()}if(A){f();break}n.selector(m);for(var ee=0;ee<k.length;ee++){var _=k[ee];n.css(_.name,_.val)}f()}return n};hs.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Tt={};(function(){var r=mt,e=iv,n=sv,i=lv,o=uv,s=function(ue){return"^"+ue+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},l=function(ue){var Ee=r+"|\\w+|"+e+"|"+n+"|"+i+"|"+o;return"^"+ue+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+Ee+")\\s*\\,\\s*("+Ee+")\\)$"},f=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Tt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:s("data")},layoutData:{mapping:!0,regex:s("layoutData")},scratch:{mapping:!0,regex:s("scratch")},mapData:{mapping:!0,regex:l("mapData")},mapLayoutData:{mapping:!0,regex:l("mapLayoutData")},mapScratch:{mapping:!0,regex:l("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:f,singleRegexMatchValue:!0},urls:{regexes:f,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(ue,Ee){switch(ue.length){case 2:return Ee[0]!=="deg"&&Ee[0]!=="rad"&&Ee[1]!=="deg"&&Ee[1]!=="rad";case 1:return Fe(ue[0])||Ee[0]==="deg"||Ee[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(ue){var Ee=ue.length;return Ee===1||Ee===2||Ee===4}}};var h={zeroNonZero:function(ue,Ee){return(ue==null||Ee==null)&&ue!==Ee||ue==0&&Ee!=0?!0:ue!=0&&Ee==0},any:function(ue,Ee){return ue!=Ee},emptyNonEmpty:function(ue,Ee){var Pe=Mr(ue),De=Mr(Ee);return Pe&&!De||!Pe&&De}},p=Tt.types,g=[{name:"label",type:p.text,triggersBounds:h.any,triggersZOrder:h.emptyNonEmpty},{name:"text-rotation",type:p.textRotation,triggersBounds:h.any},{name:"text-margin-x",type:p.bidirectionalSize,triggersBounds:h.any},{name:"text-margin-y",type:p.bidirectionalSize,triggersBounds:h.any}],m=[{name:"source-label",type:p.text,triggersBounds:h.any},{name:"source-text-rotation",type:p.textRotation,triggersBounds:h.any},{name:"source-text-margin-x",type:p.bidirectionalSize,triggersBounds:h.any},{name:"source-text-margin-y",type:p.bidirectionalSize,triggersBounds:h.any},{name:"source-text-offset",type:p.size,triggersBounds:h.any}],y=[{name:"target-label",type:p.text,triggersBounds:h.any},{name:"target-text-rotation",type:p.textRotation,triggersBounds:h.any},{name:"target-text-margin-x",type:p.bidirectionalSize,triggersBounds:h.any},{name:"target-text-margin-y",type:p.bidirectionalSize,triggersBounds:h.any},{name:"target-text-offset",type:p.size,triggersBounds:h.any}],w=[{name:"font-family",type:p.fontFamily,triggersBounds:h.any},{name:"font-style",type:p.fontStyle,triggersBounds:h.any},{name:"font-weight",type:p.fontWeight,triggersBounds:h.any},{name:"font-size",type:p.size,triggersBounds:h.any},{name:"text-transform",type:p.textTransform,triggersBounds:h.any},{name:"text-wrap",type:p.textWrap,triggersBounds:h.any},{name:"text-overflow-wrap",type:p.textOverflowWrap,triggersBounds:h.any},{name:"text-max-width",type:p.size,triggersBounds:h.any},{name:"text-outline-width",type:p.size,triggersBounds:h.any},{name:"line-height",type:p.positiveNumber,triggersBounds:h.any}],A=[{name:"text-valign",type:p.valign,triggersBounds:h.any},{name:"text-halign",type:p.halign,triggersBounds:h.any},{name:"color",type:p.color},{name:"text-outline-color",type:p.color},{name:"text-outline-opacity",type:p.zeroOneNumber},{name:"text-background-color",type:p.color},{name:"text-background-opacity",type:p.zeroOneNumber},{name:"text-background-padding",type:p.size,triggersBounds:h.any},{name:"text-border-opacity",type:p.zeroOneNumber},{name:"text-border-color",type:p.color},{name:"text-border-width",type:p.size,triggersBounds:h.any},{name:"text-border-style",type:p.borderStyle,triggersBounds:h.any},{name:"text-background-shape",type:p.textBackgroundShape,triggersBounds:h.any},{name:"text-justification",type:p.justification}],k=[{name:"events",type:p.bool},{name:"text-events",type:p.bool}],B=[{name:"display",type:p.display,triggersZOrder:h.any,triggersBounds:h.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:p.visibility,triggersZOrder:h.any},{name:"opacity",type:p.zeroOneNumber,triggersZOrder:h.zeroNonZero},{name:"text-opacity",type:p.zeroOneNumber},{name:"min-zoomed-font-size",type:p.size},{name:"z-compound-depth",type:p.zCompoundDepth,triggersZOrder:h.any},{name:"z-index-compare",type:p.zIndexCompare,triggersZOrder:h.any},{name:"z-index",type:p.nonNegativeInt,triggersZOrder:h.any}],R=[{name:"overlay-padding",type:p.size,triggersBounds:h.any},{name:"overlay-color",type:p.color},{name:"overlay-opacity",type:p.zeroOneNumber,triggersBounds:h.zeroNonZero}],z=[{name:"transition-property",type:p.propList},{name:"transition-duration",type:p.time},{name:"transition-delay",type:p.time},{name:"transition-timing-function",type:p.easing}],$=function(ue,Ee){return Ee.value==="label"?-ue.poolIndex():Ee.pfValue},H=[{name:"height",type:p.nodeSize,triggersBounds:h.any,hashOverride:$},{name:"width",type:p.nodeSize,triggersBounds:h.any,hashOverride:$},{name:"shape",type:p.nodeShape,triggersBounds:h.any},{name:"shape-polygon-points",type:p.polygonPointList,triggersBounds:h.any},{name:"background-color",type:p.color},{name:"background-fill",type:p.fill},{name:"background-opacity",type:p.zeroOneNumber},{name:"background-blacken",type:p.nOneOneNumber},{name:"background-gradient-stop-colors",type:p.colors},{name:"background-gradient-stop-positions",type:p.percentages},{name:"background-gradient-direction",type:p.gradientDirection},{name:"padding",type:p.sizeMaybePercent,triggersBounds:h.any},{name:"padding-relative-to",type:p.paddingRelativeTo,triggersBounds:h.any},{name:"bounds-expansion",type:p.boundsExpansion,triggersBounds:h.any}],X=[{name:"border-color",type:p.color},{name:"border-opacity",type:p.zeroOneNumber},{name:"border-width",type:p.size,triggersBounds:h.any},{name:"border-style",type:p.borderStyle}],ee=[{name:"background-image",type:p.urls},{name:"background-image-crossorigin",type:p.bgCrossOrigin},{name:"background-image-opacity",type:p.zeroOneNumbers},{name:"background-image-containment",type:p.bgContainment},{name:"background-image-smoothing",type:p.bools},{name:"background-position-x",type:p.bgPos},{name:"background-position-y",type:p.bgPos},{name:"background-width-relative-to",type:p.bgRelativeTo},{name:"background-height-relative-to",type:p.bgRelativeTo},{name:"background-repeat",type:p.bgRepeat},{name:"background-fit",type:p.bgFit},{name:"background-clip",type:p.bgClip},{name:"background-width",type:p.bgWH},{name:"background-height",type:p.bgWH},{name:"background-offset-x",type:p.bgPos},{name:"background-offset-y",type:p.bgPos}],_=[{name:"position",type:p.position,triggersBounds:h.any},{name:"compound-sizing-wrt-labels",type:p.compoundIncludeLabels,triggersBounds:h.any},{name:"min-width",type:p.size,triggersBounds:h.any},{name:"min-width-bias-left",type:p.sizeMaybePercent,triggersBounds:h.any},{name:"min-width-bias-right",type:p.sizeMaybePercent,triggersBounds:h.any},{name:"min-height",type:p.size,triggersBounds:h.any},{name:"min-height-bias-top",type:p.sizeMaybePercent,triggersBounds:h.any},{name:"min-height-bias-bottom",type:p.sizeMaybePercent,triggersBounds:h.any}],te=[{name:"line-style",type:p.lineStyle},{name:"line-color",type:p.color},{name:"line-fill",type:p.fill},{name:"line-cap",type:p.lineCap},{name:"line-opacity",type:p.zeroOneNumber},{name:"line-dash-pattern",type:p.numbers},{name:"line-dash-offset",type:p.number},{name:"line-gradient-stop-colors",type:p.colors},{name:"line-gradient-stop-positions",type:p.percentages},{name:"curve-style",type:p.curveStyle,triggersBounds:h.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:p.zeroOneNumber,triggersBounds:h.any},{name:"source-endpoint",type:p.edgeEndpoint,triggersBounds:h.any},{name:"target-endpoint",type:p.edgeEndpoint,triggersBounds:h.any},{name:"control-point-step-size",type:p.size,triggersBounds:h.any},{name:"control-point-distances",type:p.bidirectionalSizes,triggersBounds:h.any},{name:"control-point-weights",type:p.numbers,triggersBounds:h.any},{name:"segment-distances",type:p.bidirectionalSizes,triggersBounds:h.any},{name:"segment-weights",type:p.numbers,triggersBounds:h.any},{name:"taxi-turn",type:p.bidirectionalSizeMaybePercent,triggersBounds:h.any},{name:"taxi-turn-min-distance",type:p.size,triggersBounds:h.any},{name:"taxi-direction",type:p.axisDirection,triggersBounds:h.any},{name:"edge-distances",type:p.edgeDistances,triggersBounds:h.any},{name:"arrow-scale",type:p.positiveNumber,triggersBounds:h.any},{name:"loop-direction",type:p.angle,triggersBounds:h.any},{name:"loop-sweep",type:p.angle,triggersBounds:h.any},{name:"source-distance-from-node",type:p.size,triggersBounds:h.any},{name:"target-distance-from-node",type:p.size,triggersBounds:h.any}],q=[{name:"ghost",type:p.bool,triggersBounds:h.any},{name:"ghost-offset-x",type:p.bidirectionalSize,triggersBounds:h.any},{name:"ghost-offset-y",type:p.bidirectionalSize,triggersBounds:h.any},{name:"ghost-opacity",type:p.zeroOneNumber}],ae=[{name:"selection-box-color",type:p.color},{name:"selection-box-opacity",type:p.zeroOneNumber},{name:"selection-box-border-color",type:p.color},{name:"selection-box-border-width",type:p.size},{name:"active-bg-color",type:p.color},{name:"active-bg-opacity",type:p.zeroOneNumber},{name:"active-bg-size",type:p.size},{name:"outside-texture-bg-color",type:p.color},{name:"outside-texture-bg-opacity",type:p.zeroOneNumber}],ne=[];Tt.pieBackgroundN=16,ne.push({name:"pie-size",type:p.sizeMaybePercent});for(var re=1;re<=Tt.pieBackgroundN;re++)ne.push({name:"pie-"+re+"-background-color",type:p.color}),ne.push({name:"pie-"+re+"-background-size",type:p.percent}),ne.push({name:"pie-"+re+"-background-opacity",type:p.zeroOneNumber});var oe=[],ie=Tt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:p.arrowShape,triggersBounds:h.any},{name:"arrow-color",type:p.color},{name:"arrow-fill",type:p.arrowFill}].forEach(function(me){ie.forEach(function(ue){var Ee=ue+"-"+me.name,Pe=me.type,De=me.triggersBounds;oe.push({name:Ee,type:Pe,triggersBounds:De})})},{});var ve=Tt.properties=[].concat(k,z,B,R,q,A,w,g,m,y,H,X,ee,ne,_,te,oe,ae),le=Tt.propertyGroups={behavior:k,transition:z,visibility:B,overlay:R,ghost:q,commonLabel:A,labelDimensions:w,mainLabel:g,sourceLabel:m,targetLabel:y,nodeBody:H,nodeBorder:X,backgroundImage:ee,pie:ne,compound:_,edgeLine:te,edgeArrow:oe,core:ae},he=Tt.propertyGroupNames={},se=Tt.propertyGroupKeys=Object.keys(le);se.forEach(function(me){he[me]=le[me].map(function(ue){return ue.name}),le[me].forEach(function(ue){return ue.groupKey=me})});var ce=Tt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Tt.propertyNames=ve.map(function(me){return me.name});for(var be=0;be<ve.length;be++){var de=ve[be];ve[de.name]=de}for(var xe=0;xe<ce.length;xe++){var Ce=ce[xe],Te=ve[Ce.pointsTo],Se={name:Ce.name,alias:!0,pointsTo:Te};ve.push(Se),ve[Ce.name]=Se}})();Tt.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Tt.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=_e({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(h,p){for(var g=1;g<=Tt.pieBackgroundN;g++){var m=p.name.replace("{{i}}",g),y=p.value;h[m]=y}return h},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(h,p){return Tt.arrowPrefixes.forEach(function(g){var m=g+"-"+p.name,y=p.value;h[m]=y}),h},{})),n={},i=0;i<this.properties.length;i++){var o=this.properties[i];if(!o.pointsTo){var s=o.name,l=e[s],f=this.parse(s,l);n[s]=f}}return r.defaultProperties=n,r.defaultProperties};Tt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var to={};to.parse=function(r,e,n,i){var o=this;if(vt(e))return o.parseImplWarn(r,e,n,i);var s=i==="mapping"||i===!0||i===!1||i==null?"dontcare":i,l=n?"t":"f",f=""+e,h=Pl(r,f,l,s),p=o.propCache=o.propCache||[],g;return(g=p[h])||(g=p[h]=o.parseImplWarn(r,e,n,i)),(n||i==="mapping")&&(g=lr(g),g&&(g.value=lr(g.value))),g};to.parseImplWarn=function(r,e,n,i){var o=this.parseImpl(r,e,n,i);return!o&&e!=null&&rt("The style property `".concat(r,": ").concat(e,"` is invalid")),o&&(o.name==="width"||o.name==="height")&&e==="label"&&rt("The style value of `label` is deprecated for `"+o.name+"`"),o};to.parseImpl=function(r,e,n,i){var o=this;r=Fo(r);var s=o.properties[r],l=e,f=o.types;if(!s||e===void 0)return null;s.alias&&(s=s.pointsTo,r=s.name);var h=Fe(e);h&&(e=e.trim());var p=s.type;if(!p)return null;if(n&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(vt(e))return{name:r,value:e,strValue:"fn",mapped:f.fn,bypass:n};var g,m;if(!(!h||i||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(g=new RegExp(f.data.regex).exec(e))){if(n)return!1;var y=f.data;return{name:r,value:g,strValue:""+e,mapped:y,field:g[1],bypass:n}}else if(e.length>=10&&e[0]==="m"&&(m=new RegExp(f.mapData.regex).exec(e))){if(n||p.multiple)return!1;var w=f.mapData;if(!(p.color||p.number))return!1;var A=this.parse(r,m[4]);if(!A||A.mapped)return!1;var k=this.parse(r,m[5]);if(!k||k.mapped)return!1;if(A.pfValue===k.pfValue||A.strValue===k.strValue)return rt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+A.strValue+"`"),this.parse(r,A.strValue);if(p.color){var B=A.value,R=k.value,z=B[0]===R[0]&&B[1]===R[1]&&B[2]===R[2]&&(B[3]===R[3]||(B[3]==null||B[3]===1)&&(R[3]==null||R[3]===1));if(z)return!1}return{name:r,value:m,strValue:""+e,mapped:w,field:m[1],fieldMin:parseFloat(m[2]),fieldMax:parseFloat(m[3]),valueMin:A.value,valueMax:k.value,bypass:n}}}if(p.multiple&&i!=="multiple"){var $;if(h?$=e.split(/\s+/):at(e)?$=e:$=[e],p.evenMultiple&&$.length%2!=0)return null;for(var H=[],X=[],ee=[],_="",te=!1,q=0;q<$.length;q++){var ae=o.parse(r,$[q],n,"multiple");te=te||Fe(ae.value),H.push(ae.value),ee.push(ae.pfValue!=null?ae.pfValue:ae.value),X.push(ae.units),_+=(q>0?" ":"")+ae.strValue}return p.validate&&!p.validate(H,X)?null:p.singleEnum&&te?H.length===1&&Fe(H[0])?{name:r,value:H[0],strValue:H[0],bypass:n}:null:{name:r,value:H,pfValue:ee,strValue:_,bypass:n,units:X}}var ne=function(){for(var Pe=0;Pe<p.enums.length;Pe++){var De=p.enums[Pe];if(De===e)return{name:r,value:e,strValue:""+e,bypass:n}}return null};if(p.number){var re,oe="px";if(p.units&&(re=p.units),p.implicitUnits&&(oe=p.implicitUnits),!p.unitless)if(h){var ie="px|em"+(p.allowPercent?"|\\%":"");re&&(ie=re);var ve=e.match("^("+mt+")("+ie+")?$");ve&&(e=ve[1],re=ve[2]||oe)}else(!re||p.implicitUnits)&&(re=oe);if(e=parseFloat(e),isNaN(e)&&p.enums===void 0)return null;if(isNaN(e)&&p.enums!==void 0)return e=l,ne();if(p.integer&&!Qh(e)||p.min!==void 0&&(e<p.min||p.strictMin&&e===p.min)||p.max!==void 0&&(e>p.max||p.strictMax&&e===p.max))return null;var le={name:r,value:e,strValue:""+e+(re||""),units:re,bypass:n};return p.unitless||re!=="px"&&re!=="em"?le.pfValue=e:le.pfValue=re==="px"||!re?e:this.getEmSizeInPixels()*e,(re==="ms"||re==="s")&&(le.pfValue=re==="ms"?e:1e3*e),(re==="deg"||re==="rad")&&(le.pfValue=re==="rad"?e:Yv(e)),re==="%"&&(le.pfValue=e/100),le}else if(p.propList){var he=[],se=""+e;if(se!=="none"){for(var ce=se.split(/\s*,\s*|\s+/),be=0;be<ce.length;be++){var de=ce[be].trim();o.properties[de]?he.push(de):rt("`"+de+"` is not a valid property name")}if(he.length===0)return null}return{name:r,value:he,strValue:he.length===0?"none":he.join(" "),bypass:n}}else if(p.color){var xe=pv(e);return xe?{name:r,value:xe,pfValue:xe,strValue:"rgb("+xe[0]+","+xe[1]+","+xe[2]+")",bypass:n}:null}else if(p.regex||p.regexes){if(p.enums){var Ce=ne();if(Ce)return Ce}for(var Te=p.regexes?p.regexes:[p.regex],Se=0;Se<Te.length;Se++){var me=new RegExp(Te[Se]),ue=me.exec(e);if(ue)return{name:r,value:p.singleRegexMatchValue?ue[1]:ue,strValue:""+e,bypass:n}}return null}else return p.string?{name:r,value:""+e,strValue:""+e,bypass:n}:p.enums?ne():null};var Mt=function r(e){if(!(this instanceof r))return new r(e);if(!No(e)){pt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Rt=Mt.prototype;Rt.instanceString=function(){return"style"};Rt.clear=function(){for(var r=this._private,e=r.cy,n=e.elements(),i=0;i<this.length;i++)this[i]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(n,!0),n.forEach(function(o){var s=o[0]._private;s.styleDirty=!0,s.appliedInitStyle=!1}),this};Rt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Rt.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Rt.selector=function(r){var e=r==="core"?null:new Fr(r),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this};Rt.css=function(){var r=this,e=arguments;if(e.length===1)for(var n=e[0],i=0;i<r.properties.length;i++){var o=r.properties[i],s=n[o.name];s===void 0&&(s=n[Ti(o.name)]),s!==void 0&&this.cssRule(o.name,s)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Rt.style=Rt.css;Rt.cssRule=function(r,e){var n=this.parse(r,e);if(n){var i=this.length-1;this[i].properties.push(n),this[i].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[i].mappedProperties.push(n);var o=!this[i].selector;o&&(this._private.coreStyle[n.name]=n)}return this};Rt.append=function(r){return bl(r)?r.appendToStyle(this):at(r)?this.appendFromJson(r):Fe(r)&&this.appendFromString(r),this};Mt.fromJson=function(r,e){var n=new Mt(r);return n.fromJson(e),n};Mt.fromString=function(r,e){return new Mt(r).fromString(e)};[Bt,ei,fs,cr,eo,hs,Tt,to].forEach(function(r){_e(Rt,r)});Mt.types=Rt.types;Mt.properties=Rt.properties;Mt.propertyGroups=Rt.propertyGroups;Mt.propertyGroupNames=Rt.propertyGroupNames;Mt.propertyGroupKeys=Rt.propertyGroupKeys;var ig={style:function(e){if(e){var n=this.setStyle(e);n.update()}return this._private.style},setStyle:function(e){var n=this._private;return bl(e)?n.style=e.generateStyle(this):at(e)?n.style=Mt.fromJson(this,e):Fe(e)?n.style=Mt.fromString(this,e):n.style=Mt(this),n.style},updateStyle:function(){this.mutableElements().updateStyle()}},og="single",an={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var n=this._private;if(n.selectionType==null&&(n.selectionType=og),e!==void 0)(e==="additive"||e==="single")&&(n.selectionType=e);else return n.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,n=this._private.pan,i,o,s,l,f;switch(e.length){case 0:return n;case 1:if(Fe(e[0]))return i=e[0],n[i];if(je(e[0])){if(!this._private.panningEnabled)return this;s=e[0],l=s.x,f=s.y,Ae(l)&&(n.x=l),Ae(f)&&(n.y=f),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;i=e[0],o=e[1],(i==="x"||i==="y")&&Ae(o)&&(n[i]=o),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,n){var i=arguments,o=this._private.pan,s,l,f,h,p;if(!this._private.panningEnabled)return this;switch(i.length){case 1:je(e)&&(f=i[0],h=f.x,p=f.y,Ae(h)&&(o.x+=h),Ae(p)&&(o.y+=p),this.emit("pan viewport"));break;case 2:s=e,l=n,(s==="x"||s==="y")&&Ae(l)&&(o[s]+=l),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,n){var i=this.getFitViewport(e,n);if(i){var o=this._private;o.zoom=i.zoom,o.pan=i.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,n){if(Ae(e)&&n===void 0&&(n=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var i;if(Fe(e)){var o=e;e=this.$(o)}else if(tv(e)){var s=e;i={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2},i.w=i.x2-i.x1,i.h=i.y2-i.y1}else Wt(e)||(e=this.mutableElements());if(!(Wt(e)&&e.empty())){i=i||e.boundingBox();var l=this.width(),f=this.height(),h;if(n=Ae(n)?n:0,!isNaN(l)&&!isNaN(f)&&l>0&&f>0&&!isNaN(i.w)&&!isNaN(i.h)&&i.w>0&&i.h>0){h=Math.min((l-2*n)/i.w,(f-2*n)/i.h),h=h>this._private.maxZoom?this._private.maxZoom:h,h=h<this._private.minZoom?this._private.minZoom:h;var p={x:(l-h*(i.x1+i.x2))/2,y:(f-h*(i.y1+i.y2))/2};return{zoom:h,pan:p}}}}},zoomRange:function(e,n){var i=this._private;if(n==null){var o=e;e=o.min,n=o.max}return Ae(e)&&Ae(n)&&e<=n?(i.minZoom=e,i.maxZoom=n):Ae(e)&&n===void 0&&e<=i.maxZoom?i.minZoom=e:Ae(n)&&e===void 0&&n>=i.minZoom&&(i.maxZoom=n),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var n=this._private,i=n.pan,o=n.zoom,s,l,f=!1;if(n.zoomingEnabled||(f=!0),Ae(e)?l=e:je(e)&&(l=e.level,e.position!=null?s=Bi(e.position,o,i):e.renderedPosition!=null&&(s=e.renderedPosition),s!=null&&!n.panningEnabled&&(f=!0)),l=l>n.maxZoom?n.maxZoom:l,l=l<n.minZoom?n.minZoom:l,f||!Ae(l)||l===o||s!=null&&(!Ae(s.x)||!Ae(s.y)))return null;if(s!=null){var h=i,p=o,g=l,m={x:-g/p*(s.x-h.x)+s.x,y:-g/p*(s.y-h.y)+s.y};return{zoomed:!0,panned:!0,zoom:g,pan:m}}else return{zoomed:!0,panned:!1,zoom:l,pan:i}},zoom:function(e){if(e===void 0)return this._private.zoom;var n=this.getZoomedViewport(e),i=this._private;return n==null||!n.zoomed?this:(i.zoom=n.zoom,n.panned&&(i.pan.x=n.pan.x,i.pan.y=n.pan.y),this.emit("zoom"+(n.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var n=this._private,i=!0,o=!0,s=[],l=!1,f=!1;if(!e)return this;if(Ae(e.zoom)||(i=!1),je(e.pan)||(o=!1),!i&&!o)return this;if(i){var h=e.zoom;h<n.minZoom||h>n.maxZoom||!n.zoomingEnabled?l=!0:(n.zoom=h,s.push("zoom"))}if(o&&(!l||!e.cancelOnFailedZoom)&&n.panningEnabled){var p=e.pan;Ae(p.x)&&(n.pan.x=p.x,f=!1),Ae(p.y)&&(n.pan.y=p.y,f=!1),f||s.push("pan")}return s.length>0&&(s.push("viewport"),this.emit(s.join(" ")),this.notify("viewport")),this},center:function(e){var n=this.getCenterPan(e);return n&&(this._private.pan=n,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,n){if(!!this._private.panningEnabled){if(Fe(e)){var i=e;e=this.mutableElements().filter(i)}else Wt(e)||(e=this.mutableElements());if(e.length!==0){var o=e.boundingBox(),s=this.width(),l=this.height();n=n===void 0?this._private.zoom:n;var f={x:(s-n*(o.x1+o.x2))/2,y:(l-n*(o.y1+o.y2))/2};return f}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,n=e.container;return e.sizeCache=e.sizeCache||(n?function(){var i=ht.getComputedStyle(n),o=function(l){return parseFloat(i.getPropertyValue(l))};return{width:n.clientWidth-o("padding-left")-o("padding-right"),height:n.clientHeight-o("padding-top")-o("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,n=this._private.zoom,i=this.renderedExtent(),o={x1:(i.x1-e.x)/n,x2:(i.x2-e.x)/n,y1:(i.y1-e.y)/n,y2:(i.y2-e.y)/n};return o.w=o.x2-o.x1,o.h=o.y2-o.y1,o},renderedExtent:function(){var e=this.width(),n=this.height();return{x1:0,y1:0,x2:e,y2:n,w:e,h:n}}};an.centre=an.center;an.autolockNodes=an.autolock;an.autoungrabifyNodes=an.autoungrabify;var ti={data:et.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:et.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:et.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:et.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};ti.attr=ti.data;ti.removeAttr=ti.removeData;var ri=function(e){var n=this;e=_e({},e);var i=e.container;i&&!Si(i)&&Si(i[0])&&(i=i[0]);var o=i?i._cyreg:null;o=o||{},o&&o.cy&&(o.cy.destroy(),o={});var s=o.readies=o.readies||[];i&&(i._cyreg=o),o.cy=n;var l=ht!==void 0&&i!==void 0&&!e.headless,f=e;f.layout=_e({name:l?"grid":"null"},f.layout),f.renderer=_e({name:l?"canvas":"null"},f.renderer);var h=function(A,k,B){return k!==void 0?k:B!==void 0?B:A},p=this._private={container:i,ready:!1,options:f,elements:new St(this),listeners:[],aniEles:new St(this),data:f.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:h(!0,f.zoomingEnabled),userZoomingEnabled:h(!0,f.userZoomingEnabled),panningEnabled:h(!0,f.panningEnabled),userPanningEnabled:h(!0,f.userPanningEnabled),boxSelectionEnabled:h(!0,f.boxSelectionEnabled),autolock:h(!1,f.autolock,f.autolockNodes),autoungrabify:h(!1,f.autoungrabify,f.autoungrabifyNodes),autounselectify:h(!1,f.autounselectify),styleEnabled:f.styleEnabled===void 0?l:f.styleEnabled,zoom:Ae(f.zoom)?f.zoom:1,pan:{x:je(f.pan)&&Ae(f.pan.x)?f.pan.x:0,y:je(f.pan)&&Ae(f.pan.y)?f.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(f.selectionType),this.zoomRange({min:f.minZoom,max:f.maxZoom});var g=function(A,k){var B=A.some(rv);if(B)return Tn.all(A).then(k);k(A)};p.styleEnabled&&n.setStyle([]);var m=_e({},f,f.renderer);n.initRenderer(m);var y=function(A,k,B){n.notifications(!1);var R=n.mutableElements();R.length>0&&R.remove(),A!=null&&(je(A)||at(A))&&n.add(A),n.one("layoutready",function($){n.notifications(!0),n.emit($),n.one("load",k),n.emitAndNotify("load")}).one("layoutstop",function(){n.one("done",B),n.emit("done")});var z=_e({},n._private.options.layout);z.eles=n.elements(),n.layout(z).run()};g([f.style,f.elements],function(w){var A=w[0],k=w[1];p.styleEnabled&&n.style().append(A),y(k,function(){n.startAnimationLoop(),p.ready=!0,vt(f.ready)&&n.on("ready",f.ready);for(var B=0;B<s.length;B++){var R=s[B];n.on("ready",R)}o&&(o.readies=[]),n.emit("ready")},f.done)})},ro=ri.prototype;_e(ro,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var n=this,i=n._private,o=i.options;return!Si(e)&&Si(e[0])&&(e=e[0]),n.stopAnimationLoop(),n.destroyRenderer(),i.container=e,i.styleEnabled=!0,n.invalidateSize(),n.initRenderer(_e({},o,o.renderer,{name:o.renderer.name==="null"?"canvas":o.renderer.name})),n.startAnimationLoop(),n.style(o.style),n.emit("mount"),n}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return lr(this._private.options)},json:function(e){var n=this,i=n._private,o=n.mutableElements(),s=function(H){return n.getElementById(H.id())};if(je(e)){if(n.startBatch(),e.elements){var l={},f=function(H,X){for(var ee=[],_=[],te=0;te<H.length;te++){var q=H[te];if(!q.data.id){rt("cy.json() cannot handle elements without an ID attribute");continue}var ae=""+q.data.id,ne=n.getElementById(ae);l[ae]=!0,ne.length!==0?_.push({ele:ne,json:q}):(X&&(q.group=X),ee.push(q))}n.add(ee);for(var re=0;re<_.length;re++){var oe=_[re],ie=oe.ele,ve=oe.json;ie.json(ve)}};if(at(e.elements))f(e.elements);else for(var h=["nodes","edges"],p=0;p<h.length;p++){var g=h[p],m=e.elements[g];at(m)&&f(m,g)}var y=n.collection();o.filter(function($){return!l[$.id()]}).forEach(function($){$.isParent()?y.merge($):$.remove()}),y.forEach(function($){return $.children().move({parent:null})}),y.forEach(function($){return s($).remove()})}e.style&&n.style(e.style),e.zoom!=null&&e.zoom!==i.zoom&&n.zoom(e.zoom),e.pan&&(e.pan.x!==i.pan.x||e.pan.y!==i.pan.y)&&n.pan(e.pan),e.data&&n.data(e.data);for(var w=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],A=0;A<w.length;A++){var k=w[A];e[k]!=null&&n[k](e[k])}return n.endBatch(),this}else{var B=!!e,R={};B?R.elements=this.elements().map(function($){return $.json()}):(R.elements={},o.forEach(function($){var H=$.group();R.elements[H]||(R.elements[H]=[]),R.elements[H].push($.json())})),this._private.styleEnabled&&(R.style=n.style().json()),R.data=lr(n.data());var z=i.options;return R.zoomingEnabled=i.zoomingEnabled,R.userZoomingEnabled=i.userZoomingEnabled,R.zoom=i.zoom,R.minZoom=i.minZoom,R.maxZoom=i.maxZoom,R.panningEnabled=i.panningEnabled,R.userPanningEnabled=i.userPanningEnabled,R.pan=lr(i.pan),R.boxSelectionEnabled=i.boxSelectionEnabled,R.renderer=lr(z.renderer),R.hideEdgesOnViewport=z.hideEdgesOnViewport,R.textureOnViewport=z.textureOnViewport,R.wheelSensitivity=z.wheelSensitivity,R.motionBlur=z.motionBlur,R}}});ro.$id=ro.getElementById;[Xp,eg,Xu,us,Qi,rg,cs,Ji,ig,an,ti].forEach(function(r){_e(ro,r)});var sg={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}},On=function(e){return e.scratch("breadthfirst")},ju=function(e,n){return e.scratch("breadthfirst",n)};function Zu(r){this.options=_e({},sg,r)}Zu.prototype.run=function(){var r=this.options,e=r,n=r.cy,i=e.eles,o=i.nodes().filter(function(Me){return!Me.isParent()}),s=i,l=e.directed,f=e.maximal||e.maximalAdjustments>0,h=Vt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),p;if(Wt(e.roots))p=e.roots;else if(at(e.roots)){for(var g=[],m=0;m<e.roots.length;m++){var y=e.roots[m],w=n.getElementById(y);g.push(w)}p=n.collection(g)}else if(Fe(e.roots))p=n.$(e.roots);else if(l)p=o.roots();else{var A=i.components();p=n.collection();for(var k=function(Be){var ze=A[Be],ye=ze.maxDegree(!1),j=ze.filter(function(fe){return fe.degree(!1)===ye});p=p.add(j)},B=0;B<A.length;B++)k(B)}var R=[],z={},$=function(Be,ze){R[ze]==null&&(R[ze]=[]);var ye=R[ze].length;R[ze].push(Be),ju(Be,{index:ye,depth:ze})},H=function(Be,ze){var ye=On(Be),j=ye.depth,fe=ye.index;R[j][fe]=null,$(Be,ze)};s.bfs({roots:p,directed:e.directed,visit:function(Be,ze,ye,j,fe){var we=Be[0],pe=we.id();$(we,fe),z[pe]=!0}});for(var X=[],ee=0;ee<o.length;ee++){var _=o[ee];z[_.id()]||X.push(_)}var te=function(Be){for(var ze=R[Be],ye=0;ye<ze.length;ye++){var j=ze[ye];if(j==null){ze.splice(ye,1),ye--;continue}ju(j,{depth:Be,index:ye})}},q=function(){for(var Be=0;Be<R.length;Be++)te(Be)},ae=function(Be,ze){for(var ye=On(Be),j=Be.incomers().filter(function(ke){return ke.isNode()&&i.has(ke)}),fe=-1,we=Be.id(),pe=0;pe<j.length;pe++){var ge=j[pe],Ne=On(ge);fe=Math.max(fe,Ne.depth)}return ye.depth<=fe?ze[we]?null:(H(Be,fe+1),ze[we]=!0,!0):!1};if(l&&f){var ne=[],re={},oe=function(Be){return ne.push(Be)},ie=function(){return ne.shift()};for(o.forEach(function(Me){return ne.push(Me)});ne.length>0;){var ve=ie(),le=ae(ve,re);if(le)ve.outgoers().filter(function(Me){return Me.isNode()&&i.has(Me)}).forEach(oe);else if(le===null){rt("Detected double maximal shift for node `"+ve.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}q();var he=0;if(e.avoidOverlap)for(var se=0;se<o.length;se++){var ce=o[se],be=ce.layoutDimensions(e),de=be.w,xe=be.h;he=Math.max(he,de,xe)}for(var Ce={},Te=function(Be){if(Ce[Be.id()])return Ce[Be.id()];for(var ze=On(Be).depth,ye=Be.neighborhood(),j=0,fe=0,we=0;we<ye.length;we++){var pe=ye[we];if(!(pe.isEdge()||pe.isParent()||!o.has(pe))){var ge=On(pe);if(ge!=null){var Ne=ge.index,ke=ge.depth;if(!(Ne==null||ke==null)){var Ie=R[ke].length;ke<ze&&(j+=Ne/Ie,fe++)}}}}return fe=Math.max(1,fe),j=j/fe,fe===0&&(j=0),Ce[Be.id()]=j,j},Se=function(Be,ze){var ye=Te(Be),j=Te(ze),fe=ye-j;return fe===0?El(Be.id(),ze.id()):fe},me=0;me<R.length;me++)R[me].sort(Se),te(me);for(var ue=[],Ee=0;Ee<X.length;Ee++)ue.push(X[Ee]);R.unshift(ue),q();for(var Pe=0,De=0;De<R.length;De++)Pe=Math.max(R[De].length,Pe);var Re={x:h.x1+h.w/2,y:h.x1+h.h/2},Ge=R.reduce(function(Me,Be){return Math.max(Me,Be.length)},0),Ke=function(Be){var ze=On(Be),ye=ze.depth,j=ze.index,fe=R[ye].length,we=Math.max(h.w/((e.grid?Ge:fe)+1),he),pe=Math.max(h.h/(R.length+1),he),ge=Math.min(h.w/2/R.length,h.h/2/R.length);if(ge=Math.max(ge,he),e.circle){var ke=ge*ye+ge-(R.length>0&&R[0].length<=3?ge/2:0),Ie=2*Math.PI/R[ye].length*j;return ye===0&&R[0].length===1&&(ke=1),{x:Re.x+ke*Math.cos(Ie),y:Re.y+ke*Math.sin(Ie)}}else{var Ne={x:Re.x+(j+1-(fe+1)/2)*we,y:(ye+1)*pe};return Ne}};return i.nodes().layoutPositions(this,e,Ke),this};var lg={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Qu(r){this.options=_e({},lg,r)}Qu.prototype.run=function(){var r=this.options,e=r,n=r.cy,i=e.eles,o=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,s=i.nodes().not(":parent");e.sort&&(s=s.sort(e.sort));for(var l=Vt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),f={x:l.x1+l.w/2,y:l.y1+l.h/2},h=e.sweep===void 0?2*Math.PI-2*Math.PI/s.length:e.sweep,p=h/Math.max(1,s.length-1),g,m=0,y=0;y<s.length;y++){var w=s[y],A=w.layoutDimensions(e),k=A.w,B=A.h;m=Math.max(m,k,B)}if(Ae(e.radius)?g=e.radius:s.length<=1?g=0:g=Math.min(l.h,l.w)/2-m,s.length>1&&e.avoidOverlap){m*=1.75;var R=Math.cos(p)-Math.cos(0),z=Math.sin(p)-Math.sin(0),$=Math.sqrt(m*m/(R*R+z*z));g=Math.max($,g)}var H=function(ee,_){var te=e.startAngle+_*p*(o?1:-1),q=g*Math.cos(te),ae=g*Math.sin(te),ne={x:f.x+q,y:f.y+ae};return ne};return i.nodes().layoutPositions(this,e,H),this};var ug={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Ju(r){this.options=_e({},ug,r)}Ju.prototype.run=function(){for(var r=this.options,e=r,n=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=r.cy,o=e.eles,s=o.nodes().not(":parent"),l=Vt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),f={x:l.x1+l.w/2,y:l.y1+l.h/2},h=[],p=0,g=0;g<s.length;g++){var m=s[g],y=void 0;y=e.concentric(m),h.push({value:y,node:m}),m._private.scratch.concentric=y}s.updateStyle();for(var w=0;w<s.length;w++){var A=s[w],k=A.layoutDimensions(e);p=Math.max(p,k.w,k.h)}h.sort(function(Me,Be){return Be.value-Me.value});for(var B=e.levelWidth(s),R=[[]],z=R[0],$=0;$<h.length;$++){var H=h[$];if(z.length>0){var X=Math.abs(z[0].value-H.value);X>=B&&(z=[],R.push(z))}z.push(H)}var ee=p+e.minNodeSpacing;if(!e.avoidOverlap){var _=R.length>0&&R[0].length>1,te=Math.min(l.w,l.h)/2-ee,q=te/(R.length+_?1:0);ee=Math.min(ee,q)}for(var ae=0,ne=0;ne<R.length;ne++){var re=R[ne],oe=e.sweep===void 0?2*Math.PI-2*Math.PI/re.length:e.sweep,ie=re.dTheta=oe/Math.max(1,re.length-1);if(re.length>1&&e.avoidOverlap){var ve=Math.cos(ie)-Math.cos(0),le=Math.sin(ie)-Math.sin(0),he=Math.sqrt(ee*ee/(ve*ve+le*le));ae=Math.max(he,ae)}re.r=ae,ae+=ee}if(e.equidistant){for(var se=0,ce=0,be=0;be<R.length;be++){var de=R[be],xe=de.r-ce;se=Math.max(se,xe)}ce=0;for(var Ce=0;Ce<R.length;Ce++){var Te=R[Ce];Ce===0&&(ce=Te.r),Te.r=ce,ce+=se}}for(var Se={},me=0;me<R.length;me++)for(var ue=R[me],Ee=ue.dTheta,Pe=ue.r,De=0;De<ue.length;De++){var Re=ue[De],Ge=e.startAngle+(n?1:-1)*Ee*De,Ke={x:f.x+Pe*Math.cos(Ge),y:f.y+Pe*Math.sin(Ge)};Se[Re.node.id()]=Ke}return o.nodes().layoutPositions(this,e,function(Me){var Be=Me.id();return Se[Be]}),this};var vs,cg={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,n){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function no(r){this.options=_e({},cg,r),this.options.layout=this}no.prototype.run=function(){var r=this.options,e=r.cy,n=this;n.stopped=!1,(r.animate===!0||r.animate===!1)&&n.emit({type:"layoutstart",layout:n}),r.debug===!0?vs=!0:vs=!1;var i=fg(e,n,r);vs&&Jy(i),r.randomize&&dg(i);var o=yr(),s=function(){pg(i,e,r),r.fit===!0&&e.fit(r.padding)},l=function(y){return!(n.stopped||y>=r.numIter||(gg(i,r),i.temperature=i.temperature*r.coolingFactor,i.temperature<r.minTemp))},f=function(){if(r.animate===!0||r.animate===!1)s(),n.one("layoutstop",r.stop),n.emit({type:"layoutstop",layout:n});else{var y=r.eles.nodes(),w=ec(i,r,y);y.layoutPositions(n,r,w)}},h=0,p=!0;if(r.animate===!0){var g=function m(){for(var y=0;p&&y<r.refresh;)p=l(h),h++,y++;if(!p)rc(i,r),f();else{var w=yr();w-o>=r.animationThreshold&&s(),Di(m)}};g()}else{for(;p;)p=l(h),h++;rc(i,r),f()}return this};no.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};no.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var fg=function(e,n,i){for(var o=i.eles.edges(),s=i.eles.nodes(),l={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:s.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:o.size(),temperature:i.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:Vt(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},f=i.eles.components(),h={},p=0;p<f.length;p++)for(var g=f[p],m=0;m<g.length;m++){var y=g[m];h[y.id()]=p}for(var p=0;p<l.nodeSize;p++){var w=s[p],A=w.layoutDimensions(i),k={};k.isLocked=w.locked(),k.id=w.data("id"),k.parentId=w.data("parent"),k.cmptId=h[w.id()],k.children=[],k.positionX=w.position("x"),k.positionY=w.position("y"),k.offsetX=0,k.offsetY=0,k.height=A.w,k.width=A.h,k.maxX=k.positionX+k.width/2,k.minX=k.positionX-k.width/2,k.maxY=k.positionY+k.height/2,k.minY=k.positionY-k.height/2,k.padLeft=parseFloat(w.style("padding")),k.padRight=parseFloat(w.style("padding")),k.padTop=parseFloat(w.style("padding")),k.padBottom=parseFloat(w.style("padding")),k.nodeRepulsion=vt(i.nodeRepulsion)?i.nodeRepulsion(w):i.nodeRepulsion,l.layoutNodes.push(k),l.idToIndex[k.id]=p}for(var B=[],R=0,z=-1,$=[],p=0;p<l.nodeSize;p++){var w=l.layoutNodes[p],H=w.parentId;H!=null?l.layoutNodes[l.idToIndex[H]].children.push(w.id):(B[++z]=w.id,$.push(w.id))}for(l.graphSet.push($);R<=z;){var X=B[R++],ee=l.idToIndex[X],y=l.layoutNodes[ee],_=y.children;if(_.length>0){l.graphSet.push(_);for(var p=0;p<_.length;p++)B[++z]=_[p]}}for(var p=0;p<l.graphSet.length;p++)for(var te=l.graphSet[p],m=0;m<te.length;m++){var q=l.idToIndex[te[m]];l.indexToGraph[q]=p}for(var p=0;p<l.edgeSize;p++){var ae=o[p],ne={};ne.id=ae.data("id"),ne.sourceId=ae.data("source"),ne.targetId=ae.data("target");var re=vt(i.idealEdgeLength)?i.idealEdgeLength(ae):i.idealEdgeLength,oe=vt(i.edgeElasticity)?i.edgeElasticity(ae):i.edgeElasticity,ie=l.idToIndex[ne.sourceId],ve=l.idToIndex[ne.targetId],le=l.indexToGraph[ie],he=l.indexToGraph[ve];if(le!=he){for(var se=hg(ne.sourceId,ne.targetId,l),ce=l.graphSet[se],be=0,k=l.layoutNodes[ie];ce.indexOf(k.id)===-1;)k=l.layoutNodes[l.idToIndex[k.parentId]],be++;for(k=l.layoutNodes[ve];ce.indexOf(k.id)===-1;)k=l.layoutNodes[l.idToIndex[k.parentId]],be++;re*=be*i.nestingFactor}ne.idealLength=re,ne.elasticity=oe,l.layoutEdges.push(ne)}return l},hg=function(e,n,i){var o=vg(e,n,0,i);return 2>o.count?0:o.graph},vg=function r(e,n,i,o){var s=o.graphSet[i];if(-1<s.indexOf(e)&&-1<s.indexOf(n))return{count:2,graph:i};for(var l=0,f=0;f<s.length;f++){var h=s[f],p=o.idToIndex[h],g=o.layoutNodes[p].children;if(g.length!==0){var m=o.indexToGraph[o.idToIndex[g[0]]],y=r(e,n,m,o);if(y.count!==0)if(y.count===1){if(l++,l===2)break}else return y}}return{count:l,graph:i}},dg=function(e,n){for(var i=e.clientWidth,o=e.clientHeight,s=0;s<e.nodeSize;s++){var l=e.layoutNodes[s];l.children.length===0&&!l.isLocked&&(l.positionX=Math.random()*i,l.positionY=Math.random()*o)}},ec=function(e,n,i){var o=e.boundingBox,s={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return n.boundingBox&&(i.forEach(function(l){var f=e.layoutNodes[e.idToIndex[l.data("id")]];s.x1=Math.min(s.x1,f.positionX),s.x2=Math.max(s.x2,f.positionX),s.y1=Math.min(s.y1,f.positionY),s.y2=Math.max(s.y2,f.positionY)}),s.w=s.x2-s.x1,s.h=s.y2-s.y1),function(l,f){var h=e.layoutNodes[e.idToIndex[l.data("id")]];if(n.boundingBox){var p=(h.positionX-s.x1)/s.w,g=(h.positionY-s.y1)/s.h;return{x:o.x1+p*o.w,y:o.y1+g*o.h}}else return{x:h.positionX,y:h.positionY}}},pg=function(e,n,i){var o=i.layout,s=i.eles.nodes(),l=ec(e,i,s);s.positions(l),e.ready!==!0&&(e.ready=!0,o.one("layoutready",i.ready),o.emit({type:"layoutready",layout:this}))},gg=function(e,n,i){mg(e,n),wg(e),xg(e,n),Eg(e),kg(e)},mg=function(e,n){for(var i=0;i<e.graphSet.length;i++)for(var o=e.graphSet[i],s=o.length,l=0;l<s;l++)for(var f=e.layoutNodes[e.idToIndex[o[l]]],h=l+1;h<s;h++){var p=e.layoutNodes[e.idToIndex[o[h]]];yg(f,p,e,n)}},tc=function(e){return-e+2*e*Math.random()},yg=function(e,n,i,o){var s=e.cmptId,l=n.cmptId;if(!(s!==l&&!i.isCompound)){var f=n.positionX-e.positionX,h=n.positionY-e.positionY,p=1;f===0&&h===0&&(f=tc(p),h=tc(p));var g=bg(e,n,f,h);if(g>0)var m=o.nodeOverlap*g,y=Math.sqrt(f*f+h*h),w=m*f/y,A=m*h/y;else var k=ao(e,f,h),B=ao(n,-1*f,-1*h),R=B.x-k.x,z=B.y-k.y,$=R*R+z*z,y=Math.sqrt($),m=(e.nodeRepulsion+n.nodeRepulsion)/$,w=m*R/y,A=m*z/y;e.isLocked||(e.offsetX-=w,e.offsetY-=A),n.isLocked||(n.offsetX+=w,n.offsetY+=A)}},bg=function(e,n,i,o){if(i>0)var s=e.maxX-n.minX;else var s=n.maxX-e.minX;if(o>0)var l=e.maxY-n.minY;else var l=n.maxY-e.minY;return s>=0&&l>=0?Math.sqrt(s*s+l*l):0},ao=function(e,n,i){var o=e.positionX,s=e.positionY,l=e.height||1,f=e.width||1,h=i/n,p=l/f,g={};return n===0&&0<i||n===0&&0>i?(g.x=o,g.y=s+l/2,g):0<n&&-1*p<=h&&h<=p?(g.x=o+f/2,g.y=s+f*i/2/n,g):0>n&&-1*p<=h&&h<=p?(g.x=o-f/2,g.y=s-f*i/2/n,g):0<i&&(h<=-1*p||h>=p)?(g.x=o+l*n/2/i,g.y=s+l/2,g):(0>i&&(h<=-1*p||h>=p)&&(g.x=o-l*n/2/i,g.y=s-l/2),g)},wg=function(e,n){for(var i=0;i<e.edgeSize;i++){var o=e.layoutEdges[i],s=e.idToIndex[o.sourceId],l=e.layoutNodes[s],f=e.idToIndex[o.targetId],h=e.layoutNodes[f],p=h.positionX-l.positionX,g=h.positionY-l.positionY;if(!(p===0&&g===0)){var m=ao(l,p,g),y=ao(h,-1*p,-1*g),w=y.x-m.x,A=y.y-m.y,k=Math.sqrt(w*w+A*A),B=Math.pow(o.idealLength-k,2)/o.elasticity;if(k!==0)var R=B*w/k,z=B*A/k;else var R=0,z=0;l.isLocked||(l.offsetX+=R,l.offsetY+=z),h.isLocked||(h.offsetX-=R,h.offsetY-=z)}}},xg=function(e,n){for(var i=1,o=0;o<e.graphSet.length;o++){var s=e.graphSet[o],l=s.length;if(o===0)var f=e.clientHeight/2,h=e.clientWidth/2;else var p=e.layoutNodes[e.idToIndex[s[0]]],g=e.layoutNodes[e.idToIndex[p.parentId]],f=g.positionX,h=g.positionY;for(var m=0;m<l;m++){var y=e.layoutNodes[e.idToIndex[s[m]]];if(!y.isLocked){var w=f-y.positionX,A=h-y.positionY,k=Math.sqrt(w*w+A*A);if(k>i){var B=n.gravity*w/k,R=n.gravity*A/k;y.offsetX+=B,y.offsetY+=R}}}}},Eg=function(e,n){var i=[],o=0,s=-1;for(i.push.apply(i,e.graphSet[0]),s+=e.graphSet[0].length;o<=s;){var l=i[o++],f=e.idToIndex[l],h=e.layoutNodes[f],p=h.children;if(0<p.length&&!h.isLocked){for(var g=h.offsetX,m=h.offsetY,y=0;y<p.length;y++){var w=e.layoutNodes[e.idToIndex[p[y]]];w.offsetX+=g,w.offsetY+=m,i[++s]=p[y]}h.offsetX=0,h.offsetY=0}}},kg=function(e,n){for(var i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0<o.children.length&&(o.maxX=void 0,o.minX=void 0,o.maxY=void 0,o.minY=void 0)}for(var i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];if(!(0<o.children.length||o.isLocked)){var s=Cg(o.offsetX,o.offsetY,e.temperature);o.positionX+=s.x,o.positionY+=s.y,o.offsetX=0,o.offsetY=0,o.minX=o.positionX-o.width,o.maxX=o.positionX+o.width,o.minY=o.positionY-o.height,o.maxY=o.positionY+o.height,Sg(o,e)}}for(var i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0<o.children.length&&!o.isLocked&&(o.positionX=(o.maxX+o.minX)/2,o.positionY=(o.maxY+o.minY)/2,o.width=o.maxX-o.minX,o.height=o.maxY-o.minY)}},Cg=function(e,n,i){var o=Math.sqrt(e*e+n*n);if(o>i)var s={x:i*e/o,y:i*n/o};else var s={x:e,y:n};return s},Sg=function r(e,n){var i=e.parentId;if(i!=null){var o=n.layoutNodes[n.idToIndex[i]],s=!1;if((o.maxX==null||e.maxX+o.padRight>o.maxX)&&(o.maxX=e.maxX+o.padRight,s=!0),(o.minX==null||e.minX-o.padLeft<o.minX)&&(o.minX=e.minX-o.padLeft,s=!0),(o.maxY==null||e.maxY+o.padBottom>o.maxY)&&(o.maxY=e.maxY+o.padBottom,s=!0),(o.minY==null||e.minY-o.padTop<o.minY)&&(o.minY=e.minY-o.padTop,s=!0),s)return r(o,n)}},rc=function(e,n){for(var i=e.layoutNodes,o=[],s=0;s<i.length;s++){var l=i[s],f=l.cmptId,h=o[f]=o[f]||[];h.push(l)}for(var p=0,s=0;s<o.length;s++){var g=o[s];if(!!g){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var m=0;m<g.length;m++){var y=g[m];g.x1=Math.min(g.x1,y.positionX-y.width/2),g.x2=Math.max(g.x2,y.positionX+y.width/2),g.y1=Math.min(g.y1,y.positionY-y.height/2),g.y2=Math.max(g.y2,y.positionY+y.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,p+=g.w*g.h}}o.sort(function(z,$){return $.w*$.h-z.w*z.h});for(var w=0,A=0,k=0,B=0,R=Math.sqrt(p)*e.clientWidth/e.clientHeight,s=0;s<o.length;s++){var g=o[s];if(!!g){for(var m=0;m<g.length;m++){var y=g[m];y.isLocked||(y.positionX+=w-g.x1,y.positionY+=A-g.y1)}w+=g.w+n.componentSpacing,k+=g.w+n.componentSpacing,B=Math.max(B,g.h),k>R&&(A+=B+n.componentSpacing,w=0,k=0,B=0)}}},Tg={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function nc(r){this.options=_e({},Tg,r)}nc.prototype.run=function(){var r=this.options,e=r,n=r.cy,i=e.eles,o=i.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));var s=Vt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(s.h===0||s.w===0)i.nodes().layoutPositions(this,e,function(Ce){return{x:s.x1,y:s.y1}});else{var l=o.size(),f=Math.sqrt(l*s.h/s.w),h=Math.round(f),p=Math.round(s.w/s.h*f),g=function(Te){if(Te==null)return Math.min(h,p);var Se=Math.min(h,p);Se==h?h=Te:p=Te},m=function(Te){if(Te==null)return Math.max(h,p);var Se=Math.max(h,p);Se==h?h=Te:p=Te},y=e.rows,w=e.cols!=null?e.cols:e.columns;if(y!=null&&w!=null)h=y,p=w;else if(y!=null&&w==null)h=y,p=Math.ceil(l/h);else if(y==null&&w!=null)p=w,h=Math.ceil(l/p);else if(p*h>l){var A=g(),k=m();(A-1)*k>=l?g(A-1):(k-1)*A>=l&&m(k-1)}else for(;p*h<l;){var B=g(),R=m();(R+1)*B>=l?m(R+1):g(B+1)}var z=s.w/p,$=s.h/h;if(e.condense&&(z=0,$=0),e.avoidOverlap)for(var H=0;H<o.length;H++){var X=o[H],ee=X._private.position;(ee.x==null||ee.y==null)&&(ee.x=0,ee.y=0);var _=X.layoutDimensions(e),te=e.avoidOverlapPadding,q=_.w+te,ae=_.h+te;z=Math.max(z,q),$=Math.max($,ae)}for(var ne={},re=function(Te,Se){return!!ne["c-"+Te+"-"+Se]},oe=function(Te,Se){ne["c-"+Te+"-"+Se]=!0},ie=0,ve=0,le=function(){ve++,ve>=p&&(ve=0,ie++)},he={},se=0;se<o.length;se++){var ce=o[se],be=e.position(ce);if(be&&(be.row!==void 0||be.col!==void 0)){var de={row:be.row,col:be.col};if(de.col===void 0)for(de.col=0;re(de.row,de.col);)de.col++;else if(de.row===void 0)for(de.row=0;re(de.row,de.col);)de.row++;he[ce.id()]=de,oe(de.row,de.col)}}var xe=function(Te,Se){var me,ue;if(Te.locked()||Te.isParent())return!1;var Ee=he[Te.id()];if(Ee)me=Ee.col*z+z/2+s.x1,ue=Ee.row*$+$/2+s.y1;else{for(;re(ie,ve);)le();me=ve*z+z/2+s.x1,ue=ie*$+$/2+s.y1,oe(ie,ve),le()}return{x:me,y:ue}};o.layoutPositions(this,e,xe)}return this};var Dg={ready:function(){},stop:function(){}};function ds(r){this.options=_e({},Dg,r)}ds.prototype.run=function(){var r=this.options,e=r.eles,n=this,i=r.cy;return n.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",r.ready),n.emit("layoutready"),n.one("layoutstop",r.stop),n.emit("layoutstop"),this};ds.prototype.stop=function(){return this};var Pg={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function ac(r){this.options=_e({},Pg,r)}ac.prototype.run=function(){var r=this.options,e=r.eles,n=e.nodes(),i=vt(r.positions);function o(s){if(r.positions==null)return Hv(s.position());if(i)return r.positions(s);var l=r.positions[s._private.data.id];return l??null}return n.layoutPositions(this,r,function(s,l){var f=o(s);return s.locked()||f==null?!1:f}),this};var Ag={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function ic(r){this.options=_e({},Ag,r)}ic.prototype.run=function(){var r=this.options,e=r.cy,n=r.eles,i=Vt(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o=function(l,f){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return n.nodes().layoutPositions(this,r,o),this};var Lg=[{name:"breadthfirst",impl:Zu},{name:"circle",impl:Qu},{name:"concentric",impl:Ju},{name:"cose",impl:no},{name:"grid",impl:nc},{name:"null",impl:ds},{name:"preset",impl:ac},{name:"random",impl:ic}];function oc(r){this.options=r,this.notifications=0}var sc=function(){},lc=function(){throw new Error("A headless instance can not render images")};oc.prototype={recalculateRenderedStyle:sc,notify:function(){this.notifications++},init:sc,isHeadless:function(){return!0},png:lc,jpg:lc};var ps={};ps.arrowShapeWidth=.3;ps.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,n=function(p,g,m,y,w,A,k){var B=w.x-m/2-k,R=w.x+m/2+k,z=w.y-m/2-k,$=w.y+m/2+k,H=B<=p&&p<=R&&z<=g&&g<=$;return H},i=function(p,g,m,y,w){var A=p*Math.cos(y)-g*Math.sin(y),k=p*Math.sin(y)+g*Math.cos(y),B=A*m,R=k*m,z=B+w.x,$=R+w.y;return{x:z,y:$}},o=function(p,g,m,y){for(var w=[],A=0;A<p.length;A+=2){var k=p[A],B=p[A+1];w.push(i(k,B,g,m,y))}return w},s=function(p){for(var g=[],m=0;m<p.length;m++){var y=p[m];g.push(y.x,y.y)}return g},l=function(p){return p.pstyle("width").pfValue*p.pstyle("arrow-scale").pfValue*2},f=function(p,g){Fe(g)&&(g=r[g]),r[p]=_e({name:p,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(y,w,A,k,B,R){var z=s(o(this.points,A+2*R,k,B)),$=Ht(y,w,z);return $},roughCollide:n,draw:function(y,w,A,k){var B=o(this.points,w,A,k);e.arrowShapeImpl("polygon")(y,B)},spacing:function(y){return 0},gap:l},g)};f("none",{collide:Ai,roughCollide:Ai,draw:Vo,spacing:Bl,gap:Bl}),f("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),f("arrow","triangle"),f("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(p,g,m,y,w){var A=o(this.points,g,m,y),k=this.controlPoint,B=i(k[0],k[1],g,m,y);e.arrowShapeImpl(this.name)(p,A,B)},gap:function(p){return l(p)*.8}}),f("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(p,g,m,y,w,A,k){var B=s(o(this.points,m+2*k,y,w)),R=s(o(this.pointsTee,m+2*k,y,w)),z=Ht(p,g,B)||Ht(p,g,R);return z},draw:function(p,g,m,y,w){var A=o(this.points,g,m,y),k=o(this.pointsTee,g,m,y);e.arrowShapeImpl(this.name)(p,A,k)}}),f("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(p,g,m,y,w,A,k){var B=w,R=Math.pow(B.x-p,2)+Math.pow(B.y-g,2)<=Math.pow((m+2*k)*this.radius,2),z=s(o(this.points,m+2*k,y,w));return Ht(p,g,z)||R},draw:function(p,g,m,y,w){var A=o(this.pointsTr,g,m,y);e.arrowShapeImpl(this.name)(p,A,y.x,y.y,this.radius*g)},spacing:function(p){return e.getArrowWidth(p.pstyle("width").pfValue,p.pstyle("arrow-scale").value)*this.radius}}),f("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(p,g){var m=this.baseCrossLinePts.slice(),y=g/p,w=3,A=5;return m[w]=m[w]-y,m[A]=m[A]-y,m},collide:function(p,g,m,y,w,A,k){var B=s(o(this.points,m+2*k,y,w)),R=s(o(this.crossLinePts(m,A),m+2*k,y,w)),z=Ht(p,g,B)||Ht(p,g,R);return z},draw:function(p,g,m,y,w){var A=o(this.points,g,m,y),k=o(this.crossLinePts(g,w),g,m,y);e.arrowShapeImpl(this.name)(p,A,k)}}),f("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(p){return l(p)*.525}}),f("circle",{radius:.15,collide:function(p,g,m,y,w,A,k){var B=w,R=Math.pow(B.x-p,2)+Math.pow(B.y-g,2)<=Math.pow((m+2*k)*this.radius,2);return R},draw:function(p,g,m,y,w){e.arrowShapeImpl(this.name)(p,y.x,y.y,this.radius*g)},spacing:function(p){return e.getArrowWidth(p.pstyle("width").pfValue,p.pstyle("arrow-scale").value)*this.radius}}),f("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(p){return 1},gap:function(p){return 1}}),f("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),f("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(p){return p.pstyle("width").pfValue*p.pstyle("arrow-scale").value}}),f("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(p){return .95*p.pstyle("width").pfValue*p.pstyle("arrow-scale").value}})};var on={};on.projectIntoViewport=function(r,e){var n=this.cy,i=this.findContainerClientCoords(),o=i[0],s=i[1],l=i[4],f=n.pan(),h=n.zoom(),p=((r-o)/l-f.x)/h,g=((e-s)/l-f.y)/h;return[p,g]};on.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),n=ht.getComputedStyle(r),i=function(R){return parseFloat(n.getPropertyValue(R))},o={left:i("padding-left"),right:i("padding-right"),top:i("padding-top"),bottom:i("padding-bottom")},s={left:i("border-left-width"),right:i("border-right-width"),top:i("border-top-width"),bottom:i("border-bottom-width")},l=r.clientWidth,f=r.clientHeight,h=o.left+o.right,p=o.top+o.bottom,g=s.left+s.right,m=e.width/(l+g),y=l-h,w=f-p,A=e.left+o.left+s.left,k=e.top+o.top+s.top;return this.containerBB=[A,k,y,w,m]};on.invalidateContainerClientCoordsCache=function(){this.containerBB=null};on.findNearestElement=function(r,e,n,i){return this.findNearestElements(r,e,n,i)[0]};on.findNearestElements=function(r,e,n,i){var o=this,s=this,l=s.getCachedZSortedEles(),f=[],h=s.cy.zoom(),p=s.cy.hasCompoundNodes(),g=(i?24:8)/h,m=(i?8:2)/h,y=(i?8:2)/h,w=1/0,A,k;n&&(l=l.interactive);function B(_,te){if(_.isNode()){if(k)return;k=_,f.push(_)}if(_.isEdge()&&(te==null||te<w))if(A){if(A.pstyle("z-compound-depth").value===_.pstyle("z-compound-depth").value&&A.pstyle("z-compound-depth").value===_.pstyle("z-compound-depth").value){for(var q=0;q<f.length;q++)if(f[q].isEdge()){f[q]=_,A=_,w=te??w;break}}}else f.push(_),A=_,w=te??w}function R(_){var te=_.outerWidth()+2*m,q=_.outerHeight()+2*m,ae=te/2,ne=q/2,re=_.position();if(re.x-ae<=r&&r<=re.x+ae&&re.y-ne<=e&&e<=re.y+ne){var oe=s.nodeShapes[o.getNodeShape(_)];if(oe.checkPoint(r,e,0,te,q,re.x,re.y))return B(_,0),!0}}function z(_){var te=_._private,q=te.rscratch,ae=_.pstyle("width").pfValue,ne=_.pstyle("arrow-scale").value,re=ae/2+g,oe=re*re,ie=re*2,ve=te.source,le=te.target,he;if(q.edgeType==="segments"||q.edgeType==="straight"||q.edgeType==="haystack"){for(var se=q.allpts,ce=0;ce+3<se.length;ce+=2)if(td(r,e,se[ce],se[ce+1],se[ce+2],se[ce+3],ie)&&oe>(he=od(r,e,se[ce],se[ce+1],se[ce+2],se[ce+3])))return B(_,he),!0}else if(q.edgeType==="bezier"||q.edgeType==="multibezier"||q.edgeType==="self"||q.edgeType==="compound"){for(var se=q.allpts,ce=0;ce+5<q.allpts.length;ce+=4)if(rd(r,e,se[ce],se[ce+1],se[ce+2],se[ce+3],se[ce+4],se[ce+5],ie)&&oe>(he=id(r,e,se[ce],se[ce+1],se[ce+2],se[ce+3],se[ce+4],se[ce+5])))return B(_,he),!0}for(var ve=ve||te.source,le=le||te.target,be=o.getArrowWidth(ae,ne),de=[{name:"source",x:q.arrowStartX,y:q.arrowStartY,angle:q.srcArrowAngle},{name:"target",x:q.arrowEndX,y:q.arrowEndY,angle:q.tgtArrowAngle},{name:"mid-source",x:q.midX,y:q.midY,angle:q.midsrcArrowAngle},{name:"mid-target",x:q.midX,y:q.midY,angle:q.midtgtArrowAngle}],ce=0;ce<de.length;ce++){var xe=de[ce],Ce=s.arrowShapes[_.pstyle(xe.name+"-arrow-shape").value],Te=_.pstyle("width").pfValue;if(Ce.roughCollide(r,e,be,xe.angle,{x:xe.x,y:xe.y},Te,g)&&Ce.collide(r,e,be,xe.angle,{x:xe.x,y:xe.y},Te,g))return B(_),!0}p&&f.length>0&&(R(ve),R(le))}function $(_,te,q){return nr(_,te,q)}function H(_,te){var q=_._private,ae=y,ne;te?ne=te+"-":ne="",_.boundingBox();var re=q.labelBounds[te||"main"],oe=_.pstyle(ne+"label").value,ie=_.pstyle("text-events").strValue==="yes";if(!(!ie||!oe)){var ve=$(q.rscratch,"labelX",te),le=$(q.rscratch,"labelY",te),he=$(q.rscratch,"labelAngle",te),se=_.pstyle(ne+"text-margin-x").pfValue,ce=_.pstyle(ne+"text-margin-y").pfValue,be=re.x1-ae-se,de=re.x2+ae-se,xe=re.y1-ae-ce,Ce=re.y2+ae-ce;if(he){var Te=Math.cos(he),Se=Math.sin(he),me=function(Ke,Me){return Ke=Ke-ve,Me=Me-le,{x:Ke*Te-Me*Se+ve,y:Ke*Se+Me*Te+le}},ue=me(be,xe),Ee=me(be,Ce),Pe=me(de,xe),De=me(de,Ce),Re=[ue.x+se,ue.y+ce,Pe.x+se,Pe.y+ce,De.x+se,De.y+ce,Ee.x+se,Ee.y+ce];if(Ht(r,e,Re))return B(_),!0}else if(En(re,r,e))return B(_),!0}}for(var X=l.length-1;X>=0;X--){var ee=l[X];ee.isNode()?R(ee)||H(ee):z(ee)||H(ee)||H(ee,"source")||H(ee,"target")}return f};on.getAllInBox=function(r,e,n,i){var o=this.getCachedZSortedEles().interactive,s=[],l=Math.min(r,n),f=Math.max(r,n),h=Math.min(e,i),p=Math.max(e,i);r=l,n=f,e=h,i=p;for(var g=Vt({x1:r,y1:e,x2:n,y2:i}),m=0;m<o.length;m++){var y=o[m];if(y.isNode()){var w=y,A=w.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Wo(g,A)&&!$l(A,g)&&s.push(w)}else{var k=y,B=k._private,R=B.rscratch;if(R.startX!=null&&R.startY!=null&&!En(g,R.startX,R.startY)||R.endX!=null&&R.endY!=null&&!En(g,R.endX,R.endY))continue;if(R.edgeType==="bezier"||R.edgeType==="multibezier"||R.edgeType==="self"||R.edgeType==="compound"||R.edgeType==="segments"||R.edgeType==="haystack"){for(var z=B.rstyle.bezierPts||B.rstyle.linePts||B.rstyle.haystackPts,$=!0,H=0;H<z.length;H++)if(!ed(g,z[H])){$=!1;break}$&&s.push(k)}else(R.edgeType==="haystack"||R.edgeType==="straight")&&s.push(k)}}return s};var io={};io.calculateArrowAngles=function(r){var e=r._private.rscratch,n=e.edgeType==="haystack",i=e.edgeType==="bezier",o=e.edgeType==="multibezier",s=e.edgeType==="segments",l=e.edgeType==="compound",f=e.edgeType==="self",h,p,g,m,y,w,A,k;if(n?(g=e.haystackPts[0],m=e.haystackPts[1],y=e.haystackPts[2],w=e.haystackPts[3]):(g=e.arrowStartX,m=e.arrowStartY,y=e.arrowEndX,w=e.arrowEndY),A=e.midX,k=e.midY,s)h=g-e.segpts[0],p=m-e.segpts[1];else if(o||l||f||i){var B=e.allpts,R=bt(B[0],B[2],B[4],.1),z=bt(B[1],B[3],B[5],.1);h=g-R,p=m-z}else h=g-A,p=m-k;e.srcArrowAngle=Mi(h,p);var A=e.midX,k=e.midY;if(n&&(A=(g+y)/2,k=(m+w)/2),h=y-g,p=w-m,s){var B=e.allpts;if(B.length/2%2==0){var $=B.length/2,H=$-2;h=B[$]-B[H],p=B[$+1]-B[H+1]}else{var $=B.length/2-1,H=$-2,X=$+2;h=B[$]-B[H],p=B[$+1]-B[H+1]}}else if(o||l||f){var B=e.allpts,ee=e.ctrlpts,_,te,q,ae;if(ee.length/2%2==0){var ne=B.length/2-1,re=ne+2,oe=re+2;_=bt(B[ne],B[re],B[oe],0),te=bt(B[ne+1],B[re+1],B[oe+1],0),q=bt(B[ne],B[re],B[oe],1e-4),ae=bt(B[ne+1],B[re+1],B[oe+1],1e-4)}else{var re=B.length/2-1,ne=re-2,oe=re+2;_=bt(B[ne],B[re],B[oe],.4999),te=bt(B[ne+1],B[re+1],B[oe+1],.4999),q=bt(B[ne],B[re],B[oe],.5),ae=bt(B[ne+1],B[re+1],B[oe+1],.5)}h=q-_,p=ae-te}if(e.midtgtArrowAngle=Mi(h,p),e.midDispX=h,e.midDispY=p,h*=-1,p*=-1,s){var B=e.allpts;if(B.length/2%2!=0){var $=B.length/2-1,X=$+2;h=-(B[X]-B[$]),p=-(B[X+1]-B[$+1])}}if(e.midsrcArrowAngle=Mi(h,p),s)h=y-e.segpts[e.segpts.length-2],p=w-e.segpts[e.segpts.length-1];else if(o||l||f||i){var B=e.allpts,ie=B.length,R=bt(B[ie-6],B[ie-4],B[ie-2],.9),z=bt(B[ie-5],B[ie-3],B[ie-1],.9);h=y-R,p=w-z}else h=y-A,p=w-k;e.tgtArrowAngle=Mi(h,p)};io.getArrowWidth=io.getArrowHeight=function(r,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},i=n[r+", "+e];return i||(i=Math.max(Math.pow(r*13.37,.9),29)*e,n[r+", "+e]=i,i)};var Nt={};Nt.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var n=r[e],i=n._private,o=i.rscratch;if(!o.haystack){var s=Math.random()*2*Math.PI;o.source={x:Math.cos(s),y:Math.sin(s)},s=Math.random()*2*Math.PI,o.target={x:Math.cos(s),y:Math.sin(s)}}var l=i.source,f=i.target,h=l.position(),p=f.position(),g=l.width(),m=f.width(),y=l.height(),w=f.height(),A=n.pstyle("haystack-radius").value,k=A/2;o.haystackPts=o.allpts=[o.source.x*g*k+h.x,o.source.y*y*k+h.y,o.target.x*m*k+p.x,o.target.y*w*k+p.y],o.midX=(o.allpts[0]+o.allpts[2])/2,o.midY=(o.allpts[1]+o.allpts[3])/2,o.edgeType="haystack",o.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};Nt.findSegmentsPoints=function(r,e){var n=r._private.rscratch,i=e.posPts,o=e.intersectionPts,s=e.vectorNormInverse,l=r.pstyle("edge-distances").value,f=r.pstyle("segment-weights"),h=r.pstyle("segment-distances"),p=Math.min(f.pfValue.length,h.pfValue.length);n.edgeType="segments",n.segpts=[];for(var g=0;g<p;g++){var m=f.pfValue[g],y=h.pfValue[g],w=1-m,A=m,k=l==="node-position"?i:o,B={x:k.x1*w+k.x2*A,y:k.y1*w+k.y2*A};n.segpts.push(B.x+s.x*y,B.y+s.y*y)}};Nt.findLoopPoints=function(r,e,n,i){var o=r._private.rscratch,s=e.dirCounts,l=e.srcPos,f=r.pstyle("control-point-distances"),h=f?f.pfValue[0]:void 0,p=r.pstyle("loop-direction").pfValue,g=r.pstyle("loop-sweep").pfValue,m=r.pstyle("control-point-step-size").pfValue;o.edgeType="self";var y=n,w=m;i&&(y=0,w=h);var A=p-Math.PI/2,k=A-g/2,B=A+g/2,R=String(p+"_"+g);y=s[R]===void 0?s[R]=0:++s[R],o.ctrlpts=[l.x+Math.cos(k)*1.4*w*(y/3+1),l.y+Math.sin(k)*1.4*w*(y/3+1),l.x+Math.cos(B)*1.4*w*(y/3+1),l.y+Math.sin(B)*1.4*w*(y/3+1)]};Nt.findCompoundLoopPoints=function(r,e,n,i){var o=r._private.rscratch;o.edgeType="compound";var s=e.srcPos,l=e.tgtPos,f=e.srcW,h=e.srcH,p=e.tgtW,g=e.tgtH,m=r.pstyle("control-point-step-size").pfValue,y=r.pstyle("control-point-distances"),w=y?y.pfValue[0]:void 0,A=n,k=m;i&&(A=0,k=w);var B=50,R={x:s.x-f/2,y:s.y-h/2},z={x:l.x-p/2,y:l.y-g/2},$={x:Math.min(R.x,z.x),y:Math.min(R.y,z.y)},H=.5,X=Math.max(H,Math.log(f*.01)),ee=Math.max(H,Math.log(p*.01));o.ctrlpts=[$.x,$.y-(1+Math.pow(B,1.12)/100)*k*(A/3+1)*X,$.x-(1+Math.pow(B,1.12)/100)*k*(A/3+1)*ee,$.y]};Nt.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Nt.findBezierPoints=function(r,e,n,i,o){var s=r._private.rscratch,l=e.vectorNormInverse,f=e.posPts,h=e.intersectionPts,p=r.pstyle("edge-distances").value,g=r.pstyle("control-point-step-size").pfValue,m=r.pstyle("control-point-distances"),y=r.pstyle("control-point-weights"),w=m&&y?Math.min(m.value.length,y.value.length):1,A=m?m.pfValue[0]:void 0,k=y.value[0],B=i;s.edgeType=B?"multibezier":"bezier",s.ctrlpts=[];for(var R=0;R<w;R++){var z=(.5-e.eles.length/2+n)*g*(o?-1:1),$=void 0,H=Nl(z);B&&(A=m?m.pfValue[R]:g,k=y.value[R]),i?$=A:$=A!==void 0?H*A:void 0;var X=$!==void 0?$:z,ee=1-k,_=k,te=p==="node-position"?f:h,q={x:te.x1*ee+te.x2*_,y:te.y1*ee+te.y2*_};s.ctrlpts.push(q.x+l.x*X,q.y+l.y*X)}};Nt.findTaxiPoints=function(r,e){var n=r._private.rscratch;n.edgeType="segments";var i="vertical",o="horizontal",s="leftward",l="rightward",f="downward",h="upward",p="auto",g=e.posPts,m=e.srcW,y=e.srcH,w=e.tgtW,A=e.tgtH,k=r.pstyle("edge-distances").value,B=k!=="node-position",R=r.pstyle("taxi-direction").value,z=R,$=r.pstyle("taxi-turn"),H=$.units==="%",X=$.pfValue,ee=X<0,_=r.pstyle("taxi-turn-min-distance").pfValue,te=B?(m+w)/2:0,q=B?(y+A)/2:0,ae=g.x2-g.x1,ne=g.y2-g.y1,re=function(Ve,st){return Ve>0?Math.max(Ve-st,0):Math.min(Ve+st,0)},oe=re(ae,te),ie=re(ne,q),ve=!1;z===p?R=Math.abs(oe)>Math.abs(ie)?o:i:z===h||z===f?(R=i,ve=!0):(z===s||z===l)&&(R=o,ve=!0);var le=R===i,he=le?ie:oe,se=le?ne:ae,ce=Nl(se),be=!1;!(ve&&(H||ee))&&(z===f&&se<0||z===h&&se>0||z===s&&se>0||z===l&&se<0)&&(ce*=-1,he=ce*Math.abs(he),be=!0);var de;if(H){var xe=X<0?1+X:X;de=xe*he}else{var Ce=X<0?he:0;de=Ce+X*ce}var Te=function(Ve){return Math.abs(Ve)<_||Math.abs(Ve)>=Math.abs(he)},Se=Te(de),me=Te(Math.abs(he)-Math.abs(de)),ue=Se||me;if(ue&&!be)if(le){var Ee=Math.abs(se)<=y/2,Pe=Math.abs(ae)<=w/2;if(Ee){var De=(g.x1+g.x2)/2,Re=g.y1,Ge=g.y2;n.segpts=[De,Re,De,Ge]}else if(Pe){var Ke=(g.y1+g.y2)/2,Me=g.x1,Be=g.x2;n.segpts=[Me,Ke,Be,Ke]}else n.segpts=[g.x1,g.y2]}else{var ze=Math.abs(se)<=m/2,ye=Math.abs(ne)<=A/2;if(ze){var j=(g.y1+g.y2)/2,fe=g.x1,we=g.x2;n.segpts=[fe,j,we,j]}else if(ye){var pe=(g.x1+g.x2)/2,ge=g.y1,Ne=g.y2;n.segpts=[pe,ge,pe,Ne]}else n.segpts=[g.x2,g.y1]}else if(le){var ke=g.y1+de+(B?y/2*ce:0),Ie=g.x1,We=g.x2;n.segpts=[Ie,ke,We,ke]}else{var Ue=g.x1+de+(B?m/2*ce:0),qe=g.y1,Xe=g.y2;n.segpts=[Ue,qe,Ue,Xe]}};Nt.tryToCorrectInvalidPoints=function(r,e){var n=r._private.rscratch;if(n.edgeType==="bezier"){var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,f=e.tgtW,h=e.tgtH,p=e.srcShape,g=e.tgtShape,m=!Ae(n.startX)||!Ae(n.startY),y=!Ae(n.arrowStartX)||!Ae(n.arrowStartY),w=!Ae(n.endX)||!Ae(n.endY),A=!Ae(n.arrowEndX)||!Ae(n.arrowEndY),k=3,B=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,R=k*B,z=Jr({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),$=z<R,H=Jr({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),X=H<R,ee=!1;if(m||y||$){ee=!0;var _={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},te=Math.sqrt(_.x*_.x+_.y*_.y),q={x:_.x/te,y:_.y/te},ae=Math.max(s,l),ne={x:n.ctrlpts[0]+q.x*2*ae,y:n.ctrlpts[1]+q.y*2*ae},re=p.intersectLine(i.x,i.y,s,l,ne.x,ne.y,0);$?(n.ctrlpts[0]=n.ctrlpts[0]+q.x*(R-z),n.ctrlpts[1]=n.ctrlpts[1]+q.y*(R-z)):(n.ctrlpts[0]=re[0]+q.x*R,n.ctrlpts[1]=re[1]+q.y*R)}if(w||A||X){ee=!0;var oe={x:n.ctrlpts[0]-o.x,y:n.ctrlpts[1]-o.y},ie=Math.sqrt(oe.x*oe.x+oe.y*oe.y),ve={x:oe.x/ie,y:oe.y/ie},le=Math.max(s,l),he={x:n.ctrlpts[0]+ve.x*2*le,y:n.ctrlpts[1]+ve.y*2*le},se=g.intersectLine(o.x,o.y,f,h,he.x,he.y,0);X?(n.ctrlpts[0]=n.ctrlpts[0]+ve.x*(R-H),n.ctrlpts[1]=n.ctrlpts[1]+ve.y*(R-H)):(n.ctrlpts[0]=se[0]+ve.x*R,n.ctrlpts[1]=se[1]+ve.y*R)}ee&&this.findEndpoints(r)}};Nt.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);e.allpts.push(e.endX,e.endY);var i,o;e.ctrlpts.length/2%2==0?(i=e.allpts.length/2-1,e.midX=e.allpts[i],e.midY=e.allpts[i+1]):(i=e.allpts.length/2-3,o=.5,e.midX=bt(e.allpts[i],e.allpts[i+2],e.allpts[i+4],o),e.midY=bt(e.allpts[i+1],e.allpts[i+3],e.allpts[i+5],o))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var s=e.segpts.length/2,l=s-2;e.midX=(e.segpts[l]+e.segpts[s])/2,e.midY=(e.segpts[l+1]+e.segpts[s+1])/2}else{var f=e.segpts.length/2-1;e.midX=e.segpts[f],e.midY=e.segpts[f+1]}};Nt.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Ae(e.startX)&&Ae(e.startY)&&Ae(e.endX)&&Ae(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,rt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Nt.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var n=this,i=n.cy,o=i.hasCompoundNodes(),s={map:new ur,get:function(_){var te=this.map.get(_[0]);return te!=null?te.get(_[1]):null},set:function(_,te){var q=this.map.get(_[0]);q==null&&(q=new ur,this.map.set(_[0],q)),q.set(_[1],te)}},l=[],f=[],h=0;h<r.length;h++){var p=r[h],g=p._private,m=p.pstyle("curve-style").value;if(!(p.removed()||!p.takesUpSpace())){if(m==="haystack"){f.push(p);continue}var y=m==="unbundled-bezier"||m==="segments"||m==="straight"||m==="taxi",w=m==="unbundled-bezier"||m==="bezier",A=g.source,k=g.target,B=A.poolIndex(),R=k.poolIndex(),z=[B,R].sort(),$=s.get(z);$==null&&($={eles:[]},s.set(z,$),l.push(z)),$.eles.push(p),y&&($.hasUnbundled=!0),w&&($.hasBezier=!0)}}for(var H=function(_){var te=l[_],q=s.get(te),ae=void 0;if(!q.hasUnbundled){var ne=q.eles[0].parallelEdges().filter(function(Ne){return Ne.isBundledBezier()});Ho(q.eles),ne.forEach(function(Ne){return q.eles.push(Ne)}),q.eles.sort(function(Ne,ke){return Ne.poolIndex()-ke.poolIndex()})}var re=q.eles[0],oe=re.source(),ie=re.target();if(oe.poolIndex()>ie.poolIndex()){var ve=oe;oe=ie,ie=ve}var le=q.srcPos=oe.position(),he=q.tgtPos=ie.position(),se=q.srcW=oe.outerWidth(),ce=q.srcH=oe.outerHeight(),be=q.tgtW=ie.outerWidth(),de=q.tgtH=ie.outerHeight(),xe=q.srcShape=n.nodeShapes[e.getNodeShape(oe)],Ce=q.tgtShape=n.nodeShapes[e.getNodeShape(ie)];q.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Te=0;Te<q.eles.length;Te++){var Se=q.eles[Te],me=Se[0]._private.rscratch,ue=Se.pstyle("curve-style").value,Ee=ue==="unbundled-bezier"||ue==="segments"||ue==="taxi",Pe=!oe.same(Se.source());if(!q.calculatedIntersection&&oe!==ie&&(q.hasBezier||q.hasUnbundled)){q.calculatedIntersection=!0;var De=xe.intersectLine(le.x,le.y,se,ce,he.x,he.y,0),Re=q.srcIntn=De,Ge=Ce.intersectLine(he.x,he.y,be,de,le.x,le.y,0),Ke=q.tgtIntn=Ge,Me=q.intersectionPts={x1:De[0],x2:Ge[0],y1:De[1],y2:Ge[1]},Be=q.posPts={x1:le.x,x2:he.x,y1:le.y,y2:he.y},ze=Ge[1]-De[1],ye=Ge[0]-De[0],j=Math.sqrt(ye*ye+ze*ze),fe=q.vector={x:ye,y:ze},we=q.vectorNorm={x:fe.x/j,y:fe.y/j},pe={x:-we.y,y:we.x};q.nodesOverlap=!Ae(j)||Ce.checkPoint(De[0],De[1],0,be,de,he.x,he.y)||xe.checkPoint(Ge[0],Ge[1],0,se,ce,le.x,le.y),q.vectorNormInverse=pe,ae={nodesOverlap:q.nodesOverlap,dirCounts:q.dirCounts,calculatedIntersection:!0,hasBezier:q.hasBezier,hasUnbundled:q.hasUnbundled,eles:q.eles,srcPos:he,tgtPos:le,srcW:be,srcH:de,tgtW:se,tgtH:ce,srcIntn:Ke,tgtIntn:Re,srcShape:Ce,tgtShape:xe,posPts:{x1:Be.x2,y1:Be.y2,x2:Be.x1,y2:Be.y1},intersectionPts:{x1:Me.x2,y1:Me.y2,x2:Me.x1,y2:Me.y1},vector:{x:-fe.x,y:-fe.y},vectorNorm:{x:-we.x,y:-we.y},vectorNormInverse:{x:-pe.x,y:-pe.y}}}var ge=Pe?ae:q;me.nodesOverlap=ge.nodesOverlap,me.srcIntn=ge.srcIntn,me.tgtIntn=ge.tgtIntn,o&&(oe.isParent()||oe.isChild()||ie.isParent()||ie.isChild())&&(oe.parents().anySame(ie)||ie.parents().anySame(oe)||oe.same(ie)&&oe.isParent())?e.findCompoundLoopPoints(Se,ge,Te,Ee):oe===ie?e.findLoopPoints(Se,ge,Te,Ee):ue==="segments"?e.findSegmentsPoints(Se,ge):ue==="taxi"?e.findTaxiPoints(Se,ge):ue==="straight"||!Ee&&q.eles.length%2==1&&Te===Math.floor(q.eles.length/2)?e.findStraightEdgePoints(Se):e.findBezierPoints(Se,ge,Te,Ee,Pe),e.findEndpoints(Se),e.tryToCorrectInvalidPoints(Se,ge),e.checkForInvalidEdgeWarning(Se),e.storeAllpts(Se),e.storeEdgeProjections(Se),e.calculateArrowAngles(Se),e.recalculateEdgeLabelProjections(Se),e.calculateLabelAngles(Se)}},X=0;X<l.length;X++)H(X);this.findHaystackPoints(f)}};function uc(r){var e=[];if(r!=null){for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1];e.push({x:i,y:o})}return e}}Nt.getSegmentPoints=function(r){var e=r[0]._private.rscratch,n=e.edgeType;if(n==="segments")return this.recalculateRenderedStyle(r),uc(e.segpts)};Nt.getControlPoints=function(r){var e=r[0]._private.rscratch,n=e.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return this.recalculateRenderedStyle(r),uc(e.ctrlpts)};Nt.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var ni={};ni.manualEndptToPx=function(r,e){var n=this,i=r.position(),o=r.outerWidth(),s=r.outerHeight();if(e.value.length===2){var l=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(l[0]=l[0]*o),e.units[1]==="%"&&(l[1]=l[1]*s),l[0]+=i.x,l[1]+=i.y,l}else{var f=e.pfValue[0];f=-Math.PI/2+f;var h=2*Math.max(o,s),p=[i.x+Math.cos(f)*h,i.y+Math.sin(f)*h];return n.nodeShapes[this.getNodeShape(r)].intersectLine(i.x,i.y,o,s,p[0],p[1],0)}};ni.findEndpoints=function(r){var e=this,n,i=r.source()[0],o=r.target()[0],s=i.position(),l=o.position(),f=r.pstyle("target-arrow-shape").value,h=r.pstyle("source-arrow-shape").value,p=r.pstyle("target-distance-from-node").pfValue,g=r.pstyle("source-distance-from-node").pfValue,m=r.pstyle("curve-style").value,y=r._private.rscratch,w=y.edgeType,A=m==="taxi",k=w==="self"||w==="compound",B=w==="bezier"||w==="multibezier"||k,R=w!=="bezier",z=w==="straight"||w==="segments",$=w==="segments",H=B||R||z,X=k||A,ee=r.pstyle("source-endpoint"),_=X?"outside-to-node":ee.value,te=r.pstyle("target-endpoint"),q=X?"outside-to-node":te.value;y.srcManEndpt=ee,y.tgtManEndpt=te;var ae,ne,re,oe;if(B){var ie=[y.ctrlpts[0],y.ctrlpts[1]],ve=R?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:ie;ae=ve,ne=ie}else if(z){var le=$?y.segpts.slice(0,2):[l.x,l.y],he=$?y.segpts.slice(y.segpts.length-2):[s.x,s.y];ae=he,ne=le}if(q==="inside-to-node")n=[l.x,l.y];else if(te.units)n=this.manualEndptToPx(o,te);else if(q==="outside-to-line")n=y.tgtIntn;else if(q==="outside-to-node"||q==="outside-to-node-or-label"?re=ae:(q==="outside-to-line"||q==="outside-to-line-or-label")&&(re=[s.x,s.y]),n=e.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),re[0],re[1],0),q==="outside-to-node-or-label"||q==="outside-to-line-or-label"){var se=o._private.rscratch,ce=se.labelWidth,be=se.labelHeight,de=se.labelX,xe=se.labelY,Ce=ce/2,Te=be/2,Se=o.pstyle("text-valign").value;Se==="top"?xe-=Te:Se==="bottom"&&(xe+=Te);var me=o.pstyle("text-halign").value;me==="left"?de-=Ce:me==="right"&&(de+=Ce);var ue=Oa(re[0],re[1],[de-Ce,xe-Te,de+Ce,xe-Te,de+Ce,xe+Te,de-Ce,xe+Te],l.x,l.y);if(ue.length>0){var Ee=s,Pe=en(Ee,wn(n)),De=en(Ee,wn(ue)),Re=Pe;if(De<Pe&&(n=ue,Re=De),ue.length>2){var Ge=en(Ee,{x:ue[2],y:ue[3]});Ge<Re&&(n=[ue[2],ue[3]])}}}var Ke=Oi(n,ae,e.arrowShapes[f].spacing(r)+p),Me=Oi(n,ae,e.arrowShapes[f].gap(r)+p);if(y.endX=Me[0],y.endY=Me[1],y.arrowEndX=Ke[0],y.arrowEndY=Ke[1],_==="inside-to-node")n=[s.x,s.y];else if(ee.units)n=this.manualEndptToPx(i,ee);else if(_==="outside-to-line")n=y.srcIntn;else if(_==="outside-to-node"||_==="outside-to-node-or-label"?oe=ne:(_==="outside-to-line"||_==="outside-to-line-or-label")&&(oe=[l.x,l.y]),n=e.nodeShapes[this.getNodeShape(i)].intersectLine(s.x,s.y,i.outerWidth(),i.outerHeight(),oe[0],oe[1],0),_==="outside-to-node-or-label"||_==="outside-to-line-or-label"){var Be=i._private.rscratch,ze=Be.labelWidth,ye=Be.labelHeight,j=Be.labelX,fe=Be.labelY,we=ze/2,pe=ye/2,ge=i.pstyle("text-valign").value;ge==="top"?fe-=pe:ge==="bottom"&&(fe+=pe);var Ne=i.pstyle("text-halign").value;Ne==="left"?j-=we:Ne==="right"&&(j+=we);var ke=Oa(oe[0],oe[1],[j-we,fe-pe,j+we,fe-pe,j+we,fe+pe,j-we,fe+pe],s.x,s.y);if(ke.length>0){var Ie=l,We=en(Ie,wn(n)),Ue=en(Ie,wn(ke)),qe=We;if(Ue<We&&(n=[ke[0],ke[1]],qe=Ue),ke.length>2){var Xe=en(Ie,{x:ke[2],y:ke[3]});Xe<qe&&(n=[ke[2],ke[3]])}}}var He=Oi(n,ne,e.arrowShapes[h].spacing(r)+g),Ve=Oi(n,ne,e.arrowShapes[h].gap(r)+g);y.startX=Ve[0],y.startY=Ve[1],y.arrowStartX=He[0],y.arrowStartY=He[1],H&&(!Ae(y.startX)||!Ae(y.startY)||!Ae(y.endX)||!Ae(y.endY)?y.badLine=!0:y.badLine=!1)};ni.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};ni.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var gs={};function Bg(r,e,n){for(var i=function(p,g,m,y){return bt(p,g,m,y)},o=e._private,s=o.rstyle.bezierPts,l=0;l<r.bezierProjPcts.length;l++){var f=r.bezierProjPcts[l];s.push({x:i(n[0],n[2],n[4],f),y:i(n[1],n[3],n[5],f)})}}gs.storeEdgeProjections=function(r){var e=r._private,n=e.rscratch,i=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,i==="multibezier"||i==="bezier"||i==="self"||i==="compound"){e.rstyle.bezierPts=[];for(var o=0;o+5<n.allpts.length;o+=4)Bg(this,r,n.allpts.slice(o,o+6))}else if(i==="segments")for(var s=e.rstyle.linePts=[],o=0;o+1<n.allpts.length;o+=2)s.push({x:n.allpts[o],y:n.allpts[o+1]});else if(i==="haystack"){var l=n.haystackPts;e.rstyle.haystackPts=[{x:l[0],y:l[1]},{x:l[2],y:l[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};gs.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var fr={};fr.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!Mr(e)){var n,i,o=r._private,s=r.width(),l=r.height(),f=r.padding(),h=r.position(),p=r.pstyle("text-halign").strValue,g=r.pstyle("text-valign").strValue,m=o.rscratch,y=o.rstyle;switch(p){case"left":n=h.x-s/2-f;break;case"right":n=h.x+s/2+f;break;default:n=h.x}switch(g){case"top":i=h.y-l/2-f;break;case"bottom":i=h.y+l/2+f;break;default:i=h.y}m.labelX=n,m.labelY=i,y.labelX=n,y.labelY=i,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var cc=function(e,n){var i=Math.atan(n/e);return e===0&&i<0&&(i=i*-1),i},fc=function(e,n){var i=n.x-e.x,o=n.y-e.y;return cc(i,o)},Mg=function(e,n,i,o){var s=Pa(0,o-.001,1),l=Pa(0,o+.001,1),f=xn(e,n,i,s),h=xn(e,n,i,l);return fc(f,h)};fr.recalculateEdgeLabelProjections=function(r){var e,n=r._private,i=n.rscratch,o=this,s={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(!!(s.mid||s.source||s.target)){e={x:i.midX,y:i.midY};var l=function(m,y,w){Ir(n.rscratch,m,y,w),Ir(n.rstyle,m,y,w)};l("labelX",null,e.x),l("labelY",null,e.y);var f=cc(i.midDispX,i.midDispY);l("labelAutoAngle",null,f);var h=function g(){if(g.cache)return g.cache;for(var m=[],y=0;y+5<i.allpts.length;y+=4){var w={x:i.allpts[y],y:i.allpts[y+1]},A={x:i.allpts[y+2],y:i.allpts[y+3]},k={x:i.allpts[y+4],y:i.allpts[y+5]};m.push({p0:w,p1:A,p2:k,startDist:0,length:0,segments:[]})}var B=n.rstyle.bezierPts,R=o.bezierProjPcts.length;function z(_,te,q,ae,ne){var re=Jr(te,q),oe=_.segments[_.segments.length-1],ie={p0:te,p1:q,t0:ae,t1:ne,startDist:oe?oe.startDist+oe.length:0,length:re};_.segments.push(ie),_.length+=re}for(var $=0;$<m.length;$++){var H=m[$],X=m[$-1];X&&(H.startDist=X.startDist+X.length),z(H,H.p0,B[$*R],0,o.bezierProjPcts[0]);for(var ee=0;ee<R-1;ee++)z(H,B[$*R+ee],B[$*R+ee+1],o.bezierProjPcts[ee],o.bezierProjPcts[ee+1]);z(H,B[$*R+R-1],H.p2,o.bezierProjPcts[R-1],1)}return g.cache=m},p=function(m){var y,w=m==="source";if(!!s[m]){var A=r.pstyle(m+"-text-offset").pfValue;switch(i.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var k=h(),B,R=0,z=0,$=0;$<k.length;$++){for(var H=k[w?$:k.length-1-$],X=0;X<H.segments.length;X++){var ee=H.segments[w?X:H.segments.length-1-X],_=$===k.length-1&&X===H.segments.length-1;if(R=z,z+=ee.length,z>=A||_){B={cp:H,segment:ee};break}}if(B)break}var te=B.cp,q=B.segment,ae=(A-R)/q.length,ne=q.t1-q.t0,re=w?q.t0+ne*ae:q.t1-ne*ae;re=Pa(0,re,1),e=xn(te.p0,te.p1,te.p2,re),y=Mg(te.p0,te.p1,te.p2,re);break}case"straight":case"segments":case"haystack":{for(var oe=0,ie,ve,le,he,se=i.allpts.length,ce=0;ce+3<se&&(w?(le={x:i.allpts[ce],y:i.allpts[ce+1]},he={x:i.allpts[ce+2],y:i.allpts[ce+3]}):(le={x:i.allpts[se-2-ce],y:i.allpts[se-1-ce]},he={x:i.allpts[se-4-ce],y:i.allpts[se-3-ce]}),ie=Jr(le,he),ve=oe,oe+=ie,!(oe>=A));ce+=2);var be=A-ve,de=be/ie;de=Pa(0,de,1),e=Xv(le,he,de),y=fc(le,he);break}}l("labelX",m,e.x),l("labelY",m,e.y),l("labelAutoAngle",m,y)}};p("source"),p("target"),this.applyLabelDimensions(r)}};fr.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};fr.applyPrefixedLabelDimensions=function(r,e){var n=r._private,i=this.getLabelText(r,e),o=this.calculateLabelDimensions(r,i),s=r.pstyle("line-height").pfValue,l=r.pstyle("text-wrap").strValue,f=nr(n.rscratch,"labelWrapCachedLines",e)||[],h=l!=="wrap"?1:Math.max(f.length,1),p=o.height/h,g=p*s,m=o.width,y=o.height+(h-1)*(s-1)*p;Ir(n.rstyle,"labelWidth",e,m),Ir(n.rscratch,"labelWidth",e,m),Ir(n.rstyle,"labelHeight",e,y),Ir(n.rscratch,"labelHeight",e,y),Ir(n.rscratch,"labelLineHeight",e,g)};fr.getLabelText=function(r,e){var n=r._private,i=e?e+"-":"",o=r.pstyle(i+"label").strValue,s=r.pstyle("text-transform").value,l=function(be,de){return de?(Ir(n.rscratch,be,e,de),de):nr(n.rscratch,be,e)};if(!o)return"";s=="none"||(s=="uppercase"?o=o.toUpperCase():s=="lowercase"&&(o=o.toLowerCase()));var f=r.pstyle("text-wrap").value;if(f==="wrap"){var h=l("labelKey");if(h!=null&&l("labelWrapKey")===h)return l("labelWrapCachedText");for(var p="\u200B",g=o.split(`
`),m=r.pstyle("text-max-width").pfValue,y=r.pstyle("text-overflow-wrap").value,w=y==="anywhere",A=[],k=/[\s\u200b]+/,B=w?"":" ",R=0;R<g.length;R++){var z=g[R],$=this.calculateLabelDimensions(r,z),H=$.width;if(w){var X=z.split("").join(p);z=X}if(H>m){for(var ee=z.split(k),_="",te=0;te<ee.length;te++){var q=ee[te],ae=_.length===0?q:_+B+q,ne=this.calculateLabelDimensions(r,ae),re=ne.width;re<=m?_+=q+B:(_&&A.push(_),_=q+B)}_.match(/^[\s\u200b]+$/)||A.push(_)}else A.push(z)}l("labelWrapCachedLines",A),o=l("labelWrapCachedText",A.join(`
`)),l("labelWrapKey",h)}else if(f==="ellipsis"){var oe=r.pstyle("text-max-width").pfValue,ie="",ve="\u2026",le=!1;if(this.calculateLabelDimensions(r,o).width<oe)return o;for(var he=0;he<o.length;he++){var se=this.calculateLabelDimensions(r,ie+o[he]+ve).width;if(se>oe)break;ie+=o[he],he===o.length-1&&(le=!0)}return le||(ie+=ve),ie}return o};fr.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,n=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};fr.calculateLabelDimensions=function(r,e){var n=this,i=Qr(e,r._private.labelDimsKey),o=n.labelDimCache||(n.labelDimCache=[]),s=o[i];if(s!=null)return s;var l=0,f=r.pstyle("font-style").strValue,h=r.pstyle("font-size").pfValue,p=r.pstyle("font-family").strValue,g=r.pstyle("font-weight").strValue,m=this.labelCalcCanvas,y=this.labelCalcCanvasContext;if(!m){m=this.labelCalcCanvas=document.createElement("canvas"),y=this.labelCalcCanvasContext=m.getContext("2d");var w=m.style;w.position="absolute",w.left="-9999px",w.top="-9999px",w.zIndex="-1",w.visibility="hidden",w.pointerEvents="none"}y.font="".concat(f," ").concat(g," ").concat(h,"px ").concat(p);for(var A=0,k=0,B=e.split(`
`),R=0;R<B.length;R++){var z=B[R],$=y.measureText(z),H=Math.ceil($.width),X=h;A=Math.max(H,A),k+=X}return A+=l,k+=l,o[i]={width:A,height:k}};fr.calculateLabelAngle=function(r,e){var n=r._private,i=n.rscratch,o=r.isEdge(),s=e?e+"-":"",l=r.pstyle(s+"text-rotation"),f=l.strValue;return f==="none"?0:o&&f==="autorotate"?i.labelAutoAngle:f==="autorotate"?0:l.pfValue};fr.calculateLabelAngles=function(r){var e=this,n=r.isEdge(),i=r._private,o=i.rscratch;o.labelAngle=e.calculateLabelAngle(r),n&&(o.sourceLabelAngle=e.calculateLabelAngle(r,"source"),o.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var hc={},vc=28,dc=!1;hc.getNodeShape=function(r){var e=this,n=r.pstyle("shape").value;if(n==="cutrectangle"&&(r.width()<vc||r.height()<vc))return dc||(rt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),dc=!0),"rectangle";if(r.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var i=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(i).name}return n};var oo={};oo.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),n=this,i=function(l){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(l),f)for(var h=0;h<l.length;h++){var p=l[h],g=p._private,m=g.rstyle;m.clean=!1,m.cleanConnected=!1}};n.binder(r).on("bounds.* dirty.*",function(l){var f=l.target;i(f)}).on("style.* background.*",function(l){var f=l.target;i(f,!1)});var o=function(l){if(l){var f=n.onUpdateEleCalcsFns;e.cleanStyle();for(var h=0;h<e.length;h++){var p=e[h],g=p._private.rstyle;p.isNode()&&!g.cleanConnected&&(i(p.connectedEdges()),g.cleanConnected=!0)}if(f)for(var m=0;m<f.length;m++){var y=f[m];y(l,e)}n.recalculateRenderedStyle(e),e=r.collection()}};n.flushRenderedStyleQueue=function(){o(!0)},n.beforeRender(o,n.beforeRenderPriorities.eleCalcs)};oo.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};oo.recalculateRenderedStyle=function(r,e){var n=function(H){return H._private.rstyle.cleanConnected},i=[],o=[];if(!this.destroyed){e===void 0&&(e=!0);for(var s=0;s<r.length;s++){var l=r[s],f=l._private,h=f.rstyle;l.isEdge()&&(!n(l.source())||!n(l.target()))&&(h.clean=!1),!(e&&h.clean||l.removed())&&l.pstyle("display").value!=="none"&&(f.group==="nodes"?o.push(l):i.push(l),h.clean=!0)}for(var p=0;p<o.length;p++){var g=o[p],m=g._private,y=m.rstyle,w=g.position();this.recalculateNodeLabelProjection(g),y.nodeX=w.x,y.nodeY=w.y,y.nodeW=g.pstyle("width").pfValue,y.nodeH=g.pstyle("height").pfValue}this.recalculateEdgeProjections(i);for(var A=0;A<i.length;A++){var k=i[A],B=k._private,R=B.rstyle,z=B.rscratch;R.srcX=z.arrowStartX,R.srcY=z.arrowStartY,R.tgtX=z.arrowEndX,R.tgtY=z.arrowEndY,R.midX=z.midX,R.midY=z.midY,R.labelAngle=z.labelAngle,R.sourceLabelAngle=z.sourceLabelAngle,R.targetLabelAngle=z.targetLabelAngle}}};var so={};so.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(!!r){r.drag=[],r.nondrag=[];for(var e=[],n=0;n<r.length;n++){var i=r[n],o=i._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):o.inDragLayer?r.drag.push(i):r.nondrag.push(i)}for(var n=0;n<e.length;n++){var i=e[n];r.drag.push(i)}}};so.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};so.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Nu),e.interactive=e.filter(function(n){return n.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var pc={};[on,io,Nt,ni,gs,fr,hc,oo,so].forEach(function(r){_e(pc,r)});var gc={};gc.getCachedImage=function(r,e,n){var i=this,o=i.imageCache=i.imageCache||{},s=o[r];if(s)return s.image.complete||s.image.addEventListener("load",n),s.image;s=o[r]=o[r]||{};var l=s.image=new Image;l.addEventListener("load",n),l.addEventListener("error",function(){l.error=!0});var f="data:",h=r.substring(0,f.length).toLowerCase()===f;return h||(l.crossOrigin=e),l.src=r,l};var In={};In.registerBinding=function(r,e,n,i){var o=Array.prototype.slice.apply(arguments,[1]),s=this.binder(r);return s.on.apply(s,o)};In.binder=function(r){var e=this,n=r===window||r===document||r===document.body||ev(r);if(e.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});window.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var s=function(f,h,p){var g=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(g[2]={capture:p??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:g}),(r.addEventListener||r.on).apply(r,g),this};return{on:s,addEventListener:s,addListener:s,bind:s}};In.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};In.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};In.load=function(){var r=this,e=function(j){return j.selected()},n=function(j,fe,we,pe){j==null&&(j=r.cy);for(var ge=0;ge<fe.length;ge++){var Ne=fe[ge];j.emit({originalEvent:we,type:Ne,position:pe})}},i=function(j){return j.shiftKey||j.metaKey||j.ctrlKey},o=function(j,fe){var we=!0;if(r.cy.hasCompoundNodes()&&j&&j.pannable())for(var pe=0;fe&&pe<fe.length;pe++){var j=fe[pe];if(j.isNode()&&j.isParent()&&!j.pannable()){we=!1;break}}else we=!0;return we},s=function(j){j[0]._private.grabbed=!0},l=function(j){j[0]._private.grabbed=!1},f=function(j){j[0]._private.rscratch.inDragLayer=!0},h=function(j){j[0]._private.rscratch.inDragLayer=!1},p=function(j){j[0]._private.rscratch.isGrabTarget=!0},g=function(j){j[0]._private.rscratch.isGrabTarget=!1},m=function(j,fe){var we=fe.addToList,pe=we.has(j);pe||(we.merge(j),s(j))},y=function(j,fe){if(!!j.cy().hasCompoundNodes()&&!(fe.inDragLayer==null&&fe.addToList==null)){var we=j.descendants();fe.inDragLayer&&(we.forEach(f),we.connectedEdges().forEach(f)),fe.addToList&&fe.addToList.unmerge(we)}},w=function(j,fe){fe=fe||{};var we=j.cy().hasCompoundNodes();fe.inDragLayer&&(j.forEach(f),j.neighborhood().stdFilter(function(pe){return!we||pe.isEdge()}).forEach(f)),fe.addToList&&j.forEach(function(pe){m(pe,fe)}),y(j,fe),B(j,{inDragLayer:fe.inDragLayer}),r.updateCachedGrabbedEles()},A=w,k=function(j){!j||(r.getCachedZSortedEles().forEach(function(fe){l(fe),h(fe),g(fe)}),r.updateCachedGrabbedEles())},B=function(j,fe){if(!(fe.inDragLayer==null&&fe.addToList==null)&&!!j.cy().hasCompoundNodes()){var we=j.ancestors().orphans();if(!we.same(j)){var pe=we.descendants().spawnSelf().merge(we).unmerge(j).unmerge(j.descendants()),ge=pe.connectedEdges();fe.inDragLayer&&(ge.forEach(f),pe.forEach(f)),fe.addToList&&pe.forEach(function(Ne){m(Ne,fe)})}}},R=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},z=typeof MutationObserver!="undefined",$=typeof ResizeObserver!="undefined";z?(r.removeObserver=new MutationObserver(function(ye){for(var j=0;j<ye.length;j++){var fe=ye[j],we=fe.removedNodes;if(we)for(var pe=0;pe<we.length;pe++){var ge=we[pe];if(ge===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(ye){r.destroy()});var H=Ci(function(){r.cy.resize()},100);z&&(r.styleObserver=new MutationObserver(H),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(window,"resize",H),$&&(r.resizeObserver=new ResizeObserver(H),r.resizeObserver.observe(r.container));var X=function(j,fe){for(;j!=null;)fe(j),j=j.parentNode},ee=function(){r.invalidateContainerClientCoordsCache()};X(r.container,function(ye){r.registerBinding(ye,"transitionend",ee),r.registerBinding(ye,"animationend",ee),r.registerBinding(ye,"scroll",ee)}),r.registerBinding(r.container,"contextmenu",function(ye){ye.preventDefault()});var _=function(){return r.selection[4]!==0},te=function(j){for(var fe=r.findContainerClientCoords(),we=fe[0],pe=fe[1],ge=fe[2],Ne=fe[3],ke=j.touches?j.touches:[j],Ie=!1,We=0;We<ke.length;We++){var Ue=ke[We];if(we<=Ue.clientX&&Ue.clientX<=we+ge&&pe<=Ue.clientY&&Ue.clientY<=pe+Ne){Ie=!0;break}}if(!Ie)return!1;for(var qe=r.container,Xe=j.target,He=Xe.parentNode,Ve=!1;He;){if(He===qe){Ve=!0;break}He=He.parentNode}return!!Ve};r.registerBinding(r.container,"mousedown",function(j){if(!!te(j)){j.preventDefault(),R(),r.hoverData.capture=!0,r.hoverData.which=j.which;var fe=r.cy,we=[j.clientX,j.clientY],pe=r.projectIntoViewport(we[0],we[1]),ge=r.selection,Ne=r.findNearestElements(pe[0],pe[1],!0,!1),ke=Ne[0],Ie=r.dragData.possibleDragElements;r.hoverData.mdownPos=pe,r.hoverData.mdownGPos=we;var We=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var st=r.hoverData.down;st?st.emit({originalEvent:j,type:"taphold",position:{x:pe[0],y:pe[1]}}):fe.emit({originalEvent:j,type:"taphold",position:{x:pe[0],y:pe[1]}})}},r.tapholdDuration)};if(j.which==3){r.hoverData.cxtStarted=!0;var Ue={originalEvent:j,type:"cxttapstart",position:{x:pe[0],y:pe[1]}};ke?(ke.activate(),ke.emit(Ue),r.hoverData.down=ke):fe.emit(Ue),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(j.which==1){ke&&ke.activate();{if(ke!=null&&r.nodeIsGrabbable(ke)){var qe=function(st){return{originalEvent:j,type:st,position:{x:pe[0],y:pe[1]}}},Xe=function(st){st.emit(qe("grab"))};if(p(ke),!ke.selected())Ie=r.dragData.possibleDragElements=fe.collection(),A(ke,{addToList:Ie}),ke.emit(qe("grabon")).emit(qe("grab"));else{Ie=r.dragData.possibleDragElements=fe.collection();var He=fe.$(function(Ve){return Ve.isNode()&&Ve.selected()&&r.nodeIsGrabbable(Ve)});w(He,{addToList:Ie}),ke.emit(qe("grabon")),He.forEach(Xe)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=ke,r.hoverData.downs=Ne,r.hoverData.downTime=new Date().getTime()}n(ke,["mousedown","tapstart","vmousedown"],j,{x:pe[0],y:pe[1]}),ke==null?(ge[4]=1,r.data.bgActivePosistion={x:pe[0],y:pe[1]},r.redrawHint("select",!0),r.redraw()):ke.pannable()&&(ge[4]=1),We()}ge[0]=ge[2]=pe[0],ge[1]=ge[3]=pe[1]}},!1),r.registerBinding(window,"mousemove",function(j){var fe=r.hoverData.capture;if(!(!fe&&!te(j))){var we=!1,pe=r.cy,ge=pe.zoom(),Ne=[j.clientX,j.clientY],ke=r.projectIntoViewport(Ne[0],Ne[1]),Ie=r.hoverData.mdownPos,We=r.hoverData.mdownGPos,Ue=r.selection,qe=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(qe=r.findNearestElement(ke[0],ke[1],!0,!1));var Xe=r.hoverData.last,He=r.hoverData.down,Ve=[ke[0]-Ue[2],ke[1]-Ue[3]],st=r.dragData.possibleDragElements,xt;if(We){var Jt=Ne[0]-We[0],er=Jt*Jt,Et=Ne[1]-We[1],Ut=Et*Et,It=er+Ut;r.hoverData.isOverThresholdDrag=xt=It>=r.desktopTapThreshold2}var gr=i(j);xt&&(r.hoverData.tapholdCancelled=!0);var Ar=function(){var Zr=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Zr.length===0?(Zr.push(Ve[0]),Zr.push(Ve[1])):(Zr[0]+=Ve[0],Zr[1]+=Ve[1])};we=!0,n(qe,["mousemove","vmousemove","tapdrag"],j,{x:ke[0],y:ke[1]});var dn=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||pe.emit({originalEvent:j,type:"boxstart",position:{x:ke[0],y:ke[1]}}),Ue[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(xt){var Xr={originalEvent:j,type:"cxtdrag",position:{x:ke[0],y:ke[1]}};He?He.emit(Xr):pe.emit(Xr),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||qe!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:ke[0],y:ke[1]}}),r.hoverData.cxtOver=qe,qe&&qe.emit({originalEvent:j,type:"cxtdragover",position:{x:ke[0],y:ke[1]}}))}}else if(r.hoverData.dragging){if(we=!0,pe.panningEnabled()&&pe.userPanningEnabled()){var pn;if(r.hoverData.justStartedPan){var wi=r.hoverData.mdownPos;pn={x:(ke[0]-wi[0])*ge,y:(ke[1]-wi[1])*ge},r.hoverData.justStartedPan=!1}else pn={x:Ve[0]*ge,y:Ve[1]*ge};pe.panBy(pn),pe.emit("dragpan"),r.hoverData.dragged=!0}ke=r.projectIntoViewport(j.clientX,j.clientY)}else if(Ue[4]==1&&(He==null||He.pannable())){if(xt){if(!r.hoverData.dragging&&pe.boxSelectionEnabled()&&(gr||!pe.panningEnabled()||!pe.userPanningEnabled()))dn();else if(!r.hoverData.selecting&&pe.panningEnabled()&&pe.userPanningEnabled()){var jr=o(He,r.hoverData.downs);jr&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Ue[4]=0,r.data.bgActivePosistion=wn(Ie),r.redrawHint("select",!0),r.redraw())}He&&He.pannable()&&He.active()&&He.unactivate()}}else{if(He&&He.pannable()&&He.active()&&He.unactivate(),(!He||!He.grabbed())&&qe!=Xe&&(Xe&&n(Xe,["mouseout","tapdragout"],j,{x:ke[0],y:ke[1]}),qe&&n(qe,["mouseover","tapdragover"],j,{x:ke[0],y:ke[1]}),r.hoverData.last=qe),He)if(xt){if(pe.boxSelectionEnabled()&&gr)He&&He.grabbed()&&(k(st),He.emit("freeon"),st.emit("free"),r.dragData.didDrag&&(He.emit("dragfreeon"),st.emit("dragfree"))),dn();else if(He&&He.grabbed()&&r.nodeIsDraggable(He)){var $t=!r.dragData.didDrag;$t&&r.redrawHint("eles",!0),r.dragData.didDrag=!0;var Gt=pe.collection();r.hoverData.draggingEles||w(st,{inDragLayer:!0});var _t={x:0,y:0};if(Ae(Ve[0])&&Ae(Ve[1])&&(_t.x+=Ve[0],_t.y+=Ve[1],$t)){var Lr=r.hoverData.dragDelta;Lr&&Ae(Lr[0])&&Ae(Lr[1])&&(_t.x+=Lr[0],_t.y+=Lr[1])}for(var Br=0;Br<st.length;Br++){var gn=st[Br];r.nodeIsDraggable(gn)&&gn.grabbed()&&Gt.push(gn)}r.hoverData.draggingEles=!0,Gt.silentShift(_t).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else Ar();we=!0}if(Ue[2]=ke[0],Ue[3]=ke[1],we)return j.stopPropagation&&j.stopPropagation(),j.preventDefault&&j.preventDefault(),!1}},!1),r.registerBinding(window,"mouseup",function(j){var fe=r.hoverData.capture;if(!!fe){r.hoverData.capture=!1;var we=r.cy,pe=r.projectIntoViewport(j.clientX,j.clientY),ge=r.selection,Ne=r.findNearestElement(pe[0],pe[1],!0,!1),ke=r.dragData.possibleDragElements,Ie=r.hoverData.down,We=i(j);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Ie&&Ie.unactivate(),r.hoverData.which===3){var Ue={originalEvent:j,type:"cxttapend",position:{x:pe[0],y:pe[1]}};if(Ie?Ie.emit(Ue):we.emit(Ue),!r.hoverData.cxtDragged){var qe={originalEvent:j,type:"cxttap",position:{x:pe[0],y:pe[1]}};Ie?Ie.emit(qe):we.emit(qe)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(n(Ne,["mouseup","tapend","vmouseup"],j,{x:pe[0],y:pe[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&n(Ie,["click","tap","vclick"],j,{x:pe[0],y:pe[1]}),Ie==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!i(j)&&(we.$(e).unselect(["tapunselect"]),ke.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=ke=we.collection()),Ne==Ie&&!r.dragData.didDrag&&!r.hoverData.selecting&&Ne!=null&&Ne._private.selectable&&(r.hoverData.dragging||(we.selectionType()==="additive"||We?Ne.selected()?Ne.unselect(["tapunselect"]):Ne.select(["tapselect"]):We||(we.$(e).unmerge(Ne).unselect(["tapunselect"]),Ne.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var Xe=we.collection(r.getAllInBox(ge[0],ge[1],ge[2],ge[3]));r.redrawHint("select",!0),Xe.length>0&&r.redrawHint("eles",!0),we.emit({type:"boxend",originalEvent:j,position:{x:pe[0],y:pe[1]}});var He=function(xt){return xt.selectable()&&!xt.selected()};we.selectionType()==="additive"||We||we.$(e).unmerge(Xe).unselect(),Xe.emit("box").stdFilter(He).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ge[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var Ve=Ie&&Ie.grabbed();k(ke),Ve&&(Ie.emit("freeon"),ke.emit("free"),r.dragData.didDrag&&(Ie.emit("dragfreeon"),ke.emit("dragfree")))}}ge[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null}},!1);var q=function(j){if(!r.scrollingPage){var fe=r.cy,we=fe.zoom(),pe=fe.pan(),ge=r.projectIntoViewport(j.clientX,j.clientY),Ne=[ge[0]*we+pe.x,ge[1]*we+pe.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||_()){j.preventDefault();return}if(fe.panningEnabled()&&fe.userPanningEnabled()&&fe.zoomingEnabled()&&fe.userZoomingEnabled()){j.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var ke;j.deltaY!=null?ke=j.deltaY/-250:j.wheelDeltaY!=null?ke=j.wheelDeltaY/1e3:ke=j.wheelDelta/1e3,ke=ke*r.wheelSensitivity;var Ie=j.deltaMode===1;Ie&&(ke*=33);var We=fe.zoom()*Math.pow(10,ke);j.type==="gesturechange"&&(We=r.gestureStartZoom*j.scale),fe.zoom({level:We,renderedPosition:{x:Ne[0],y:Ne[1]}}),fe.emit(j.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",q,!0),r.registerBinding(window,"scroll",function(j){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(j){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||j.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(ye){r.hasTouchStarted||q(ye)},!0),r.registerBinding(r.container,"mouseout",function(j){var fe=r.projectIntoViewport(j.clientX,j.clientY);r.cy.emit({originalEvent:j,type:"mouseout",position:{x:fe[0],y:fe[1]}})},!1),r.registerBinding(r.container,"mouseover",function(j){var fe=r.projectIntoViewport(j.clientX,j.clientY);r.cy.emit({originalEvent:j,type:"mouseover",position:{x:fe[0],y:fe[1]}})},!1);var ae,ne,re,oe,ie,ve,le,he,se,ce,be,de,xe,Ce=function(j,fe,we,pe){return Math.sqrt((we-j)*(we-j)+(pe-fe)*(pe-fe))},Te=function(j,fe,we,pe){return(we-j)*(we-j)+(pe-fe)*(pe-fe)},Se;r.registerBinding(r.container,"touchstart",Se=function(j){if(r.hasTouchStarted=!0,!!te(j)){R(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var fe=r.cy,we=r.touchData.now,pe=r.touchData.earlier;if(j.touches[0]){var ge=r.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);we[0]=ge[0],we[1]=ge[1]}if(j.touches[1]){var ge=r.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);we[2]=ge[0],we[3]=ge[1]}if(j.touches[2]){var ge=r.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);we[4]=ge[0],we[5]=ge[1]}if(j.touches[1]){r.touchData.singleTouchMoved=!0,k(r.dragData.touchDragEles);var Ne=r.findContainerClientCoords();se=Ne[0],ce=Ne[1],be=Ne[2],de=Ne[3],ae=j.touches[0].clientX-se,ne=j.touches[0].clientY-ce,re=j.touches[1].clientX-se,oe=j.touches[1].clientY-ce,xe=0<=ae&&ae<=be&&0<=re&&re<=be&&0<=ne&&ne<=de&&0<=oe&&oe<=de;var ke=fe.pan(),Ie=fe.zoom();ie=Ce(ae,ne,re,oe),ve=Te(ae,ne,re,oe),le=[(ae+re)/2,(ne+oe)/2],he=[(le[0]-ke.x)/Ie,(le[1]-ke.y)/Ie];var We=200,Ue=We*We;if(ve<Ue&&!j.touches[2]){var qe=r.findNearestElement(we[0],we[1],!0,!0),Xe=r.findNearestElement(we[2],we[3],!0,!0);qe&&qe.isNode()?(qe.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:we[0],y:we[1]}}),r.touchData.start=qe):Xe&&Xe.isNode()?(Xe.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:we[0],y:we[1]}}),r.touchData.start=Xe):fe.emit({originalEvent:j,type:"cxttapstart",position:{x:we[0],y:we[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(j.touches[2])fe.boxSelectionEnabled()&&j.preventDefault();else if(!j.touches[1]){if(j.touches[0]){var He=r.findNearestElements(we[0],we[1],!0,!0),Ve=He[0];if(Ve!=null&&(Ve.activate(),r.touchData.start=Ve,r.touchData.starts=He,r.nodeIsGrabbable(Ve))){var st=r.dragData.touchDragEles=fe.collection(),xt=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),Ve.selected()?(xt=fe.$(function(It){return It.selected()&&r.nodeIsGrabbable(It)}),w(xt,{addToList:st})):A(Ve,{addToList:st}),p(Ve);var Jt=function(gr){return{originalEvent:j,type:gr,position:{x:we[0],y:we[1]}}};Ve.emit(Jt("grabon")),xt?xt.forEach(function(It){It.emit(Jt("grab"))}):Ve.emit(Jt("grab"))}n(Ve,["touchstart","tapstart","vmousedown"],j,{x:we[0],y:we[1]}),Ve==null&&(r.data.bgActivePosistion={x:ge[0],y:ge[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&n(r.touchData.start,["taphold"],j,{x:we[0],y:we[1]})},r.tapholdDuration)}}if(j.touches.length>=1){for(var er=r.touchData.startPosition=[],Et=0;Et<we.length;Et++)er[Et]=pe[Et]=we[Et];var Ut=j.touches[0];r.touchData.startGPosition=[Ut.clientX,Ut.clientY]}}},!1);var me;r.registerBinding(window,"touchmove",me=function(j){var fe=r.touchData.capture;if(!(!fe&&!te(j))){var we=r.selection,pe=r.cy,ge=r.touchData.now,Ne=r.touchData.earlier,ke=pe.zoom();if(j.touches[0]){var Ie=r.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);ge[0]=Ie[0],ge[1]=Ie[1]}if(j.touches[1]){var Ie=r.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);ge[2]=Ie[0],ge[3]=Ie[1]}if(j.touches[2]){var Ie=r.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);ge[4]=Ie[0],ge[5]=Ie[1]}var We=r.touchData.startGPosition,Ue;if(fe&&j.touches[0]&&We){for(var qe=[],Xe=0;Xe<ge.length;Xe++)qe[Xe]=ge[Xe]-Ne[Xe];var He=j.touches[0].clientX-We[0],Ve=He*He,st=j.touches[0].clientY-We[1],xt=st*st,Jt=Ve+xt;Ue=Jt>=r.touchTapThreshold2}if(fe&&r.touchData.cxt){j.preventDefault();var er=j.touches[0].clientX-se,Et=j.touches[0].clientY-ce,Ut=j.touches[1].clientX-se,It=j.touches[1].clientY-ce,gr=Te(er,Et,Ut,It),Ar=gr/ve,dn=150,Xr=dn*dn,pn=1.5,wi=pn*pn;if(Ar>=wi||gr>=Xr){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var jr={originalEvent:j,type:"cxttapend",position:{x:ge[0],y:ge[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(jr),r.touchData.start=null):pe.emit(jr)}}if(fe&&r.touchData.cxt){var jr={originalEvent:j,type:"cxtdrag",position:{x:ge[0],y:ge[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(jr):pe.emit(jr),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var $t=r.findNearestElement(ge[0],ge[1],!0,!0);(!r.touchData.cxtOver||$t!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:ge[0],y:ge[1]}}),r.touchData.cxtOver=$t,$t&&$t.emit({originalEvent:j,type:"cxtdragover",position:{x:ge[0],y:ge[1]}}))}else if(fe&&j.touches[2]&&pe.boxSelectionEnabled())j.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||pe.emit({originalEvent:j,type:"boxstart",position:{x:ge[0],y:ge[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,we[4]=1,!we||we.length===0||we[0]===void 0?(we[0]=(ge[0]+ge[2]+ge[4])/3,we[1]=(ge[1]+ge[3]+ge[5])/3,we[2]=(ge[0]+ge[2]+ge[4])/3+1,we[3]=(ge[1]+ge[3]+ge[5])/3+1):(we[2]=(ge[0]+ge[2]+ge[4])/3,we[3]=(ge[1]+ge[3]+ge[5])/3),r.redrawHint("select",!0),r.redraw();else if(fe&&j.touches[1]&&!r.touchData.didSelect&&pe.zoomingEnabled()&&pe.panningEnabled()&&pe.userZoomingEnabled()&&pe.userPanningEnabled()){j.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Gt=r.dragData.touchDragEles;if(Gt){r.redrawHint("drag",!0);for(var _t=0;_t<Gt.length;_t++){var Lr=Gt[_t]._private;Lr.grabbed=!1,Lr.rscratch.inDragLayer=!1}}var Br=r.touchData.start,er=j.touches[0].clientX-se,Et=j.touches[0].clientY-ce,Ut=j.touches[1].clientX-se,It=j.touches[1].clientY-ce,gn=Ce(er,Et,Ut,It),Po=gn/ie;if(xe){var Zr=er-ae,dh=Et-ne,ph=Ut-re,gh=It-oe,mh=(Zr+ph)/2,yh=(dh+gh)/2,Yn=pe.zoom(),Ao=Yn*Po,xi=pe.pan(),Js=he[0]*Yn+xi.x,el=he[1]*Yn+xi.y,bh={x:-Ao/Yn*(Js-xi.x-mh)+Js,y:-Ao/Yn*(el-xi.y-yh)+el};if(Br&&Br.active()){var Gt=r.dragData.touchDragEles;k(Gt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Br.unactivate().emit("freeon"),Gt.emit("free"),r.dragData.didDrag&&(Br.emit("dragfreeon"),Gt.emit("dragfree"))}pe.viewport({zoom:Ao,pan:bh,cancelOnFailedZoom:!0}),pe.emit("pinchzoom"),ie=gn,ae=er,ne=Et,re=Ut,oe=It,r.pinching=!0}if(j.touches[0]){var Ie=r.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);ge[0]=Ie[0],ge[1]=Ie[1]}if(j.touches[1]){var Ie=r.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);ge[2]=Ie[0],ge[3]=Ie[1]}if(j.touches[2]){var Ie=r.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);ge[4]=Ie[0],ge[5]=Ie[1]}}else if(j.touches[0]&&!r.touchData.didSelect){var tr=r.touchData.start,Lo=r.touchData.last,$t;if(!r.hoverData.draggingEles&&!r.swipePanning&&($t=r.findNearestElement(ge[0],ge[1],!0,!0)),fe&&tr!=null&&j.preventDefault(),fe&&tr!=null&&r.nodeIsDraggable(tr))if(Ue){var Gt=r.dragData.touchDragEles,tl=!r.dragData.didDrag;tl&&w(Gt,{inDragLayer:!0}),r.dragData.didDrag=!0;var Un={x:0,y:0};if(Ae(qe[0])&&Ae(qe[1])&&(Un.x+=qe[0],Un.y+=qe[1],tl)){r.redrawHint("eles",!0);var rr=r.touchData.dragDelta;rr&&Ae(rr[0])&&Ae(rr[1])&&(Un.x+=rr[0],Un.y+=rr[1])}r.hoverData.draggingEles=!0,Gt.silentShift(Un).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Ne[0]&&r.touchData.startPosition[1]==Ne[1]&&r.redrawHint("eles",!0),r.redraw()}else{var rr=r.touchData.dragDelta=r.touchData.dragDelta||[];rr.length===0?(rr.push(qe[0]),rr.push(qe[1])):(rr[0]+=qe[0],rr[1]+=qe[1])}if(n(tr||$t,["touchmove","tapdrag","vmousemove"],j,{x:ge[0],y:ge[1]}),(!tr||!tr.grabbed())&&$t!=Lo&&(Lo&&Lo.emit({originalEvent:j,type:"tapdragout",position:{x:ge[0],y:ge[1]}}),$t&&$t.emit({originalEvent:j,type:"tapdragover",position:{x:ge[0],y:ge[1]}})),r.touchData.last=$t,fe)for(var _t=0;_t<ge.length;_t++)ge[_t]&&r.touchData.startPosition[_t]&&Ue&&(r.touchData.singleTouchMoved=!0);if(fe&&(tr==null||tr.pannable())&&pe.panningEnabled()&&pe.userPanningEnabled()){var wh=o(tr,r.touchData.starts);wh&&(j.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=wn(r.touchData.startPosition)),r.swipePanning?(pe.panBy({x:qe[0]*ke,y:qe[1]*ke}),pe.emit("dragpan")):Ue&&(r.swipePanning=!0,pe.panBy({x:He*ke,y:st*ke}),pe.emit("dragpan"),tr&&(tr.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Ie=r.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);ge[0]=Ie[0],ge[1]=Ie[1]}}for(var Xe=0;Xe<ge.length;Xe++)Ne[Xe]=ge[Xe];fe&&j.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var ue;r.registerBinding(window,"touchcancel",ue=function(j){var fe=r.touchData.start;r.touchData.capture=!1,fe&&fe.unactivate()});var Ee;if(r.registerBinding(window,"touchend",Ee=function(j){var fe=r.touchData.start,we=r.touchData.capture;if(we)j.touches.length===0&&(r.touchData.capture=!1),j.preventDefault();else return;var pe=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ge=r.cy,Ne=ge.zoom(),ke=r.touchData.now,Ie=r.touchData.earlier;if(j.touches[0]){var We=r.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);ke[0]=We[0],ke[1]=We[1]}if(j.touches[1]){var We=r.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);ke[2]=We[0],ke[3]=We[1]}if(j.touches[2]){var We=r.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);ke[4]=We[0],ke[5]=We[1]}fe&&fe.unactivate();var Ue;if(r.touchData.cxt){if(Ue={originalEvent:j,type:"cxttapend",position:{x:ke[0],y:ke[1]}},fe?fe.emit(Ue):ge.emit(Ue),!r.touchData.cxtDragged){var qe={originalEvent:j,type:"cxttap",position:{x:ke[0],y:ke[1]}};fe?fe.emit(qe):ge.emit(qe)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!j.touches[2]&&ge.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var Xe=ge.collection(r.getAllInBox(pe[0],pe[1],pe[2],pe[3]));pe[0]=void 0,pe[1]=void 0,pe[2]=void 0,pe[3]=void 0,pe[4]=0,r.redrawHint("select",!0),ge.emit({type:"boxend",originalEvent:j,position:{x:ke[0],y:ke[1]}});var He=function(Xr){return Xr.selectable()&&!Xr.selected()};Xe.emit("box").stdFilter(He).select().emit("boxselect"),Xe.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(fe!=null&&fe.unactivate(),j.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!j.touches[1]){if(!j.touches[0]){if(!j.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Ve=r.dragData.touchDragEles;if(fe!=null){var st=fe._private.grabbed;k(Ve),r.redrawHint("drag",!0),r.redrawHint("eles",!0),st&&(fe.emit("freeon"),Ve.emit("free"),r.dragData.didDrag&&(fe.emit("dragfreeon"),Ve.emit("dragfree"))),n(fe,["touchend","tapend","vmouseup","tapdragout"],j,{x:ke[0],y:ke[1]}),fe.unactivate(),r.touchData.start=null}else{var xt=r.findNearestElement(ke[0],ke[1],!0,!0);n(xt,["touchend","tapend","vmouseup","tapdragout"],j,{x:ke[0],y:ke[1]})}var Jt=r.touchData.startPosition[0]-ke[0],er=Jt*Jt,Et=r.touchData.startPosition[1]-ke[1],Ut=Et*Et,It=er+Ut,gr=It*Ne*Ne;r.touchData.singleTouchMoved||(fe||ge.$(":selected").unselect(["tapunselect"]),n(fe,["tap","vclick"],j,{x:ke[0],y:ke[1]})),fe!=null&&!r.dragData.didDrag&&fe._private.selectable&&gr<r.touchTapThreshold2&&!r.pinching&&(ge.selectionType()==="single"?(ge.$(e).unmerge(fe).unselect(["tapunselect"]),fe.select(["tapselect"])):fe.selected()?fe.unselect(["tapunselect"]):fe.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Ar=0;Ar<ke.length;Ar++)Ie[Ar]=ke[Ar];r.dragData.didDrag=!1,j.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=null,r.touchData.startGPosition=null,r.touchData.didSelect=!1),j.touches.length<2&&(j.touches.length===1&&(r.touchData.startGPosition=[j.touches[0].clientX,j.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent=="undefined"){var Pe=[],De=function(j){return{clientX:j.clientX,clientY:j.clientY,force:1,identifier:j.pointerId,pageX:j.pageX,pageY:j.pageY,radiusX:j.width/2,radiusY:j.height/2,screenX:j.screenX,screenY:j.screenY,target:j.target}},Re=function(j){return{event:j,touch:De(j)}},Ge=function(j){Pe.push(Re(j))},Ke=function(j){for(var fe=0;fe<Pe.length;fe++){var we=Pe[fe];if(we.event.pointerId===j.pointerId){Pe.splice(fe,1);return}}},Me=function(j){var fe=Pe.filter(function(we){return we.event.pointerId===j.pointerId})[0];fe.event=j,fe.touch=De(j)},Be=function(j){j.touches=Pe.map(function(fe){return fe.touch})},ze=function(j){return j.pointerType==="mouse"||j.pointerType===4};r.registerBinding(r.container,"pointerdown",function(ye){ze(ye)||(ye.preventDefault(),Ge(ye),Be(ye),Se(ye))}),r.registerBinding(r.container,"pointerup",function(ye){ze(ye)||(Ke(ye),Be(ye),Ee(ye))}),r.registerBinding(r.container,"pointercancel",function(ye){ze(ye)||(Ke(ye),Be(ye),ue(ye))}),r.registerBinding(r.container,"pointermove",function(ye){ze(ye)||(ye.preventDefault(),Me(ye),Be(ye),me(ye))})}};var xr={};xr.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(i,o,s,l,f){this.renderer.nodeShapeImpl("polygon",i,o,s,l,f,this.points)},intersectLine:function(i,o,s,l,f,h,p){return Oa(f,h,this.points,i,o,s/2,l/2,p)},checkPoint:function(i,o,s,l,f,h,p){return br(i,o,this.points,h,p,l,f,[0,-1],s)}}};xr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,n,i,o,s){this.renderer.nodeShapeImpl(this.name,e,n,i,o,s)},intersectLine:function(e,n,i,o,s,l,f){return ld(s,l,e,n,i/2+f,o/2+f)},checkPoint:function(e,n,i,o,s,l,f){return tn(e,n,o,s,l,f,i)}}};xr.generateRoundPolygon=function(r,e){for(var n=new Array(e.length*2),i=0;i<e.length/2;i++){var o=i*2,s=void 0;i<e.length/2-1?s=(i+1)*2:s=0,n[i*4]=e[o],n[i*4+1]=e[o+1];var l=e[s]-e[o],f=e[s+1]-e[o+1],h=Math.sqrt(l*l+f*f);n[i*4+2]=l/h,n[i*4+3]=f/h}return this.nodeShapes[r]={renderer:this,name:r,points:n,draw:function(g,m,y,w,A){this.renderer.nodeShapeImpl("round-polygon",g,m,y,w,A,this.points)},intersectLine:function(g,m,y,w,A,k,B){return ud(A,k,this.points,g,m,y,w)},checkPoint:function(g,m,y,w,A,k,B){return sd(g,m,this.points,k,B,w,A)}}};xr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:zt(4,0),draw:function(e,n,i,o,s){this.renderer.nodeShapeImpl(this.name,e,n,i,o,s)},intersectLine:function(e,n,i,o,s,l,f){return _l(s,l,e,n,i,o,f)},checkPoint:function(e,n,i,o,s,l,f){var h=Na(o,s),p=h*2;return!!(br(e,n,this.points,l,f,o,s-p,[0,-1],i)||br(e,n,this.points,l,f,o-p,s,[0,-1],i)||tn(e,n,p,p,l-o/2+h,f-s/2+h,i)||tn(e,n,p,p,l+o/2-h,f-s/2+h,i)||tn(e,n,p,p,l+o/2-h,f+s/2-h,i)||tn(e,n,p,p,l-o/2+h,f+s/2-h,i))}}};xr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Kl(),points:zt(4,0),draw:function(e,n,i,o,s){this.renderer.nodeShapeImpl(this.name,e,n,i,o,s)},generateCutTrianglePts:function(e,n,i,o){var s=this.cornerLength,l=n/2,f=e/2,h=i-f,p=i+f,g=o-l,m=o+l;return{topLeft:[h,g+s,h+s,g,h+s,g+s],topRight:[p-s,g,p,g+s,p-s,g+s],bottomRight:[p,m-s,p-s,m,p-s,m-s],bottomLeft:[h+s,m,h,m-s,h+s,m-s]}},intersectLine:function(e,n,i,o,s,l,f){var h=this.generateCutTrianglePts(i+2*f,o+2*f,e,n),p=[].concat.apply([],[h.topLeft.splice(0,4),h.topRight.splice(0,4),h.bottomRight.splice(0,4),h.bottomLeft.splice(0,4)]);return Oa(s,l,p,e,n)},checkPoint:function(e,n,i,o,s,l,f){if(br(e,n,this.points,l,f,o,s-2*this.cornerLength,[0,-1],i)||br(e,n,this.points,l,f,o-2*this.cornerLength,s,[0,-1],i))return!0;var h=this.generateCutTrianglePts(o,s,l,f);return Ht(e,n,h.topLeft)||Ht(e,n,h.topRight)||Ht(e,n,h.bottomRight)||Ht(e,n,h.bottomLeft)}}};xr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:zt(4,0),draw:function(e,n,i,o,s){this.renderer.nodeShapeImpl(this.name,e,n,i,o,s)},intersectLine:function(e,n,i,o,s,l,f){var h=.15,p=.5,g=.85,m=this.generateBarrelBezierPts(i+2*f,o+2*f,e,n),y=function(k){var B=xn({x:k[0],y:k[1]},{x:k[2],y:k[3]},{x:k[4],y:k[5]},h),R=xn({x:k[0],y:k[1]},{x:k[2],y:k[3]},{x:k[4],y:k[5]},p),z=xn({x:k[0],y:k[1]},{x:k[2],y:k[3]},{x:k[4],y:k[5]},g);return[k[0],k[1],B.x,B.y,R.x,R.y,z.x,z.y,k[4],k[5]]},w=[].concat(y(m.topLeft),y(m.topRight),y(m.bottomRight),y(m.bottomLeft));return Oa(s,l,w,e,n)},generateBarrelBezierPts:function(e,n,i,o){var s=n/2,l=e/2,f=i-l,h=i+l,p=o-s,g=o+s,m=jo(e,n),y=m.heightOffset,w=m.widthOffset,A=m.ctrlPtOffsetPct*e,k={topLeft:[f,p+y,f+A,p,f+w,p],topRight:[h-w,p,h-A,p,h,p+y],bottomRight:[h,g-y,h-A,g,h-w,g],bottomLeft:[f+w,g,f+A,g,f,g-y]};return k.topLeft.isTop=!0,k.topRight.isTop=!0,k.bottomLeft.isBottom=!0,k.bottomRight.isBottom=!0,k},checkPoint:function(e,n,i,o,s,l,f){var h=jo(o,s),p=h.heightOffset,g=h.widthOffset;if(br(e,n,this.points,l,f,o,s-2*p,[0,-1],i)||br(e,n,this.points,l,f,o-2*g,s,[0,-1],i))return!0;for(var m=this.generateBarrelBezierPts(o,s,l,f),y=function(_,te,q){var ae=q[4],ne=q[2],re=q[0],oe=q[5],ie=q[1],ve=Math.min(ae,re),le=Math.max(ae,re),he=Math.min(oe,ie),se=Math.max(oe,ie);if(ve<=_&&_<=le&&he<=te&&te<=se){var ce=cd(ae,ne,re),be=nd(ce[0],ce[1],ce[2],_),de=be.filter(function(xe){return 0<=xe&&xe<=1});if(de.length>0)return de[0]}return null},w=Object.keys(m),A=0;A<w.length;A++){var k=w[A],B=m[k],R=y(e,n,B);if(R!=null){var z=B[5],$=B[3],H=B[1],X=bt(z,$,H,R);if(B.isTop&&X<=n||B.isBottom&&n<=X)return!0}}return!1}}};xr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:zt(4,0),draw:function(e,n,i,o,s){this.renderer.nodeShapeImpl(this.name,e,n,i,o,s)},intersectLine:function(e,n,i,o,s,l,f){var h=e-(i/2+f),p=n-(o/2+f),g=p,m=e+(i/2+f),y=zr(s,l,e,n,h,p,m,g,!1);return y.length>0?y:_l(s,l,e,n,i,o,f)},checkPoint:function(e,n,i,o,s,l,f){var h=Na(o,s),p=2*h;if(br(e,n,this.points,l,f,o,s-p,[0,-1],i)||br(e,n,this.points,l,f,o-p,s,[0,-1],i))return!0;var g=o/2+2*i,m=s/2+2*i,y=[l-g,f-m,l-g,f,l+g,f,l+g,f-m];return!!(Ht(e,n,y)||tn(e,n,p,p,l+o/2-h,f+s/2-h,i)||tn(e,n,p,p,l-o/2+h,f+s/2-h,i))}}};xr.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",zt(3,0)),this.generateRoundPolygon("round-triangle",zt(3,0)),this.generatePolygon("rectangle",zt(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",zt(5,0)),this.generateRoundPolygon("round-pentagon",zt(5,0)),this.generatePolygon("hexagon",zt(6,0)),this.generateRoundPolygon("round-hexagon",zt(6,0)),this.generatePolygon("heptagon",zt(7,0)),this.generateRoundPolygon("round-heptagon",zt(7,0)),this.generatePolygon("octagon",zt(8,0)),this.generateRoundPolygon("round-octagon",zt(8,0));var i=new Array(20);{var o=Uo(5,0),s=Uo(5,Math.PI/5),l=.5*(3-Math.sqrt(5));l*=1.57;for(var f=0;f<s.length/2;f++)s[f*2]*=l,s[f*2+1]*=l;for(var f=0;f<20/4;f++)i[f*4]=o[f*2],i[f*4+1]=o[f*2+1],i[f*4+2]=s[f*2],i[f*4+3]=s[f*2+1]}i=ql(i),this.generatePolygon("star",i),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var h=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",h),this.generateRoundPolygon("round-tag",h)}r.makePolygon=function(p){var g=p.join("$"),m="polygon-"+g,y;return(y=this[m])?y:e.generatePolygon(m,p)}};var ai={};ai.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};ai.redraw=function(r){r=r||Ol();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};ai.beforeRender=function(r,e){if(!this.destroyed){e==null&&pt("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:r,priority:e}),n.sort(function(i,o){return o.priority-i.priority})}};var mc=function(e,n,i){for(var o=e.beforeRenderCallbacks,s=0;s<o.length;s++)o[s].fn(n,i)};ai.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var n=function i(o){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){mc(r,!0,o);var s=yr();r.render(r.renderOptions);var l=r.lastDrawTime=yr();r.averageRedrawTime===void 0&&(r.averageRedrawTime=l-s),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var f=l-s;r.redrawTotalTime+=f,r.lastRedrawTime=f,r.averageRedrawTime=r.averageRedrawTime/2+f/2,r.requestedFrame=!1}else mc(r,!1,o);r.skipFrame=!1,Di(i)}};Di(n)}};var Rg=function(e){this.init(e)},yc=Rg,zn=yc.prototype;zn.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];zn.init=function(r){var e=this;e.options=r,e.cy=r.cy;var n=e.container=r.cy.container();if(ht){var i=ht.document,o=i.head,s="__________cytoscape_stylesheet",l="__________cytoscape_container",f=i.getElementById(s)!=null;if(n.className.indexOf(l)<0&&(n.className=(n.className||"")+" "+l),!f){var h=i.createElement("style");h.id=s,h.innerHTML="."+l+" { position: relative; }",o.insertBefore(h,o.children[0])}var p=ht.getComputedStyle(n),g=p.getPropertyValue("position");g==="static"&&rt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Ae(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};zn.notify=function(r,e){var n=this,i=n.cy;if(!this.destroyed){if(r==="init"){n.load();return}if(r==="destroy"){n.destroy();return}(r==="add"||r==="remove"||r==="move"&&i.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&n.invalidateCachedZSortedEles(),r==="viewport"&&n.redrawHint("select",!0),(r==="load"||r==="resize"||r==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};zn.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var n=r.bindings[e],i=n,o=i.target;(o.off||o.removeEventListener).apply(o,i.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};zn.isHeadless=function(){return!1};[ps,pc,gc,In,xr,ai].forEach(function(r){_e(zn,r)});var ms=1e3/60,bc={setupDequeueing:function(e){return function(){var i=this,o=this.renderer;if(!i.dequeueingSetup){i.dequeueingSetup=!0;var s=Ci(function(){o.redrawHint("eles",!0),o.redrawHint("drag",!0),o.redraw()},e.deqRedrawThreshold),l=function(p,g){var m=yr(),y=o.averageRedrawTime,w=o.lastRedrawTime,A=[],k=o.cy.extent(),B=o.getPixelRatio();for(p||o.flushRenderedStyleQueue();;){var R=yr(),z=R-m,$=R-g;if(w<ms){var H=ms-(p?y:0);if($>=e.deqFastCost*H)break}else if(p){if(z>=e.deqCost*w||z>=e.deqAvgCost*y)break}else if($>=e.deqNoDrawCost*ms)break;var X=e.deq(i,B,k);if(X.length>0)for(var ee=0;ee<X.length;ee++)A.push(X[ee]);else break}A.length>0&&(e.onDeqd(i,A),!p&&e.shouldRedraw(i,A,B,k)&&s())},f=e.priority||Vo;o.beforeRender(l,f(i))}}}},Og=function(){function r(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ai;Io(this,r),this.idsByKey=new ur,this.keyForId=new ur,this.cachesByLvl=new ur,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return zo(r,[{key:"getIdsFor",value:function(n){n==null&&pt("Can not get id list for null key");var i=this.idsByKey,o=this.idsByKey.get(n);return o||(o=new bn,i.set(n,o)),o}},{key:"addIdForKey",value:function(n,i){n!=null&&this.getIdsFor(n).add(i)}},{key:"deleteIdForKey",value:function(n,i){n!=null&&this.getIdsFor(n).delete(i)}},{key:"getNumberOfIdsForKey",value:function(n){return n==null?0:this.getIdsFor(n).size}},{key:"updateKeyMappingFor",value:function(n){var i=n.id(),o=this.keyForId.get(i),s=this.getKey(n);this.deleteIdForKey(o,i),this.addIdForKey(s,i),this.keyForId.set(i,s)}},{key:"deleteKeyMappingFor",value:function(n){var i=n.id(),o=this.keyForId.get(i);this.deleteIdForKey(o,i),this.keyForId.delete(i)}},{key:"keyHasChangedFor",value:function(n){var i=n.id(),o=this.keyForId.get(i),s=this.getKey(n);return o!==s}},{key:"isInvalid",value:function(n){return this.keyHasChangedFor(n)||this.doesEleInvalidateKey(n)}},{key:"getCachesAt",value:function(n){var i=this.cachesByLvl,o=this.lvls,s=i.get(n);return s||(s=new ur,i.set(n,s),o.push(n)),s}},{key:"getCache",value:function(n,i){return this.getCachesAt(i).get(n)}},{key:"get",value:function(n,i){var o=this.getKey(n),s=this.getCache(o,i);return s!=null&&this.updateKeyMappingFor(n),s}},{key:"getForCachedKey",value:function(n,i){var o=this.keyForId.get(n.id()),s=this.getCache(o,i);return s}},{key:"hasCache",value:function(n,i){return this.getCachesAt(i).has(n)}},{key:"has",value:function(n,i){var o=this.getKey(n);return this.hasCache(o,i)}},{key:"setCache",value:function(n,i,o){o.key=n,this.getCachesAt(i).set(n,o)}},{key:"set",value:function(n,i,o){var s=this.getKey(n);this.setCache(s,i,o),this.updateKeyMappingFor(n)}},{key:"deleteCache",value:function(n,i){this.getCachesAt(i).delete(n)}},{key:"delete",value:function(n,i){var o=this.getKey(n);this.deleteCache(o,i)}},{key:"invalidateKey",value:function(n){var i=this;this.lvls.forEach(function(o){return i.deleteCache(n,o)})}},{key:"invalidate",value:function(n){var i=n.id(),o=this.keyForId.get(i);this.deleteKeyMappingFor(n);var s=this.doesEleInvalidateKey(n);return s&&this.invalidateKey(o),s||this.getNumberOfIdsForKey(o)===0}}]),r}(),wc=25,lo=50,uo=-4,ys=3,Ig=7.99,zg=8,Ng=1024,Fg=1024,$g=1024,_g=.2,Vg=.8,Hg=10,qg=.15,Kg=.1,Gg=.9,Wg=.9,Yg=100,Ug=1,Nn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Xg=kt({getKey:null,doesEleInvalidateKey:Ai,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ll,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ii=function(e,n){var i=this;i.renderer=e,i.onDequeues=[];var o=Xg(n);_e(i,o),i.lookup=new Og(o.getKey,o.doesEleInvalidateKey),i.setupDequeueing()},yt=ii.prototype;yt.reasons=Nn;yt.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};yt.getRetiredTextureQueue=function(r){var e=this,n=e.eleImgCaches.retired=e.eleImgCaches.retired||{},i=n[r]=n[r]||[];return i};yt.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new jn(function(n,i){return i.reqs-n.reqs});return e};yt.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};yt.getElement=function(r,e,n,i,o){var s=this,l=this.renderer,f=l.cy.zoom(),h=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!s.allowEdgeTxrCaching&&r.isEdge()||!s.allowParentTxrCaching&&r.isParent())return null;if(i==null&&(i=Math.ceil(Ko(f*n))),i<uo)i=uo;else if(f>=Ig||i>ys)return null;var p=Math.pow(2,i),g=e.h*p,m=e.w*p,y=l.eleTextBiggerThanMin(r,p);if(!this.isVisible(r,y))return null;var w=h.get(r,i);if(w&&w.invalidated&&(w.invalidated=!1,w.texture.invalidatedWidth-=w.width),w)return w;var A;if(g<=wc?A=wc:g<=lo?A=lo:A=Math.ceil(g/lo)*lo,g>$g||m>Fg)return null;var k=s.getTextureQueue(A),B=k[k.length-2],R=function(){return s.recycleTexture(A,m)||s.addTexture(A,m)};B||(B=k[k.length-1]),B||(B=R()),B.width-B.usedWidth<m&&(B=R());for(var z=function(le){return le&&le.scaledLabelShown===y},$=o&&o===Nn.dequeue,H=o&&o===Nn.highQuality,X=o&&o===Nn.downscale,ee,_=i+1;_<=ys;_++){var te=h.get(r,_);if(te){ee=te;break}}var q=ee&&ee.level===i+1?ee:null,ae=function(){B.context.drawImage(q.texture.canvas,q.x,0,q.width,q.height,B.usedWidth,0,m,g)};if(B.context.setTransform(1,0,0,1,0,0),B.context.clearRect(B.usedWidth,0,m,A),z(q))ae();else if(z(ee))if(H){for(var ne=ee.level;ne>i;ne--)q=s.getElement(r,e,n,ne,Nn.downscale);ae()}else return s.queueElement(r,ee.level-1),ee;else{var re;if(!$&&!H&&!X)for(var oe=i-1;oe>=uo;oe--){var ie=h.get(r,oe);if(ie){re=ie;break}}if(z(re))return s.queueElement(r,i),re;B.context.translate(B.usedWidth,0),B.context.scale(p,p),this.drawElement(B.context,r,e,y,!1),B.context.scale(1/p,1/p),B.context.translate(-B.usedWidth,0)}return w={x:B.usedWidth,texture:B,level:i,scale:p,width:m,height:g,scaledLabelShown:y},B.usedWidth+=Math.ceil(m+zg),B.eleCaches.push(w),h.set(r,i,w),s.checkTextureFullness(B),w};yt.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};yt.invalidateElement=function(r){var e=this,n=e.lookup,i=[],o=n.isInvalid(r);if(!!o){for(var s=uo;s<=ys;s++){var l=n.getForCachedKey(r,s);l&&i.push(l)}var f=n.invalidate(r);if(f)for(var h=0;h<i.length;h++){var p=i[h],g=p.texture;g.invalidatedWidth+=p.width,p.invalidated=!0,e.checkTextureUtility(g)}e.removeFromQueue(r)}};yt.checkTextureUtility=function(r){r.invalidatedWidth>=_g*r.width&&this.retireTexture(r)};yt.checkTextureFullness=function(r){var e=this,n=e.getTextureQueue(r.height);r.usedWidth/r.width>Vg&&r.fullnessChecks>=Hg?Or(n,r):r.fullnessChecks++};yt.retireTexture=function(r){var e=this,n=r.height,i=e.getTextureQueue(n),o=this.lookup;Or(i,r),r.retired=!0;for(var s=r.eleCaches,l=0;l<s.length;l++){var f=s[l];o.deleteCache(f.key,f.level)}Ho(s);var h=e.getRetiredTextureQueue(n);h.push(r)};yt.addTexture=function(r,e){var n=this,i=n.getTextureQueue(r),o={};return i.push(o),o.eleCaches=[],o.height=r,o.width=Math.max(Ng,e),o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,o.canvas=n.renderer.makeOffscreenCanvas(o.width,o.height),o.context=o.canvas.getContext("2d"),o};yt.recycleTexture=function(r,e){for(var n=this,i=n.getTextureQueue(r),o=n.getRetiredTextureQueue(r),s=0;s<o.length;s++){var l=o[s];if(l.width>=e)return l.retired=!1,l.usedWidth=0,l.invalidatedWidth=0,l.fullnessChecks=0,Ho(l.eleCaches),l.context.setTransform(1,0,0,1,0,0),l.context.clearRect(0,0,l.width,l.height),Or(o,l),i.push(l),l}};yt.queueElement=function(r,e){var n=this,i=n.getElementQueue(),o=n.getElementKeyToQueue(),s=this.getKey(r),l=o[s];if(l)l.level=Math.max(l.level,e),l.eles.merge(r),l.reqs++,i.updateItem(l);else{var f={eles:r.spawn().merge(r),level:e,reqs:1,key:s};i.push(f),o[s]=f}};yt.dequeue=function(r){for(var e=this,n=e.getElementQueue(),i=e.getElementKeyToQueue(),o=[],s=e.lookup,l=0;l<Ug&&n.size()>0;l++){var f=n.pop(),h=f.key,p=f.eles[0],g=s.hasCache(p,f.level);if(i[h]=null,g)continue;o.push(f);var m=e.getBoundingBox(p);e.getElement(p,m,r,f.level,Nn.dequeue)}return o};yt.removeFromQueue=function(r){var e=this,n=e.getElementQueue(),i=e.getElementKeyToQueue(),o=this.getKey(r),s=i[o];s!=null&&(s.eles.length===1?(s.reqs=_o,n.updateItem(s),n.pop(),i[o]=null):s.eles.unmerge(r))};yt.onDequeue=function(r){this.onDequeues.push(r)};yt.offDequeue=function(r){Or(this.onDequeues,r)};yt.setupDequeueing=bc.setupDequeueing({deqRedrawThreshold:Yg,deqCost:qg,deqAvgCost:Kg,deqNoDrawCost:Gg,deqFastCost:Wg,deq:function(e,n,i){return e.dequeue(n,i)},onDeqd:function(e,n){for(var i=0;i<e.onDequeues.length;i++){var o=e.onDequeues[i];o(n)}},shouldRedraw:function(e,n,i,o){for(var s=0;s<n.length;s++)for(var l=n[s].eles,f=0;f<l.length;f++){var h=l[f].boundingBox();if(Wo(h,o))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var jg=1,oi=-4,co=2,Zg=3.99,Qg=50,Jg=50,em=.15,tm=.1,rm=.9,nm=.9,am=1,xc=250,im=4e3*4e3,om=!0,Ec=function(e){var n=this,i=n.renderer=e,o=i.cy;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=yr()-2*xc,n.skipping=!1,n.eleTxrDeqs=o.collection(),n.scheduleElementRefinement=Ci(function(){n.refineElementTextures(n.eleTxrDeqs),n.eleTxrDeqs.unmerge(n.eleTxrDeqs)},Jg),i.beforeRender(function(l,f){f-n.lastInvalidationTime<=xc?n.skipping=!0:n.skipping=!1},i.beforeRenderPriorities.lyrTxrSkip);var s=function(f,h){return h.reqs-f.reqs};n.layersQueue=new jn(s),n.setupDequeueing()},Dt=Ec.prototype,kc=0,sm=Math.pow(2,53)-1;Dt.makeLayer=function(r,e){var n=Math.pow(2,e),i=Math.ceil(r.w*n),o=Math.ceil(r.h*n),s=this.renderer.makeOffscreenCanvas(i,o),l={id:kc=++kc%sm,bb:r,level:e,width:i,height:o,canvas:s,context:s.getContext("2d"),eles:[],elesQueue:[],reqs:0},f=l.context,h=-l.bb.x1,p=-l.bb.y1;return f.scale(n,n),f.translate(h,p),l};Dt.getLayers=function(r,e,n){var i=this,o=i.renderer,s=o.cy,l=s.zoom(),f=i.firstGet;if(i.firstGet=!1,n==null){if(n=Math.ceil(Ko(l*e)),n<oi)n=oi;else if(l>=Zg||n>co)return null}i.validateLayersElesOrdering(n,r);var h=i.layersByLevel,p=Math.pow(2,n),g=h[n]=h[n]||[],m,y=i.levelIsComplete(n,r),w,A=function(){var ae=function(ve){if(i.validateLayersElesOrdering(ve,r),i.levelIsComplete(ve,r))return w=h[ve],!0},ne=function(ve){if(!w)for(var le=n+ve;oi<=le&&le<=co&&!ae(le);le+=ve);};ne(1),ne(-1);for(var re=g.length-1;re>=0;re--){var oe=g[re];oe.invalid&&Or(g,oe)}};if(!y)A();else return g;var k=function(){if(!m){m=Vt();for(var ae=0;ae<r.length;ae++)Qv(m,r[ae].boundingBox())}return m},B=function(ae){ae=ae||{};var ne=ae.after;k();var re=m.w*p*(m.h*p);if(re>im)return null;var oe=i.makeLayer(m,n);if(ne!=null){var ie=g.indexOf(ne)+1;g.splice(ie,0,oe)}else(ae.insert===void 0||ae.insert)&&g.unshift(oe);return oe};if(i.skipping&&!f)return null;for(var R=null,z=r.length/jg,$=!f,H=0;H<r.length;H++){var X=r[H],ee=X._private.rscratch,_=ee.imgLayerCaches=ee.imgLayerCaches||{},te=_[n];if(te){R=te;continue}if((!R||R.eles.length>=z||!$l(R.bb,X.boundingBox()))&&(R=B({insert:!0,after:R}),!R))return null;w||$?i.queueLayer(R,X):i.drawEleInLayer(R,X,n,e),R.eles.push(X),_[n]=R}return w||($?null:g)};Dt.getEleLevelForLayerLevel=function(r,e){return r};Dt.drawEleInLayer=function(r,e,n,i){var o=this,s=this.renderer,l=r.context,f=e.boundingBox();f.w===0||f.h===0||!e.visible()||(n=o.getEleLevelForLayerLevel(n,i),s.setImgSmoothing(l,!1),s.drawCachedElement(l,e,null,null,n,om),s.setImgSmoothing(l,!0))};Dt.levelIsComplete=function(r,e){var n=this,i=n.layersByLevel[r];if(!i||i.length===0)return!1;for(var o=0,s=0;s<i.length;s++){var l=i[s];if(l.reqs>0||l.invalid)return!1;o+=l.eles.length}return o===e.length};Dt.validateLayersElesOrdering=function(r,e){var n=this.layersByLevel[r];if(!!n)for(var i=0;i<n.length;i++){for(var o=n[i],s=-1,l=0;l<e.length;l++)if(o.eles[0]===e[l]){s=l;break}if(s<0){this.invalidateLayer(o);continue}for(var f=s,l=0;l<o.eles.length;l++)if(o.eles[l]!==e[f+l]){this.invalidateLayer(o);break}}};Dt.updateElementsInLayers=function(r,e){for(var n=this,i=Qn(r[0]),o=0;o<r.length;o++)for(var s=i?null:r[o],l=i?r[o]:r[o].ele,f=l._private.rscratch,h=f.imgLayerCaches=f.imgLayerCaches||{},p=oi;p<=co;p++){var g=h[p];!g||s&&n.getEleLevelForLayerLevel(g.level)!==s.level||e(g,l,s)}};Dt.haveLayers=function(){for(var r=this,e=!1,n=oi;n<=co;n++){var i=r.layersByLevel[n];if(i&&i.length>0){e=!0;break}}return e};Dt.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=yr(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(i,o,s){e.invalidateLayer(i)}))};Dt.invalidateLayer=function(r){if(this.lastInvalidationTime=yr(),!r.invalid){var e=r.level,n=r.eles,i=this.layersByLevel[e];Or(i,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var o=0;o<n.length;o++){var s=n[o]._private.rscratch.imgLayerCaches;s&&(s[e]=null)}}};Dt.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(i,o,s){var l=i.replacement;if(l||(l=i.replacement=e.makeLayer(i.bb,i.level),l.replaces=i,l.eles=i.eles),!l.reqs)for(var f=0;f<l.eles.length;f++)e.queueLayer(l,l.eles[f])})};Dt.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Dt.queueLayer=function(r,e){var n=this,i=n.layersQueue,o=r.elesQueue,s=o.hasId=o.hasId||{};if(!r.replacement){if(e){if(s[e.id()])return;o.push(e),s[e.id()]=!0}r.reqs?(r.reqs++,i.updateItem(r)):(r.reqs=1,i.push(r))}};Dt.dequeue=function(r){for(var e=this,n=e.layersQueue,i=[],o=0;o<am&&n.size()!==0;){var s=n.peek();if(s.replacement){n.pop();continue}if(s.replaces&&s!==s.replaces.replacement){n.pop();continue}if(s.invalid){n.pop();continue}var l=s.elesQueue.shift();l&&(e.drawEleInLayer(s,l,s.level,r),o++),i.length===0&&i.push(!0),s.elesQueue.length===0&&(n.pop(),s.reqs=0,s.replaces&&e.applyLayerReplacement(s),e.requestRedraw())}return i};Dt.applyLayerReplacement=function(r){var e=this,n=e.layersByLevel[r.level],i=r.replaces,o=n.indexOf(i);if(!(o<0||i.invalid)){n[o]=r;for(var s=0;s<r.eles.length;s++){var l=r.eles[s]._private,f=l.imgLayerCaches=l.imgLayerCaches||{};f&&(f[r.level]=r)}e.requestRedraw()}};Dt.requestRedraw=Ci(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Dt.setupDequeueing=bc.setupDequeueing({deqRedrawThreshold:Qg,deqCost:em,deqAvgCost:tm,deqNoDrawCost:rm,deqFastCost:nm,deq:function(e,n){return e.dequeue(n)},onDeqd:Vo,shouldRedraw:Ll,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Cc={},Sc;function lm(r,e){for(var n=0;n<e.length;n++){var i=e[n];r.lineTo(i.x,i.y)}}function um(r,e,n){for(var i,o=0;o<e.length;o++){var s=e[o];o===0&&(i=s),r.lineTo(s.x,s.y)}r.quadraticCurveTo(n.x,n.y,i.x,i.y)}function Tc(r,e,n){r.beginPath&&r.beginPath();for(var i=e,o=0;o<i.length;o++){var s=i[o];r.lineTo(s.x,s.y)}var l=n,f=n[0];r.moveTo(f.x,f.y);for(var o=1;o<l.length;o++){var s=l[o];r.lineTo(s.x,s.y)}r.closePath&&r.closePath()}function cm(r,e,n,i,o){r.beginPath&&r.beginPath(),r.arc(n,i,o,0,Math.PI*2,!1);var s=e,l=s[0];r.moveTo(l.x,l.y);for(var f=0;f<s.length;f++){var h=s[f];r.lineTo(h.x,h.y)}r.closePath&&r.closePath()}function fm(r,e,n,i){r.arc(e,n,i,0,Math.PI*2,!1)}Cc.arrowShapeImpl=function(r){return(Sc||(Sc={polygon:lm,"triangle-backcurve":um,"triangle-tee":Tc,"circle-triangle":cm,"triangle-cross":Tc,circle:fm}))[r]};var Er={};Er.drawElement=function(r,e,n,i,o,s){var l=this;e.isNode()?l.drawNode(r,e,n,i,o,s):l.drawEdge(r,e,n,i,o,s)};Er.drawElementOverlay=function(r,e){var n=this;e.isNode()?n.drawNodeOverlay(r,e):n.drawEdgeOverlay(r,e)};Er.drawCachedElementPortion=function(r,e,n,i,o,s,l,f){var h=this,p=n.getBoundingBox(e);if(!(p.w===0||p.h===0)){var g=n.getElement(e,p,i,o,s);if(g!=null){var m=f(h,e);if(m===0)return;var y=l(h,e),w=p.x1,A=p.y1,k=p.w,B=p.h,R,z,$,H,X;if(y!==0){var ee=n.getRotationPoint(e);$=ee.x,H=ee.y,r.translate($,H),r.rotate(y),X=h.getImgSmoothing(r),X||h.setImgSmoothing(r,!0);var _=n.getRotationOffset(e);R=_.x,z=_.y}else R=w,z=A;var te;m!==1&&(te=r.globalAlpha,r.globalAlpha=te*m),r.drawImage(g.texture.canvas,g.x,0,g.width,g.height,R,z,k,B),m!==1&&(r.globalAlpha=te),y!==0&&(r.rotate(-y),r.translate(-$,-H),X||h.setImgSmoothing(r,!1))}else n.drawElement(r,e)}};var hm=function(){return 0},vm=function(e,n){return e.getTextAngle(n,null)},dm=function(e,n){return e.getTextAngle(n,"source")},pm=function(e,n){return e.getTextAngle(n,"target")},gm=function(e,n){return n.effectiveOpacity()},bs=function(e,n){return n.pstyle("text-opacity").pfValue*n.effectiveOpacity()};Er.drawCachedElement=function(r,e,n,i,o,s){var l=this,f=l.data,h=f.eleTxrCache,p=f.lblTxrCache,g=f.slbTxrCache,m=f.tlbTxrCache,y=e.boundingBox(),w=s===!0?h.reasons.highQuality:null;if(!(y.w===0||y.h===0||!e.visible())&&(!i||Wo(y,i))){var A=e.isEdge(),k=e.element()._private.rscratch.badLine;l.drawCachedElementPortion(r,e,h,n,o,w,hm,gm),(!A||!k)&&l.drawCachedElementPortion(r,e,p,n,o,w,vm,bs),A&&!k&&(l.drawCachedElementPortion(r,e,g,n,o,w,dm,bs),l.drawCachedElementPortion(r,e,m,n,o,w,pm,bs)),l.drawElementOverlay(r,e)}};Er.drawElements=function(r,e){for(var n=this,i=0;i<e.length;i++){var o=e[i];n.drawElement(r,o)}};Er.drawCachedElements=function(r,e,n,i){for(var o=this,s=0;s<e.length;s++){var l=e[s];o.drawCachedElement(r,l,n,i)}};Er.drawCachedNodes=function(r,e,n,i){for(var o=this,s=0;s<e.length;s++){var l=e[s];!l.isNode()||o.drawCachedElement(r,l,n,i)}};Er.drawLayeredElements=function(r,e,n,i){var o=this,s=o.data.lyrTxrCache.getLayers(e,n);if(s)for(var l=0;l<s.length;l++){var f=s[l],h=f.bb;h.w===0||h.h===0||r.drawImage(f.canvas,h.x1,h.y1,h.w,h.h)}else o.drawCachedElements(r,e,n,i)};var sn={};sn.drawEdge=function(r,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,l=this,f=e._private.rscratch;if(!(s&&!e.visible())&&!(f.badLine||f.allpts==null||isNaN(f.allpts[0]))){var h;n&&(h=n,r.translate(-h.x1,-h.y1));var p=s?e.pstyle("opacity").value:1,g=s?e.pstyle("line-opacity").value:1,m=e.pstyle("line-style").value,y=e.pstyle("width").pfValue,w=e.pstyle("line-cap").value,A=p*g,k=p*g,B=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A;r.lineWidth=y,r.lineCap=w,l.eleStrokeStyle(r,e,ae),l.drawEdgePath(e,r,f.allpts,m),r.lineCap="butt"},R=function(){!o||l.drawEdgeOverlay(r,e)},z=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k;l.drawArrowheads(r,e,ae)},$=function(){l.drawElementText(r,e,null,i)};r.lineJoin="round";var H=e.pstyle("ghost").value==="yes";if(H){var X=e.pstyle("ghost-offset-x").pfValue,ee=e.pstyle("ghost-offset-y").pfValue,_=e.pstyle("ghost-opacity").value,te=A*_;r.translate(X,ee),B(te),z(te),r.translate(-X,-ee)}B(),z(),R(),$(),n&&r.translate(h.x1,h.y1)}};sn.drawEdgeOverlay=function(r,e){if(!!e.visible()){var n=e.pstyle("overlay-opacity").value;if(n!==0){var i=this,o=i.usePaths(),s=e._private.rscratch,l=e.pstyle("overlay-padding").pfValue,f=2*l,h=e.pstyle("overlay-color").value;r.lineWidth=f,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,h[0],h[1],h[2],n),i.drawEdgePath(e,r,s.allpts,"solid")}}};sn.drawEdgePath=function(r,e,n,i){var o=r._private.rscratch,s=e,l,f=!1,h=this.usePaths(),p=r.pstyle("line-dash-pattern").pfValue,g=r.pstyle("line-dash-offset").pfValue;if(h){var m=n.join("$"),y=o.pathCacheKey&&o.pathCacheKey===m;y?(l=e=o.pathCache,f=!0):(l=e=new Path2D,o.pathCacheKey=m,o.pathCache=l)}if(s.setLineDash)switch(i){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash(p),s.lineDashOffset=g;break;case"solid":s.setLineDash([]);break}if(!f&&!o.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var w=2;w+3<n.length;w+=4)e.quadraticCurveTo(n[w],n[w+1],n[w+2],n[w+3]);break;case"straight":case"segments":case"haystack":for(var A=2;A+1<n.length;A+=2)e.lineTo(n[A],n[A+1]);break}e=s,h?e.stroke(l):e.stroke(),e.setLineDash&&e.setLineDash([])};sn.drawArrowheads=function(r,e,n){var i=e._private.rscratch,o=i.edgeType==="haystack";o||this.drawArrowhead(r,e,"source",i.arrowStartX,i.arrowStartY,i.srcArrowAngle,n),this.drawArrowhead(r,e,"mid-target",i.midX,i.midY,i.midtgtArrowAngle,n),this.drawArrowhead(r,e,"mid-source",i.midX,i.midY,i.midsrcArrowAngle,n),o||this.drawArrowhead(r,e,"target",i.arrowEndX,i.arrowEndY,i.tgtArrowAngle,n)};sn.drawArrowhead=function(r,e,n,i,o,s,l){if(!(isNaN(i)||i==null||isNaN(o)||o==null||isNaN(s)||s==null)){var f=this,h=e.pstyle(n+"-arrow-shape").value;if(h!=="none"){var p=e.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",g=e.pstyle(n+"-arrow-fill").value,m=e.pstyle("width").pfValue,y=e.pstyle("opacity").value;l===void 0&&(l=y);var w=r.globalCompositeOperation;(l!==1||g==="hollow")&&(r.globalCompositeOperation="destination-out",f.colorFillStyle(r,255,255,255,1),f.colorStrokeStyle(r,255,255,255,1),f.drawArrowShape(e,r,p,m,h,i,o,s),r.globalCompositeOperation=w);var A=e.pstyle(n+"-arrow-color").value;f.colorFillStyle(r,A[0],A[1],A[2],l),f.colorStrokeStyle(r,A[0],A[1],A[2],l),f.drawArrowShape(e,r,g,m,h,i,o,s)}}};sn.drawArrowShape=function(r,e,n,i,o,s,l,f){var h=this,p=this.usePaths()&&o!=="triangle-cross",g=!1,m,y=e,w={x:s,y:l},A=r.pstyle("arrow-scale").value,k=this.getArrowWidth(i,A),B=h.arrowShapes[o];if(p){var R=h.arrowPathCache=h.arrowPathCache||[],z=Qr(o),$=R[z];$!=null?(m=e=$,g=!0):(m=e=new Path2D,R[z]=m)}g||(e.beginPath&&e.beginPath(),p?B.draw(e,1,0,{x:0,y:0},1):B.draw(e,k,f,w,i),e.closePath&&e.closePath()),e=y,p&&(e.translate(s,l),e.rotate(f),e.scale(k,k)),(n==="filled"||n==="both")&&(p?e.fill(m):e.fill()),(n==="hollow"||n==="both")&&(e.lineWidth=(B.matchEdgeWidth?i:1)/(p?k:1),e.lineJoin="miter",p?e.stroke(m):e.stroke()),p&&(e.scale(1/k,1/k),e.rotate(-f),e.translate(-s,-l))};var ws={};ws.safeDrawImage=function(r,e,n,i,o,s,l,f,h,p){o<=0||s<=0||h<=0||p<=0||r.drawImage(e,n,i,o,s,l,f,h,p)};ws.drawInscribedImage=function(r,e,n,i,o){var s=this,l=n.position(),f=l.x,h=l.y,p=n.cy().style(),g=p.getIndexedStyle.bind(p),m=g(n,"background-fit","value",i),y=g(n,"background-repeat","value",i),w=n.width(),A=n.height(),k=n.padding()*2,B=w+(g(n,"background-width-relative-to","value",i)==="inner"?0:k),R=A+(g(n,"background-height-relative-to","value",i)==="inner"?0:k),z=n._private.rscratch,$=g(n,"background-clip","value",i),H=$==="node",X=g(n,"background-image-opacity","value",i)*o,ee=g(n,"background-image-smoothing","value",i),_=e.width||e.cachedW,te=e.height||e.cachedH;(_==null||te==null)&&(document.body.appendChild(e),_=e.cachedW=e.width||e.offsetWidth,te=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var q=_,ae=te;if(g(n,"background-width","value",i)!=="auto"&&(g(n,"background-width","units",i)==="%"?q=g(n,"background-width","pfValue",i)*B:q=g(n,"background-width","pfValue",i)),g(n,"background-height","value",i)!=="auto"&&(g(n,"background-height","units",i)==="%"?ae=g(n,"background-height","pfValue",i)*R:ae=g(n,"background-height","pfValue",i)),!(q===0||ae===0)){if(m==="contain"){var ne=Math.min(B/q,R/ae);q*=ne,ae*=ne}else if(m==="cover"){var ne=Math.max(B/q,R/ae);q*=ne,ae*=ne}var re=f-B/2,oe=g(n,"background-position-x","units",i),ie=g(n,"background-position-x","pfValue",i);oe==="%"?re+=(B-q)*ie:re+=ie;var ve=g(n,"background-offset-x","units",i),le=g(n,"background-offset-x","pfValue",i);ve==="%"?re+=(B-q)*le:re+=le;var he=h-R/2,se=g(n,"background-position-y","units",i),ce=g(n,"background-position-y","pfValue",i);se==="%"?he+=(R-ae)*ce:he+=ce;var be=g(n,"background-offset-y","units",i),de=g(n,"background-offset-y","pfValue",i);be==="%"?he+=(R-ae)*de:he+=de,z.pathCache&&(re-=f,he-=h,f=0,h=0);var xe=r.globalAlpha;r.globalAlpha=X;var Ce=s.getImgSmoothing(r),Te=!1;if(ee==="no"&&Ce?(s.setImgSmoothing(r,!1),Te=!0):ee==="yes"&&!Ce&&(s.setImgSmoothing(r,!0),Te=!0),y==="no-repeat")H&&(r.save(),z.pathCache?r.clip(z.pathCache):(s.nodeShapes[s.getNodeShape(n)].draw(r,f,h,B,R),r.clip())),s.safeDrawImage(r,e,0,0,_,te,re,he,q,ae),H&&r.restore();else{var Se=r.createPattern(e,y);r.fillStyle=Se,s.nodeShapes[s.getNodeShape(n)].draw(r,f,h,B,R),r.translate(re,he),r.fill(),r.translate(-re,-he)}r.globalAlpha=xe,Te&&s.setImgSmoothing(r,Ce)}};var ln={};ln.eleTextBiggerThanMin=function(r,e){if(!e){var n=r.cy().zoom(),i=this.getPixelRatio(),o=Math.ceil(Ko(n*i));e=Math.pow(2,o)}var s=r.pstyle("font-size").pfValue*e,l=r.pstyle("min-zoomed-font-size").pfValue;return!(s<l)};ln.drawElementText=function(r,e,n,i,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,l=this;if(i==null){if(s&&!l.eleTextBiggerThanMin(e))return}else if(i===!1)return;if(e.isNode()){var f=e.pstyle("label");if(!f||!f.value)return;var h=l.getLabelJustification(e);r.textAlign=h,r.textBaseline="bottom"}else{var p=e.element()._private.rscratch.badLine,g=e.pstyle("label"),m=e.pstyle("source-label"),y=e.pstyle("target-label");if(p||(!g||!g.value)&&(!m||!m.value)&&(!y||!y.value))return;r.textAlign="center",r.textBaseline="bottom"}var w=!n,A;n&&(A=n,r.translate(-A.x1,-A.y1)),o==null?(l.drawText(r,e,null,w,s),e.isEdge()&&(l.drawText(r,e,"source",w,s),l.drawText(r,e,"target",w,s))):l.drawText(r,e,o,w,s),n&&r.translate(A.x1,A.y1)};ln.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};ln.setupTextStyle=function(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue+"px",s=e.pstyle("font-family").strValue,l=e.pstyle("font-weight").strValue,f=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,h=e.pstyle("text-outline-opacity").value*f,p=e.pstyle("color").value,g=e.pstyle("text-outline-color").value;r.font=i+" "+l+" "+o+" "+s,r.lineJoin="round",this.colorFillStyle(r,p[0],p[1],p[2],f),this.colorStrokeStyle(r,g[0],g[1],g[2],h)};function mm(r,e,n,i,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;r.beginPath(),r.moveTo(e+s,n),r.lineTo(e+i-s,n),r.quadraticCurveTo(e+i,n,e+i,n+s),r.lineTo(e+i,n+o-s),r.quadraticCurveTo(e+i,n+o,e+i-s,n+o),r.lineTo(e+s,n+o),r.quadraticCurveTo(e,n+o,e,n+o-s),r.lineTo(e,n+s),r.quadraticCurveTo(e,n,e+s,n),r.closePath(),r.fill()}ln.getTextAngle=function(r,e){var n,i=r._private,o=i.rscratch,s=e?e+"-":"",l=r.pstyle(s+"text-rotation"),f=nr(o,"labelAngle",e);return l.strValue==="autorotate"?n=r.isEdge()?f:0:l.strValue==="none"?n=0:n=l.pfValue,n};ln.drawText=function(r,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=e._private,l=s.rscratch,f=o?e.effectiveOpacity():1;if(!(o&&(f===0||e.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var h=nr(l,"labelX",n),p=nr(l,"labelY",n),g,m,y=this.getLabelText(e,n);if(y!=null&&y!==""&&!isNaN(h)&&!isNaN(p)){this.setupTextStyle(r,e,o);var w=n?n+"-":"",A=nr(l,"labelWidth",n),k=nr(l,"labelHeight",n),B=e.pstyle(w+"text-margin-x").pfValue,R=e.pstyle(w+"text-margin-y").pfValue,z=e.isEdge(),$=e.pstyle("text-halign").value,H=e.pstyle("text-valign").value;z&&($="center",H="center"),h+=B,p+=R;var X;switch(i?X=this.getTextAngle(e,n):X=0,X!==0&&(g=h,m=p,r.translate(g,m),r.rotate(X),h=0,p=0),H){case"top":break;case"center":p+=k/2;break;case"bottom":p+=k;break}var ee=e.pstyle("text-background-opacity").value,_=e.pstyle("text-border-opacity").value,te=e.pstyle("text-border-width").pfValue,q=e.pstyle("text-background-padding").pfValue;if(ee>0||te>0&&_>0){var ae=h-q;switch($){case"left":ae-=A;break;case"center":ae-=A/2;break}var ne=p-k-q,re=A+2*q,oe=k+2*q;if(ee>0){var ie=r.fillStyle,ve=e.pstyle("text-background-color").value;r.fillStyle="rgba("+ve[0]+","+ve[1]+","+ve[2]+","+ee*f+")";var le=e.pstyle("text-background-shape").strValue;le.indexOf("round")===0?mm(r,ae,ne,re,oe,2):r.fillRect(ae,ne,re,oe),r.fillStyle=ie}if(te>0&&_>0){var he=r.strokeStyle,se=r.lineWidth,ce=e.pstyle("text-border-color").value,be=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+ce[0]+","+ce[1]+","+ce[2]+","+_*f+")",r.lineWidth=te,r.setLineDash)switch(be){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=te/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(r.strokeRect(ae,ne,re,oe),be==="double"){var de=te/2;r.strokeRect(ae+de,ne+de,re-de*2,oe-de*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=se,r.strokeStyle=he}}var xe=2*e.pstyle("text-outline-width").pfValue;if(xe>0&&(r.lineWidth=xe),e.pstyle("text-wrap").value==="wrap"){var Ce=nr(l,"labelWrapCachedLines",n),Te=nr(l,"labelLineHeight",n),Se=A/2,me=this.getLabelJustification(e);switch(me==="auto"||($==="left"?me==="left"?h+=-A:me==="center"&&(h+=-Se):$==="center"?me==="left"?h+=-Se:me==="right"&&(h+=Se):$==="right"&&(me==="center"?h+=Se:me==="right"&&(h+=A))),H){case"top":p-=(Ce.length-1)*Te;break;case"center":case"bottom":p-=(Ce.length-1)*Te;break}for(var ue=0;ue<Ce.length;ue++)xe>0&&r.strokeText(Ce[ue],h,p),r.fillText(Ce[ue],h,p),p+=Te}else xe>0&&r.strokeText(y,h,p),r.fillText(y,h,p);X!==0&&(r.rotate(-X),r.translate(-g,-m))}}};var si={};si.drawNode=function(r,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,l=this,f,h,p=e._private,g=p.rscratch,m=e.position();if(!(!Ae(m.x)||!Ae(m.y))&&!(s&&!e.visible())){var y=s?e.effectiveOpacity():1,w=l.usePaths(),A,k=!1,B=e.padding();f=e.width()+2*B,h=e.height()+2*B;var R;n&&(R=n,r.translate(-R.x1,-R.y1));for(var z=e.pstyle("background-image"),$=z.value,H=new Array($.length),X=new Array($.length),ee=0,_=0;_<$.length;_++){var te=$[_],q=H[_]=te!=null&&te!=="none";if(q){var ae=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",_);ee++,X[_]=l.getCachedImage(te,ae,function(){p.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var ne=e.pstyle("background-blacken").value,re=e.pstyle("border-width").pfValue,oe=e.pstyle("background-opacity").value*y,ie=e.pstyle("border-color").value,ve=e.pstyle("border-style").value,le=e.pstyle("border-opacity").value*y;r.lineJoin="miter";var he=function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe;l.eleFillStyle(r,e,ye)},se=function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:le;l.colorStrokeStyle(r,ie[0],ie[1],ie[2],ye)},ce=e.pstyle("shape").strValue,be=e.pstyle("shape-polygon-points").pfValue;if(w){r.translate(m.x,m.y);var de=l.nodePathCache=l.nodePathCache||[],xe=Pl(ce==="polygon"?ce+","+be.join(","):ce,""+h,""+f),Ce=de[xe];Ce!=null?(A=Ce,k=!0,g.pathCache=A):(A=new Path2D,de[xe]=g.pathCache=A)}var Te=function(){if(!k){var ye=m;w&&(ye={x:0,y:0}),l.nodeShapes[l.getNodeShape(e)].draw(A||r,ye.x,ye.y,f,h)}w?r.fill(A):r.fill()},Se=function(){for(var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe=p.backgrounding,we=0,pe=0;pe<X.length;pe++){var ge=e.cy().style().getIndexedStyle(e,"background-image-containment","value",pe);if(j&&ge==="over"||!j&&ge==="inside"){we++;continue}H[pe]&&X[pe].complete&&!X[pe].error&&(we++,l.drawInscribedImage(r,X[pe],e,pe,ye))}p.backgrounding=we!==ee,fe!==p.backgrounding&&e.updateStyle(!1)},me=function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y;l.hasPie(e)&&(l.drawPie(r,e,j),ye&&(w||l.nodeShapes[l.getNodeShape(e)].draw(r,m.x,m.y,f,h)))},ue=function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,j=(ne>0?ne:-ne)*ye,fe=ne>0?0:255;ne!==0&&(l.colorFillStyle(r,fe,fe,fe,j),w?r.fill(A):r.fill())},Ee=function(){if(re>0){if(r.lineWidth=re,r.lineCap="butt",r.setLineDash)switch(ve){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}if(w?r.stroke(A):r.stroke(),ve==="double"){r.lineWidth=re/3;var ye=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",w?r.stroke(A):r.stroke(),r.globalCompositeOperation=ye}r.setLineDash&&r.setLineDash([])}},Pe=function(){o&&l.drawNodeOverlay(r,e,m,f,h)},De=function(){l.drawElementText(r,e,null,i)},Re=e.pstyle("ghost").value==="yes";if(Re){var Ge=e.pstyle("ghost-offset-x").pfValue,Ke=e.pstyle("ghost-offset-y").pfValue,Me=e.pstyle("ghost-opacity").value,Be=Me*y;r.translate(Ge,Ke),he(Me*oe),Te(),Se(Be,!0),se(Me*le),Ee(),me(ne!==0||re!==0),Se(Be,!1),ue(Be),r.translate(-Ge,-Ke)}he(),Te(),Se(y,!0),se(),Ee(),me(ne!==0||re!==0),Se(y,!1),ue(),w&&r.translate(-m.x,-m.y),De(),Pe(),n&&r.translate(R.x1,R.y1)}};si.drawNodeOverlay=function(r,e,n,i,o){var s=this;if(!!e.visible()){var l=e.pstyle("overlay-padding").pfValue,f=e.pstyle("overlay-opacity").value,h=e.pstyle("overlay-color").value;if(f>0){if(n=n||e.position(),i==null||o==null){var p=e.padding();i=e.width()+2*p,o=e.height()+2*p}s.colorFillStyle(r,h[0],h[1],h[2],f),s.nodeShapes.roundrectangle.draw(r,n.x,n.y,i+l*2,o+l*2),r.fill()}}};si.hasPie=function(r){return r=r[0],r._private.hasPie};si.drawPie=function(r,e,n,i){e=e[0],i=i||e.position();var o=e.cy().style(),s=e.pstyle("pie-size"),l=i.x,f=i.y,h=e.width(),p=e.height(),g=Math.min(h,p)/2,m=0,y=this.usePaths();y&&(l=0,f=0),s.units==="%"?g=g*s.pfValue:s.pfValue!==void 0&&(g=s.pfValue/2);for(var w=1;w<=o.pieBackgroundN;w++){var A=e.pstyle("pie-"+w+"-background-size").value,k=e.pstyle("pie-"+w+"-background-color").value,B=e.pstyle("pie-"+w+"-background-opacity").value*n,R=A/100;R+m>1&&(R=1-m);var z=1.5*Math.PI+2*Math.PI*m,$=2*Math.PI*R,H=z+$;A===0||m>=1||m+R>1||(r.beginPath(),r.moveTo(l,f),r.arc(l,f,g,z,H),r.closePath(),this.colorFillStyle(r,k[0],k[1],k[2],B),r.fill(),m+=R)}};var Yt={},ym=100;Yt.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Yt.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],n=!0,i,o=0;o<e.length;o++)if(i=e[o],i.context===r){n=!1;break}return n&&(i={context:r},e.push(i)),i};Yt.createGradientStyleFor=function(r,e,n,i,o){var s,l=this.usePaths(),f=n.pstyle(e+"-gradient-stop-colors").value,h=n.pstyle(e+"-gradient-stop-positions").pfValue;if(i==="radial-gradient")if(n.isEdge()){var p=n.sourceEndpoint(),g=n.targetEndpoint(),m=n.midpoint(),y=Jr(p,m),w=Jr(g,m);s=r.createRadialGradient(m.x,m.y,0,m.x,m.y,Math.max(y,w))}else{var A=l?{x:0,y:0}:n.position(),k=n.paddedWidth(),B=n.paddedHeight();s=r.createRadialGradient(A.x,A.y,0,A.x,A.y,Math.max(k,B))}else if(n.isEdge()){var R=n.sourceEndpoint(),z=n.targetEndpoint();s=r.createLinearGradient(R.x,R.y,z.x,z.y)}else{var $=l?{x:0,y:0}:n.position(),H=n.paddedWidth(),X=n.paddedHeight(),ee=H/2,_=X/2,te=n.pstyle("background-gradient-direction").value;switch(te){case"to-bottom":s=r.createLinearGradient($.x,$.y-_,$.x,$.y+_);break;case"to-top":s=r.createLinearGradient($.x,$.y+_,$.x,$.y-_);break;case"to-left":s=r.createLinearGradient($.x+ee,$.y,$.x-ee,$.y);break;case"to-right":s=r.createLinearGradient($.x-ee,$.y,$.x+ee,$.y);break;case"to-bottom-right":case"to-right-bottom":s=r.createLinearGradient($.x-ee,$.y-_,$.x+ee,$.y+_);break;case"to-top-right":case"to-right-top":s=r.createLinearGradient($.x-ee,$.y+_,$.x+ee,$.y-_);break;case"to-bottom-left":case"to-left-bottom":s=r.createLinearGradient($.x+ee,$.y-_,$.x-ee,$.y+_);break;case"to-top-left":case"to-left-top":s=r.createLinearGradient($.x+ee,$.y+_,$.x-ee,$.y-_);break}}if(!s)return null;for(var q=h.length===f.length,ae=f.length,ne=0;ne<ae;ne++)s.addColorStop(q?h[ne]:ne/(ae-1),"rgba("+f[ne][0]+","+f[ne][1]+","+f[ne][2]+","+o+")");return s};Yt.gradientFillStyle=function(r,e,n,i){var o=this.createGradientStyleFor(r,"background",e,n,i);if(!o)return null;r.fillStyle=o};Yt.colorFillStyle=function(r,e,n,i,o){r.fillStyle="rgba("+e+","+n+","+i+","+o+")"};Yt.eleFillStyle=function(r,e,n){var i=e.pstyle("background-fill").value;if(i==="linear-gradient"||i==="radial-gradient")this.gradientFillStyle(r,e,i,n);else{var o=e.pstyle("background-color").value;this.colorFillStyle(r,o[0],o[1],o[2],n)}};Yt.gradientStrokeStyle=function(r,e,n,i){var o=this.createGradientStyleFor(r,"line",e,n,i);if(!o)return null;r.strokeStyle=o};Yt.colorStrokeStyle=function(r,e,n,i,o){r.strokeStyle="rgba("+e+","+n+","+i+","+o+")"};Yt.eleStrokeStyle=function(r,e,n){var i=e.pstyle("line-fill").value;if(i==="linear-gradient"||i==="radial-gradient")this.gradientStrokeStyle(r,e,i,n);else{var o=e.pstyle("line-color").value;this.colorStrokeStyle(r,o[0],o[1],o[2],n)}};Yt.matchCanvasSize=function(r){var e=this,n=e.data,i=e.findContainerClientCoords(),o=i[2],s=i[3],l=e.getPixelRatio(),f=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(l=f);var h=o*l,p=s*l,g;if(!(h===e.canvasWidth&&p===e.canvasHeight)){e.fontCaches=null;var m=n.canvasContainer;m.style.width=o+"px",m.style.height=s+"px";for(var y=0;y<e.CANVAS_LAYERS;y++)g=n.canvases[y],g.width=h,g.height=p,g.style.width=o+"px",g.style.height=s+"px";for(var y=0;y<e.BUFFER_COUNT;y++)g=n.bufferCanvases[y],g.width=h,g.height=p,g.style.width=o+"px",g.style.height=s+"px";e.textureMult=1,l<=1&&(g=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,g.width=h*e.textureMult,g.height=p*e.textureMult),e.canvasWidth=h,e.canvasHeight=p}};Yt.renderTo=function(r,e,n,i){this.render({forcedContext:r,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:i})};Yt.render=function(r){r=r||Ol();var e=r.forcedContext,n=r.drawAllLayers,i=r.drawOnlyNodeLayer,o=r.forcedZoom,s=r.forcedPan,l=this,f=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,h=l.cy,p=l.data,g=p.canvasNeedsRedraw,m=l.textureOnViewport&&!e&&(l.pinching||l.hoverData.dragging||l.swipePanning||l.data.wheelZooming),y=r.motionBlur!==void 0?r.motionBlur:l.motionBlur,w=l.motionBlurPxRatio,A=h.hasCompoundNodes(),k=l.hoverData.draggingEles,B=!!(l.hoverData.selecting||l.touchData.selecting);y=y&&!e&&l.motionBlurEnabled&&!B;var R=y;e||(l.prevPxRatio!==f&&(l.invalidateContainerClientCoordsCache(),l.matchCanvasSize(l.container),l.redrawHint("eles",!0),l.redrawHint("drag",!0)),l.prevPxRatio=f),!e&&l.motionBlurTimeout&&clearTimeout(l.motionBlurTimeout),y&&(l.mbFrames==null&&(l.mbFrames=0),l.mbFrames++,l.mbFrames<3&&(R=!1),l.mbFrames>l.minMbLowQualFrames&&(l.motionBlurPxRatio=l.mbPxRBlurry)),l.clearingMotionBlur&&(l.motionBlurPxRatio=1),l.textureDrawLastFrame&&!m&&(g[l.NODE]=!0,g[l.SELECT_BOX]=!0);var z=h.style(),$=h.zoom(),H=o!==void 0?o:$,X=h.pan(),ee={x:X.x,y:X.y},_={zoom:$,pan:{x:X.x,y:X.y}},te=l.prevViewport,q=te===void 0||_.zoom!==te.zoom||_.pan.x!==te.pan.x||_.pan.y!==te.pan.y;!q&&!(k&&!A)&&(l.motionBlurPxRatio=1),s&&(ee=s),H*=f,ee.x*=f,ee.y*=f;var ae=l.getCachedZSortedEles();function ne(Me,Be,ze,ye,j){var fe=Me.globalCompositeOperation;Me.globalCompositeOperation="destination-out",l.colorFillStyle(Me,255,255,255,l.motionBlurTransparency),Me.fillRect(Be,ze,ye,j),Me.globalCompositeOperation=fe}function re(Me,Be){var ze,ye,j,fe;!l.clearingMotionBlur&&(Me===p.bufferContexts[l.MOTIONBLUR_BUFFER_NODE]||Me===p.bufferContexts[l.MOTIONBLUR_BUFFER_DRAG])?(ze={x:X.x*w,y:X.y*w},ye=$*w,j=l.canvasWidth*w,fe=l.canvasHeight*w):(ze=ee,ye=H,j=l.canvasWidth,fe=l.canvasHeight),Me.setTransform(1,0,0,1,0,0),Be==="motionBlur"?ne(Me,0,0,j,fe):!e&&(Be===void 0||Be)&&Me.clearRect(0,0,j,fe),n||(Me.translate(ze.x,ze.y),Me.scale(ye,ye)),s&&Me.translate(s.x,s.y),o&&Me.scale(o,o)}if(m||(l.textureDrawLastFrame=!1),m){if(l.textureDrawLastFrame=!0,!l.textureCache){l.textureCache={},l.textureCache.bb=h.mutableElements().boundingBox(),l.textureCache.texture=l.data.bufferCanvases[l.TEXTURE_BUFFER];var oe=l.data.bufferContexts[l.TEXTURE_BUFFER];oe.setTransform(1,0,0,1,0,0),oe.clearRect(0,0,l.canvasWidth*l.textureMult,l.canvasHeight*l.textureMult),l.render({forcedContext:oe,drawOnlyNodeLayer:!0,forcedPxRatio:f*l.textureMult});var _=l.textureCache.viewport={zoom:h.zoom(),pan:h.pan(),width:l.canvasWidth,height:l.canvasHeight};_.mpan={x:(0-_.pan.x)/_.zoom,y:(0-_.pan.y)/_.zoom}}g[l.DRAG]=!1,g[l.NODE]=!1;var ie=p.contexts[l.NODE],ve=l.textureCache.texture,_=l.textureCache.viewport;ie.setTransform(1,0,0,1,0,0),y?ne(ie,0,0,_.width,_.height):ie.clearRect(0,0,_.width,_.height);var le=z.core("outside-texture-bg-color").value,he=z.core("outside-texture-bg-opacity").value;l.colorFillStyle(ie,le[0],le[1],le[2],he),ie.fillRect(0,0,_.width,_.height);var $=h.zoom();re(ie,!1),ie.clearRect(_.mpan.x,_.mpan.y,_.width/_.zoom/f,_.height/_.zoom/f),ie.drawImage(ve,_.mpan.x,_.mpan.y,_.width/_.zoom/f,_.height/_.zoom/f)}else l.textureOnViewport&&!e&&(l.textureCache=null);var se=h.extent(),ce=l.pinching||l.hoverData.dragging||l.swipePanning||l.data.wheelZooming||l.hoverData.draggingEles||l.cy.animated(),be=l.hideEdgesOnViewport&&ce,de=[];if(de[l.NODE]=!g[l.NODE]&&y&&!l.clearedForMotionBlur[l.NODE]||l.clearingMotionBlur,de[l.NODE]&&(l.clearedForMotionBlur[l.NODE]=!0),de[l.DRAG]=!g[l.DRAG]&&y&&!l.clearedForMotionBlur[l.DRAG]||l.clearingMotionBlur,de[l.DRAG]&&(l.clearedForMotionBlur[l.DRAG]=!0),g[l.NODE]||n||i||de[l.NODE]){var xe=y&&!de[l.NODE]&&w!==1,ie=e||(xe?l.data.bufferContexts[l.MOTIONBLUR_BUFFER_NODE]:p.contexts[l.NODE]),Ce=y&&!xe?"motionBlur":void 0;re(ie,Ce),be?l.drawCachedNodes(ie,ae.nondrag,f,se):l.drawLayeredElements(ie,ae.nondrag,f,se),l.debug&&l.drawDebugPoints(ie,ae.nondrag),!n&&!y&&(g[l.NODE]=!1)}if(!i&&(g[l.DRAG]||n||de[l.DRAG])){var xe=y&&!de[l.DRAG]&&w!==1,ie=e||(xe?l.data.bufferContexts[l.MOTIONBLUR_BUFFER_DRAG]:p.contexts[l.DRAG]);re(ie,y&&!xe?"motionBlur":void 0),be?l.drawCachedNodes(ie,ae.drag,f,se):l.drawCachedElements(ie,ae.drag,f,se),l.debug&&l.drawDebugPoints(ie,ae.drag),!n&&!y&&(g[l.DRAG]=!1)}if(l.showFps||!i&&g[l.SELECT_BOX]&&!n){var ie=e||p.contexts[l.SELECT_BOX];if(re(ie),l.selection[4]==1&&(l.hoverData.selecting||l.touchData.selecting)){var $=l.cy.zoom(),Te=z.core("selection-box-border-width").value/$;ie.lineWidth=Te,ie.fillStyle="rgba("+z.core("selection-box-color").value[0]+","+z.core("selection-box-color").value[1]+","+z.core("selection-box-color").value[2]+","+z.core("selection-box-opacity").value+")",ie.fillRect(l.selection[0],l.selection[1],l.selection[2]-l.selection[0],l.selection[3]-l.selection[1]),Te>0&&(ie.strokeStyle="rgba("+z.core("selection-box-border-color").value[0]+","+z.core("selection-box-border-color").value[1]+","+z.core("selection-box-border-color").value[2]+","+z.core("selection-box-opacity").value+")",ie.strokeRect(l.selection[0],l.selection[1],l.selection[2]-l.selection[0],l.selection[3]-l.selection[1]))}if(p.bgActivePosistion&&!l.hoverData.selecting){var $=l.cy.zoom(),Se=p.bgActivePosistion;ie.fillStyle="rgba("+z.core("active-bg-color").value[0]+","+z.core("active-bg-color").value[1]+","+z.core("active-bg-color").value[2]+","+z.core("active-bg-opacity").value+")",ie.beginPath(),ie.arc(Se.x,Se.y,z.core("active-bg-size").pfValue/$,0,2*Math.PI),ie.fill()}var me=l.lastRedrawTime;if(l.showFps&&me){me=Math.round(me);var ue=Math.round(1e3/me);ie.setTransform(1,0,0,1,0,0),ie.fillStyle="rgba(255, 0, 0, 0.75)",ie.strokeStyle="rgba(255, 0, 0, 0.75)",ie.lineWidth=1,ie.fillText("1 frame = "+me+" ms = "+ue+" fps",0,20);var Ee=60;ie.strokeRect(0,30,250,20),ie.fillRect(0,30,250*Math.min(ue/Ee,1),20)}n||(g[l.SELECT_BOX]=!1)}if(y&&w!==1){var Pe=p.contexts[l.NODE],De=l.data.bufferCanvases[l.MOTIONBLUR_BUFFER_NODE],Re=p.contexts[l.DRAG],Ge=l.data.bufferCanvases[l.MOTIONBLUR_BUFFER_DRAG],Ke=function(Be,ze,ye){Be.setTransform(1,0,0,1,0,0),ye||!R?Be.clearRect(0,0,l.canvasWidth,l.canvasHeight):ne(Be,0,0,l.canvasWidth,l.canvasHeight);var j=w;Be.drawImage(ze,0,0,l.canvasWidth*j,l.canvasHeight*j,0,0,l.canvasWidth,l.canvasHeight)};(g[l.NODE]||de[l.NODE])&&(Ke(Pe,De,de[l.NODE]),g[l.NODE]=!1),(g[l.DRAG]||de[l.DRAG])&&(Ke(Re,Ge,de[l.DRAG]),g[l.DRAG]=!1)}l.prevViewport=_,l.clearingMotionBlur&&(l.clearingMotionBlur=!1,l.motionBlurCleared=!0,l.motionBlur=!0),y&&(l.motionBlurTimeout=setTimeout(function(){l.motionBlurTimeout=null,l.clearedForMotionBlur[l.NODE]=!1,l.clearedForMotionBlur[l.DRAG]=!1,l.motionBlur=!1,l.clearingMotionBlur=!m,l.mbFrames=0,g[l.NODE]=!0,g[l.DRAG]=!0,l.redraw()},ym)),e||h.emit("render")};var Kr={};Kr.drawPolygonPath=function(r,e,n,i,o,s){var l=i/2,f=o/2;r.beginPath&&r.beginPath(),r.moveTo(e+l*s[0],n+f*s[1]);for(var h=1;h<s.length/2;h++)r.lineTo(e+l*s[h*2],n+f*s[h*2+1]);r.closePath()};Kr.drawRoundPolygonPath=function(r,e,n,i,o,s){var l=i/2,f=o/2,h=Xo(i,o);r.beginPath&&r.beginPath();for(var p=0;p<s.length/4;p++){var g=void 0,m=void 0;p===0?g=s.length-2:g=p*4-2,m=p*4+2;var y=e+l*s[p*4],w=n+f*s[p*4+1],A=-s[g]*s[m]-s[g+1]*s[m+1],k=h/Math.tan(Math.acos(A)/2),B=y-k*s[g],R=w-k*s[g+1],z=y+k*s[m],$=w+k*s[m+1];p===0?r.moveTo(B,R):r.lineTo(B,R),r.arcTo(y,w,z,$,h)}r.closePath()};Kr.drawRoundRectanglePath=function(r,e,n,i,o){var s=i/2,l=o/2,f=Na(i,o);r.beginPath&&r.beginPath(),r.moveTo(e,n-l),r.arcTo(e+s,n-l,e+s,n,f),r.arcTo(e+s,n+l,e,n+l,f),r.arcTo(e-s,n+l,e-s,n,f),r.arcTo(e-s,n-l,e,n-l,f),r.lineTo(e,n-l),r.closePath()};Kr.drawBottomRoundRectanglePath=function(r,e,n,i,o){var s=i/2,l=o/2,f=Na(i,o);r.beginPath&&r.beginPath(),r.moveTo(e,n-l),r.lineTo(e+s,n-l),r.lineTo(e+s,n),r.arcTo(e+s,n+l,e,n+l,f),r.arcTo(e-s,n+l,e-s,n,f),r.lineTo(e-s,n-l),r.lineTo(e,n-l),r.closePath()};Kr.drawCutRectanglePath=function(r,e,n,i,o){var s=i/2,l=o/2,f=Kl();r.beginPath&&r.beginPath(),r.moveTo(e-s+f,n-l),r.lineTo(e+s-f,n-l),r.lineTo(e+s,n-l+f),r.lineTo(e+s,n+l-f),r.lineTo(e+s-f,n+l),r.lineTo(e-s+f,n+l),r.lineTo(e-s,n+l-f),r.lineTo(e-s,n-l+f),r.closePath()};Kr.drawBarrelPath=function(r,e,n,i,o){var s=i/2,l=o/2,f=e-s,h=e+s,p=n-l,g=n+l,m=jo(i,o),y=m.widthOffset,w=m.heightOffset,A=m.ctrlPtOffsetPct*y;r.beginPath&&r.beginPath(),r.moveTo(f,p+w),r.lineTo(f,g-w),r.quadraticCurveTo(f+A,g,f+y,g),r.lineTo(h-y,g),r.quadraticCurveTo(h-A,g,h,g-w),r.lineTo(h,p+w),r.quadraticCurveTo(h-A,p,h-y,p),r.lineTo(f+y,p),r.quadraticCurveTo(f+A,p,f,p+w),r.closePath()};var Dc=Math.sin(0),Pc=Math.cos(0),xs={},Es={},Ac=Math.PI/40;for(un=0*Math.PI;un<2*Math.PI;un+=Ac)xs[un]=Math.sin(un),Es[un]=Math.cos(un);var un;Kr.drawEllipsePath=function(r,e,n,i,o){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,n,i/2,o/2,0,0,2*Math.PI);else for(var s,l,f=i/2,h=o/2,p=0*Math.PI;p<2*Math.PI;p+=Ac)s=e-f*xs[p]*Dc+f*Es[p]*Pc,l=n+h*Es[p]*Dc+h*xs[p]*Pc,p===0?r.moveTo(s,l):r.lineTo(s,l);r.closePath()};var li={};li.createBuffer=function(r,e){var n=document.createElement("canvas");return n.width=r,n.height=e,[n,n.getContext("2d")]};li.bufferCanvasImage=function(r){var e=this.cy,n=e.mutableElements(),i=n.boundingBox(),o=this.findContainerClientCoords(),s=r.full?Math.ceil(i.w):o[2],l=r.full?Math.ceil(i.h):o[3],f=Ae(r.maxWidth)||Ae(r.maxHeight),h=this.getPixelRatio(),p=1;if(r.scale!==void 0)s*=r.scale,l*=r.scale,p=r.scale;else if(f){var g=1/0,m=1/0;Ae(r.maxWidth)&&(g=p*r.maxWidth/s),Ae(r.maxHeight)&&(m=p*r.maxHeight/l),p=Math.min(g,m),s*=p,l*=p}f||(s*=h,l*=h,p*=h);var y=document.createElement("canvas");y.width=s,y.height=l,y.style.width=s+"px",y.style.height=l+"px";var w=y.getContext("2d");if(s>0&&l>0){w.clearRect(0,0,s,l),w.globalCompositeOperation="source-over";var A=this.getCachedZSortedEles();if(r.full)w.translate(-i.x1*p,-i.y1*p),w.scale(p,p),this.drawElements(w,A),w.scale(1/p,1/p),w.translate(i.x1*p,i.y1*p);else{var k=e.pan(),B={x:k.x*p,y:k.y*p};p*=e.zoom(),w.translate(B.x,B.y),w.scale(p,p),this.drawElements(w,A),w.scale(1/p,1/p),w.translate(-B.x,-B.y)}r.bg&&(w.globalCompositeOperation="destination-over",w.fillStyle=r.bg,w.rect(0,0,s,l),w.fill())}return y};function bm(r,e){for(var n=atob(r),i=new ArrayBuffer(n.length),o=new Uint8Array(i),s=0;s<n.length;s++)o[s]=n.charCodeAt(s);return new Blob([i],{type:e})}function Lc(r){var e=r.indexOf(",");return r.substr(e+1)}function Bc(r,e,n){var i=function(){return e.toDataURL(n,r.quality)};switch(r.output){case"blob-promise":return new Tn(function(o,s){try{e.toBlob(function(l){l!=null?o(l):s(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,r.quality)}catch(l){s(l)}});case"blob":return bm(Lc(i()),n);case"base64":return Lc(i());case"base64uri":default:return i()}}li.png=function(r){return Bc(r,this.bufferCanvasImage(r),"image/png")};li.jpg=function(r){return Bc(r,this.bufferCanvasImage(r),"image/jpeg")};var Mc={};Mc.nodeShapeImpl=function(r,e,n,i,o,s,l){switch(r){case"ellipse":return this.drawEllipsePath(e,n,i,o,s);case"polygon":return this.drawPolygonPath(e,n,i,o,s,l);case"round-polygon":return this.drawRoundPolygonPath(e,n,i,o,s,l);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,i,o,s);case"barrel":return this.drawBarrelPath(e,n,i,o,s)}};var wm=Rc,Je=Rc.prototype;Je.CANVAS_LAYERS=3;Je.SELECT_BOX=0;Je.DRAG=1;Je.NODE=2;Je.BUFFER_COUNT=3;Je.TEXTURE_BUFFER=0;Je.MOTIONBLUR_BUFFER_NODE=1;Je.MOTIONBLUR_BUFFER_DRAG=2;function Rc(r){var e=this;e.data={canvases:new Array(Je.CANVAS_LAYERS),contexts:new Array(Je.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Je.CANVAS_LAYERS),bufferCanvases:new Array(Je.BUFFER_COUNT),bufferContexts:new Array(Je.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[n]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[n]=i;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};nv()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var f=0;f<Je.CANVAS_LAYERS;f++){var h=e.data.canvases[f]=document.createElement("canvas");e.data.contexts[f]=h.getContext("2d"),Object.keys(l).forEach(function(me){h.style[me]=l[me]}),h.style.position="absolute",h.setAttribute("data-id","layer"+f),h.style.zIndex=String(Je.CANVAS_LAYERS-f),e.data.canvasContainer.appendChild(h),e.data.canvasNeedsRedraw[f]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Je.NODE].setAttribute("data-id","layer"+Je.NODE+"-node"),e.data.canvases[Je.SELECT_BOX].setAttribute("data-id","layer"+Je.SELECT_BOX+"-selectbox"),e.data.canvases[Je.DRAG].setAttribute("data-id","layer"+Je.DRAG+"-drag");for(var f=0;f<Je.BUFFER_COUNT;f++)e.data.bufferCanvases[f]=document.createElement("canvas"),e.data.bufferContexts[f]=e.data.bufferCanvases[f].getContext("2d"),e.data.bufferCanvases[f].style.position="absolute",e.data.bufferCanvases[f].setAttribute("data-id","buffer"+f),e.data.bufferCanvases[f].style.zIndex=String(-f-1),e.data.bufferCanvases[f].style.visibility="hidden";e.pathsEnabled=!0;var p=Vt(),g=function(ue){return{x:(ue.x1+ue.x2)/2,y:(ue.y1+ue.y2)/2}},m=function(ue){return{x:-ue.w/2,y:-ue.h/2}},y=function(ue){var Ee=ue[0]._private,Pe=Ee.oldBackgroundTimestamp===Ee.backgroundTimestamp;return!Pe},w=function(ue){return ue[0]._private.nodeKey},A=function(ue){return ue[0]._private.labelStyleKey},k=function(ue){return ue[0]._private.sourceLabelStyleKey},B=function(ue){return ue[0]._private.targetLabelStyleKey},R=function(ue,Ee,Pe,De,Re){return e.drawElement(ue,Ee,Pe,!1,!1,Re)},z=function(ue,Ee,Pe,De,Re){return e.drawElementText(ue,Ee,Pe,De,"main",Re)},$=function(ue,Ee,Pe,De,Re){return e.drawElementText(ue,Ee,Pe,De,"source",Re)},H=function(ue,Ee,Pe,De,Re){return e.drawElementText(ue,Ee,Pe,De,"target",Re)},X=function(ue){return ue.boundingBox(),ue[0]._private.bodyBounds},ee=function(ue){return ue.boundingBox(),ue[0]._private.labelBounds.main||p},_=function(ue){return ue.boundingBox(),ue[0]._private.labelBounds.source||p},te=function(ue){return ue.boundingBox(),ue[0]._private.labelBounds.target||p},q=function(ue,Ee){return Ee},ae=function(ue){return g(X(ue))},ne=function(ue,Ee,Pe){var De=ue?ue+"-":"";return{x:Ee.x+Pe.pstyle(De+"text-margin-x").pfValue,y:Ee.y+Pe.pstyle(De+"text-margin-y").pfValue}},re=function(ue,Ee,Pe){var De=ue[0]._private.rscratch;return{x:De[Ee],y:De[Pe]}},oe=function(ue){return ne("",re(ue,"labelX","labelY"),ue)},ie=function(ue){return ne("source",re(ue,"sourceLabelX","sourceLabelY"),ue)},ve=function(ue){return ne("target",re(ue,"targetLabelX","targetLabelY"),ue)},le=function(ue){return m(X(ue))},he=function(ue){return m(_(ue))},se=function(ue){return m(te(ue))},ce=function(ue){var Ee=ee(ue),Pe=m(ee(ue));if(ue.isNode()){switch(ue.pstyle("text-halign").value){case"left":Pe.x=-Ee.w;break;case"right":Pe.x=0;break}switch(ue.pstyle("text-valign").value){case"top":Pe.y=-Ee.h;break;case"bottom":Pe.y=0;break}}return Pe},be=e.data.eleTxrCache=new ii(e,{getKey:w,doesEleInvalidateKey:y,drawElement:R,getBoundingBox:X,getRotationPoint:ae,getRotationOffset:le,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),de=e.data.lblTxrCache=new ii(e,{getKey:A,drawElement:z,getBoundingBox:ee,getRotationPoint:oe,getRotationOffset:ce,isVisible:q}),xe=e.data.slbTxrCache=new ii(e,{getKey:k,drawElement:$,getBoundingBox:_,getRotationPoint:ie,getRotationOffset:he,isVisible:q}),Ce=e.data.tlbTxrCache=new ii(e,{getKey:B,drawElement:H,getBoundingBox:te,getRotationPoint:ve,getRotationOffset:se,isVisible:q}),Te=e.data.lyrTxrCache=new Ec(e);e.onUpdateEleCalcs(function(ue,Ee){be.invalidateElements(Ee),de.invalidateElements(Ee),xe.invalidateElements(Ee),Ce.invalidateElements(Ee),Te.invalidateElements(Ee);for(var Pe=0;Pe<Ee.length;Pe++){var De=Ee[Pe]._private;De.oldBackgroundTimestamp=De.backgroundTimestamp}});var Se=function(ue){for(var Ee=0;Ee<ue.length;Ee++)Te.enqueueElementRefinement(ue[Ee].ele)};be.onDequeue(Se),de.onDequeue(Se),xe.onDequeue(Se),Ce.onDequeue(Se)}Je.redrawHint=function(r,e){var n=this;switch(r){case"eles":n.data.canvasNeedsRedraw[Je.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[Je.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[Je.SELECT_BOX]=e;break}};var xm=typeof Path2D!="undefined";Je.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Je.usePaths=function(){return xm&&this.pathsEnabled};Je.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Je.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Je.makeOffscreenCanvas=function(r,e){var n;return(typeof OffscreenCanvas=="undefined"?"undefined":gt(OffscreenCanvas))!=="undefined"?n=new OffscreenCanvas(r,e):(n=document.createElement("canvas"),n.width=r,n.height=e),n};[Cc,Er,sn,ws,ln,si,Yt,Kr,li,Mc].forEach(function(r){_e(Je,r)});var Em=[{name:"null",impl:oc},{name:"base",impl:yc},{name:"canvas",impl:wm}],km=[{type:"layout",extensions:Lg},{type:"renderer",extensions:Em}],Oc={},Ic={};function zc(r,e,n){var i=n,o=function(te){rt("Can not register `"+e+"` for `"+r+"` since `"+te+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(ri.prototype[e])return o(e);ri.prototype[e]=n}else if(r==="collection"){if(St.prototype[e])return o(e);St.prototype[e]=n}else if(r==="layout"){for(var s=function(te){this.options=te,n.call(this,te),je(this._private)||(this._private={}),this._private.cy=te.cy,this._private.listeners=[],this.createEmitter()},l=s.prototype=Object.create(n.prototype),f=[],h=0;h<f.length;h++){var p=f[h];l[p]=l[p]||function(){return this}}l.start&&!l.run?l.run=function(){return this.start(),this}:!l.start&&l.run&&(l.start=function(){return this.run(),this});var g=n.prototype.stop;l.stop=function(){var _=this.options;if(_&&_.animate){var te=this.animations;if(te)for(var q=0;q<te.length;q++)te[q].stop()}return g?g.call(this):this.emit("layoutstop"),this},l.destroy||(l.destroy=function(){return this}),l.cy=function(){return this._private.cy};var m=function(te){return te._private.cy},y={addEventFields:function(te,q){q.layout=te,q.cy=m(te),q.target=te},bubble:function(){return!0},parent:function(te){return m(te)}};_e(l,{createEmitter:function(){return this._private.emitter=new Ki(y,this),this},emitter:function(){return this._private.emitter},on:function(te,q){return this.emitter().on(te,q),this},one:function(te,q){return this.emitter().one(te,q),this},once:function(te,q){return this.emitter().one(te,q),this},removeListener:function(te,q){return this.emitter().removeListener(te,q),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(te,q){return this.emitter().emit(te,q),this}}),et.eventAliasesOn(l),i=s}else if(r==="renderer"&&e!=="null"&&e!=="base"){var w=Nc("renderer","base"),A=w.prototype,k=n,B=n.prototype,R=function(){w.apply(this,arguments),k.apply(this,arguments)},z=R.prototype;for(var $ in A){var H=A[$],X=B[$]!=null;if(X)return o($);z[$]=H}for(var ee in B)z[ee]=B[ee];A.clientFunctions.forEach(function(_){z[_]=z[_]||function(){pt("Renderer does not implement `renderer."+_+"()` on its prototype")}}),i=R}return kl({map:Oc,keys:[r,e],value:i})}function Nc(r,e){return Cl({map:Oc,keys:[r,e]})}function Cm(r,e,n,i,o){return kl({map:Ic,keys:[r,e,n,i],value:o})}function Sm(r,e,n,i){return Cl({map:Ic,keys:[r,e,n,i]})}var ks=function(){if(arguments.length===2)return Nc.apply(null,arguments);if(arguments.length===3)return zc.apply(null,arguments);if(arguments.length===4)return Sm.apply(null,arguments);if(arguments.length===5)return Cm.apply(null,arguments);pt("Invalid extension access syntax")};ri.prototype.extension=ks;km.forEach(function(r){r.extensions.forEach(function(e){zc(r.type,e.name,e.impl)})});var Fc=function r(){if(!(this instanceof r))return new r;this.length=0},cn=Fc.prototype;cn.instanceString=function(){return"stylesheet"};cn.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};cn.css=function(r,e){var n=this.length-1;if(Fe(r))this[n].properties.push({name:r,value:e});else if(je(r))for(var i=r,o=Object.keys(i),s=0;s<o.length;s++){var l=o[s],f=i[l];if(f!=null){var h=Mt.properties[l]||Mt.properties[Ti(l)];if(h!=null){var p=h.name,g=f;this[n].properties.push({name:p,value:g})}}}return this};cn.style=cn.css;cn.generateStyle=function(r){var e=new Mt(r);return this.appendToStyle(e)};cn.appendToStyle=function(r){for(var e=0;e<this.length;e++){var n=this[e],i=n.selector,o=n.properties;r.selector(i);for(var s=0;s<o.length;s++){var l=o[s];r.css(l.name,l.value)}}return r};var Tm="3.19.1",fn=function(e){if(e===void 0&&(e={}),je(e))return new ri(e);if(Fe(e))return ks.apply(ks,arguments)};fn.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(fn),r.apply(null,e),this};fn.warnings=function(r){return Ml(r)};fn.version=Tm;fn.stylesheet=fn.Stylesheet=Fc;$c.exports=fn});var lh=Xn((exports,module)=>{(function _f(self){"use strict";try{module&&(self=module)}catch(r){}self._factory=_f;var t;function u(r){return typeof r!="undefined"?r:!0}function aa(r){let e=Array(r);for(let n=0;n<r;n++)e[n]=v();return e}function v(){return Object.create(null)}function ba(r,e){return e.length-r.length}function x(r){return typeof r=="string"}function C(r){return typeof r=="object"}function D(r){return typeof r=="function"}function ca(r,e){var n=da;if(r&&(e&&(r=E(r,e)),this.H&&(r=E(r,this.H)),this.J&&1<r.length&&(r=E(r,this.J)),n||n==="")){if(r=r.split(n),this.filter){e=this.filter,n=r.length;let i=[];for(let o=0,s=0;o<n;o++){let l=r[o];l&&!e[l]&&(i[s++]=l)}r=i}return r}return r}let da=/[\p{Z}\p{S}\p{P}\p{C}]+/u,ea=/[\u0300-\u036f]/g;function fa(r,e){let n=Object.keys(r),i=n.length,o=[],s="",l=0;for(let f=0,h,p;f<i;f++)h=n[f],(p=r[h])?(o[l++]=F(e?"(?!\\b)"+h+"(\\b|_)":h),o[l++]=p):s+=(s?"|":"")+h;return s&&(o[l++]=F(e?"(?!\\b)("+s+")(\\b|_)":"("+s+")"),o[l]=""),o}function E(r,e){for(let n=0,i=e.length;n<i&&(r=r.replace(e[n],e[n+1]),r);n+=2);return r}function F(r){return new RegExp(r,"g")}function ha(r){let e="",n="";for(let i=0,o=r.length,s;i<o;i++)(s=r[i])!==n&&(e+=n=s);return e}var ja={encode:ia,F:!1,G:""};function ia(r){return ca.call(this,(""+r).toLowerCase(),!1)}let ka={},G={};function la(r){I(r,"add"),I(r,"append"),I(r,"search"),I(r,"update"),I(r,"remove")}function I(r,e){r[e+"Async"]=function(){let n=this,i=arguments;var o=i[i.length-1];let s;return D(o)&&(s=o,delete i[i.length-1]),o=new Promise(function(l){setTimeout(function(){n.async=!0;let f=n[e].apply(n,i);n.async=!1,l(f)})}),s?(o.then(s),this):o}}function ma(r,e,n,i){let o=r.length,s=[],l,f,h=0;i&&(i=[]);for(let p=o-1;0<=p;p--){let g=r[p],m=g.length,y=v(),w=!l;for(let A=0;A<m;A++){let k=g[A],B=k.length;if(B)for(let R=0,z,$;R<B;R++)if($=k[R],l){if(l[$]){if(!p){if(n)n--;else if(s[h++]=$,h===e)return s}(p||i)&&(y[$]=1),w=!0}if(i&&(f[$]=(z=f[$])?++z:z=1,z<o)){let H=i[z-2]||(i[z-2]=[]);H[H.length]=$}}else y[$]=1}if(i)l||(f=y);else if(!w)return[];l=y}if(i)for(let p=i.length-1,g,m;0<=p;p--){g=i[p],m=g.length;for(let y=0,w;y<m;y++)if(w=g[y],!l[w]){if(n)n--;else if(s[h++]=w,h===e)return s;l[w]=1}}return s}function na(r,e){let n=v(),i=v(),o=[];for(let s=0;s<r.length;s++)n[r[s]]=1;for(let s=0,l;s<e.length;s++){l=e[s];for(let f=0,h;f<l.length;f++)h=l[f],n[h]&&!i[h]&&(i[h]=1,o[o.length]=h)}return o}function J(r){this.l=r!==!0&&r,this.cache=v(),this.h=[]}function oa(r,e,n){C(r)&&(r=r.query);let i=this.cache.get(r);return i||(i=this.search(r,e,n),this.cache.set(r,i)),i}J.prototype.set=function(r,e){if(!this.cache[r]){var n=this.h.length;for(n===this.l?delete this.cache[this.h[n-1]]:n++,--n;0<n;n--)this.h[n]=this.h[n-1];this.h[0]=r}this.cache[r]=e},J.prototype.get=function(r){let e=this.cache[r];if(this.l&&e&&(r=this.h.indexOf(r))){let n=this.h[r-1];this.h[r-1]=this.h[r],this.h[r]=n}return e};let qa={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function ra(r,e,n,i,o,s){setTimeout(function(){let l=r(n,JSON.stringify(s));l&&l.then?l.then(function(){e.export(r,e,n,i,o+1)}):e.export(r,e,n,i,o+1)})}function K(r,e){if(!(this instanceof K))return new K(r);var n;if(r){x(r)?r=qa[r]:(n=r.preset)&&(r=Object.assign({},n[n],r)),n=r.charset;var i=r.lang;x(n)&&(n.indexOf(":")===-1&&(n+=":default"),n=G[n]),x(i)&&(i=ka[i])}else r={};let o,s,l=r.context||{};if(this.encode=r.encode||n&&n.encode||ia,this.register=e||v(),this.D=o=r.resolution||9,this.G=e=n&&n.G||r.tokenize||"strict",this.depth=e==="strict"&&l.depth,this.l=u(l.bidirectional),this.s=s=u(r.optimize),this.m=u(r.fastupdate),this.B=r.minlength||1,this.C=r.boost,this.map=s?aa(o):v(),this.A=o=l.resolution||1,this.h=s?aa(o):v(),this.F=n&&n.F||r.rtl,this.H=(e=r.matcher||i&&i.H)&&fa(e,!1),this.J=(e=r.stemmer||i&&i.J)&&fa(e,!0),n=e=r.filter||i&&i.filter){n=e,i=v();for(let f=0,h=n.length;f<h;f++)i[n[f]]=1;n=i}this.filter=n,this.cache=(e=r.cache)&&new J(e)}t=K.prototype,t.append=function(r,e){return this.add(r,e,!0)},t.add=function(r,e,n,i){if(e&&(r||r===0)){if(!i&&!n&&this.register[r])return this.update(r,e);if(e=this.encode(e),i=e.length){let p=v(),g=v(),m=this.depth,y=this.D;for(let w=0;w<i;w++){let A=e[this.F?i-1-w:w];var o=A.length;if(A&&o>=this.B&&(m||!g[A])){var s=L(y,i,w),l="";switch(this.G){case"full":if(3<o){for(s=0;s<o;s++)for(var f=o;f>s;f--)if(f-s>=this.B){var h=L(y,i,w,o,s);l=A.substring(s,f),M(this,g,l,h,r,n)}break}case"reverse":if(2<o){for(f=o-1;0<f;f--)l=A[f]+l,l.length>=this.B&&M(this,g,l,L(y,i,w,o,f),r,n);l=""}case"forward":if(1<o){for(f=0;f<o;f++)l+=A[f],l.length>=this.B&&M(this,g,l,s,r,n);break}default:if(this.C&&(s=Math.min(s/this.C(e,A,w)|0,y-1)),M(this,g,A,s,r,n),m&&1<i&&w<i-1){for(o=v(),l=this.A,s=A,f=Math.min(m+1,i-w),o[s]=1,h=1;h<f;h++)if((A=e[this.F?i-1-w-h:w+h])&&A.length>=this.B&&!o[A]){o[A]=1;let k=this.l&&A>s;M(this,p,k?s:A,L(l+(i/2>l?0:1),i,w,f-1,h-1),r,n,k?A:s)}}}}}this.m||(this.register[r]=1)}}return this};function L(r,e,n,i,o){return n&&1<r?e+(i||0)<=r?n+(o||0):(r-1)/(e+(i||0))*(n+(o||0))+1|0:0}function M(r,e,n,i,o,s,l){let f=l?r.h:r.map;(!e[n]||l&&!e[n][l])&&(r.s&&(f=f[i]),l?(e=e[n]||(e[n]=v()),e[l]=1,f=f[l]||(f[l]=v())):e[n]=1,f=f[n]||(f[n]=[]),r.s||(f=f[i]||(f[i]=[])),s&&f.indexOf(o)!==-1||(f[f.length]=o,r.m&&(r=r.register[o]||(r.register[o]=[]),r[r.length]=f)))}t.search=function(r,e,n){n||(!e&&C(r)?(n=r,r=n.query):C(e)&&(n=e));let i=[],o,s,l=0;if(n){e=n.limit,l=n.offset||0;var f=n.context;s=n.suggest}if(r&&(r=this.encode(r),o=r.length,1<o)){n=v();var h=[];for(let g=0,m=0,y;g<o;g++)if((y=r[g])&&y.length>=this.B&&!n[y])if(this.s||s||this.map[y])h[m++]=y,n[y]=1;else return i;r=h,o=r.length}if(!o)return i;e||(e=100),f=this.depth&&1<o&&f!==!1,n=0;let p;f?(p=r[0],n=1):1<o&&r.sort(ba);for(let g,m;n<o;n++){if(m=r[n],f?(g=sa(this,i,s,e,l,o===2,m,p),s&&g===!1&&i.length||(p=m)):g=sa(this,i,s,e,l,o===1,m),g)return g;if(s&&n===o-1){if(h=i.length,!h){if(f){f=0,n=-1;continue}return i}if(h===1)return ta(i[0],e,l)}}return ma(i,e,l,s)};function sa(r,e,n,i,o,s,l,f){let h=[],p=f?r.h:r.map;if(r.s||(p=ua(p,l,f,r.l)),p){let g=0,m=Math.min(p.length,f?r.A:r.D);for(let y=0,w=0,A,k;y<m&&!((A=p[y])&&(r.s&&(A=ua(A,l,f,r.l)),o&&A&&s&&(k=A.length,k<=o?(o-=k,A=null):(A=A.slice(o),o=0)),A&&(h[g++]=A,s&&(w+=A.length,w>=i))));y++);if(g){if(s)return ta(h,i,0);e[e.length]=h;return}}return!n&&h}function ta(r,e,n){return r=r.length===1?r[0]:[].concat.apply([],r),n||r.length>e?r.slice(n,n+e):r}function ua(r,e,n,i){return n?(i=i&&e>n,r=(r=r[i?e:n])&&r[i?n:e]):r=r[e],r}t.contain=function(r){return!!this.register[r]},t.update=function(r,e){return this.remove(r).add(r,e)},t.remove=function(r,e){let n=this.register[r];if(n){if(this.m)for(let i=0,o;i<n.length;i++)o=n[i],o.splice(o.indexOf(r),1);else N(this.map,r,this.D,this.s),this.depth&&N(this.h,r,this.A,this.s);if(e||delete this.register[r],this.cache){e=this.cache;for(let i=0,o,s;i<e.h.length;i++)s=e.h[i],o=e.cache[s],o.indexOf(r)!==-1&&(e.h.splice(i--,1),delete e.cache[s])}}return this};function N(r,e,n,i,o){let s=0;if(r.constructor===Array)if(o)e=r.indexOf(e),e!==-1?1<r.length&&(r.splice(e,1),s++):s++;else{o=Math.min(r.length,n);for(let l=0,f;l<o;l++)(f=r[l])&&(s=N(f,e,n,i,o),i||s||delete r[l])}else for(let l in r)(s=N(r[l],e,n,i,o))||delete r[l];return s}t.searchCache=oa,t.export=function(r,e,n,i,o){let s,l;switch(o||(o=0)){case 0:if(s="reg",this.m){l=v();for(let f in this.register)l[f]=1}else l=this.register;break;case 1:s="cfg",l={doc:0,opt:this.s?1:0};break;case 2:s="map",l=this.map;break;case 3:s="ctx",l=this.h;break;default:return}return ra(r,e||this,n?n+"."+s:s,i,o,l),!0},t.import=function(r,e){if(e)switch(x(e)&&(e=JSON.parse(e)),r){case"cfg":this.s=!!e.opt;break;case"reg":this.m=!1,this.register=e;break;case"map":this.map=e;break;case"ctx":this.h=e}},la(K.prototype);function va(r){r=r.data;var e=self._index;let n=r.args;var i=r.task;switch(i){case"init":i=r.options||{},r=r.factory,e=i.encode,i.cache=!1,e&&e.indexOf("function")===0&&(i.encode=Function("return "+e)()),r?(Function("return "+r)()(self),self._index=new self.FlexSearch.Index(i),delete self.FlexSearch):self._index=new K(i);break;default:r=r.id,e=e[i].apply(e,n),postMessage(i==="search"?{id:r,msg:e}:{id:r})}}let wa=0;function O(r){if(!(this instanceof O))return new O(r);var e;r?D(e=r.encode)&&(r.encode=e.toString()):r={},(e=(self||window)._factory)&&(e=e.toString());let n=self.exports,i=this;this.o=xa(e,n,r.worker),this.h=v(),this.o&&(n?this.o.on("message",function(o){i.h[o.id](o.msg),delete i.h[o.id]}):this.o.onmessage=function(o){o=o.data,i.h[o.id](o.msg),delete i.h[o.id]},this.o.postMessage({task:"init",factory:e,options:r}))}P("add"),P("append"),P("search"),P("update"),P("remove");function P(r){O.prototype[r]=O.prototype[r+"Async"]=function(){let e=this,n=[].slice.call(arguments);var i=n[n.length-1];let o;return D(i)&&(o=i,n.splice(n.length-1,1)),i=new Promise(function(s){setTimeout(function(){e.h[++wa]=s,e.o.postMessage({task:r,id:wa,args:n})})}),o?(i.then(o),this):i}}function xa(a,b,c){let d;try{d=b?eval('new (require("worker_threads")["Worker"])("../dist/node/node.js")'):a?new Worker(URL.createObjectURL(new Blob(["onmessage="+va.toString()],{type:"text/javascript"}))):new Worker(x(c)?c:"worker/worker.js",{type:"module"})}catch(r){}return d}function Q(r){if(!(this instanceof Q))return new Q(r);var e=r.document||r.doc||r,n;this.K=[],this.h=[],this.A=[],this.register=v(),this.key=(n=e.key||e.id)&&S(n,this.A)||"id",this.m=u(r.fastupdate),this.C=(n=e.store)&&n!==!0&&[],this.store=n&&v(),this.I=(n=e.tag)&&S(n,this.A),this.l=n&&v(),this.cache=(n=r.cache)&&new J(n),r.cache=!1,this.o=r.worker,this.async=!1,n=v();let i=e.index||e.field||e;x(i)&&(i=[i]);for(let o=0,s,l;o<i.length;o++)s=i[o],x(s)||(l=s,s=s.field),l=C(l)?Object.assign({},r,l):r,this.o&&(n[s]=new O(l),n[s].o||(this.o=!1)),this.o||(n[s]=new K(l,this.register)),this.K[o]=S(s,this.A),this.h[o]=s;if(this.C)for(r=e.store,x(r)&&(r=[r]),e=0;e<r.length;e++)this.C[e]=S(r[e],this.A);this.index=n}function S(r,e){let n=r.split(":"),i=0;for(let o=0;o<n.length;o++)r=n[o],0<=r.indexOf("[]")&&(r=r.substring(0,r.length-2))&&(e[i]=!0),r&&(n[i++]=r);return i<n.length&&(n.length=i),1<i?n:n[0]}function T(r,e){if(x(e))r=r[e];else for(let n=0;r&&n<e.length;n++)r=r[e[n]];return r}function U(r,e,n,i,o){if(r=r[o],i===n.length-1)e[o]=r;else if(r)if(r.constructor===Array)for(e=e[o]=Array(r.length),o=0;o<r.length;o++)U(r,e,n,i,o);else e=e[o]||(e[o]=v()),o=n[++i],U(r,e,n,i,o)}function V(r,e,n,i,o,s,l,f){if(r=r[l])if(i===e.length-1){if(r.constructor===Array){if(n[i]){for(e=0;e<r.length;e++)o.add(s,r[e],!0,!0);return}r=r.join(" ")}o.add(s,r,f,!0)}else if(r.constructor===Array)for(l=0;l<r.length;l++)V(r,e,n,i,o,s,l,f);else l=e[++i],V(r,e,n,i,o,s,l,f)}t=Q.prototype,t.add=function(r,e,n){if(C(r)&&(e=r,r=T(e,this.key)),e&&(r||r===0)){if(!n&&this.register[r])return this.update(r,e);for(let i=0,o,s;i<this.h.length;i++)s=this.h[i],o=this.K[i],x(o)&&(o=[o]),V(e,o,this.A,0,this.index[s],r,o[0],n);if(this.I){let i=T(e,this.I),o=v();x(i)&&(i=[i]);for(let s=0,l,f;s<i.length;s++)if(l=i[s],!o[l]&&(o[l]=1,f=this.l[l]||(this.l[l]=[]),!n||f.indexOf(r)===-1)&&(f[f.length]=r,this.m)){let h=this.register[r]||(this.register[r]=[]);h[h.length]=f}}if(this.store&&(!n||!this.store[r])){let i;if(this.C){i=v();for(let o=0,s;o<this.C.length;o++)s=this.C[o],x(s)?i[s]=e[s]:U(e,i,s,0,s[0])}this.store[r]=i||e}}return this},t.append=function(r,e){return this.add(r,e,!0)},t.update=function(r,e){return this.remove(r).add(r,e)},t.remove=function(r){if(C(r)&&(r=T(r,this.key)),this.register[r]){for(var e=0;e<this.h.length&&(this.index[this.h[e]].remove(r,!this.o),!this.m);e++);if(this.I&&!this.m)for(let n in this.l){e=this.l[n];let i=e.indexOf(r);i!==-1&&(1<e.length?e.splice(i,1):delete this.l[n])}this.store&&delete this.store[r],delete this.register[r]}return this},t.search=function(r,e,n,i){n||(!e&&C(r)?(n=r,r=n.query):C(e)&&(n=e,e=0));let o=[],s=[],l,f,h,p,g,m,y=0;if(n)if(n.constructor===Array)h=n,n=null;else{if(h=(l=n.pluck)||n.index||n.field,p=n.tag,f=this.store&&n.enrich,g=n.bool==="and",e=n.limit||100,m=n.offset||0,p&&(x(p)&&(p=[p]),!r)){for(let A=0,k;A<p.length;A++)(k=ya.call(this,p[A],e,m,f))&&(o[o.length]=k,y++);return y?o:[]}x(h)&&(h=[h])}h||(h=this.h),g=g&&(1<h.length||p&&1<p.length);let w=!i&&(this.o||this.async)&&[];for(let A=0,k,B,R;A<h.length;A++){let z;if(B=h[A],x(B)||(z=B,B=B.field),w)w[A]=this.index[B].searchAsync(r,e,z||n);else{if(i?k=i[A]:k=this.index[B].search(r,e,z||n),R=k&&k.length,p&&R){let $=[],H=0;g&&($[0]=[k]);for(let X=0,ee,_;X<p.length;X++)ee=p[X],(R=(_=this.l[ee])&&_.length)&&(H++,$[$.length]=g?[_]:_);H&&(k=g?ma($,e||100,m||0):na(k,$),R=k.length)}if(R)s[y]=B,o[y++]=k;else if(g)return[]}}if(w){let A=this;return new Promise(function(k){Promise.all(w).then(function(B){k(A.search(r,e,n,B))})})}if(!y)return[];if(l&&(!f||!this.store))return o[0];for(let A=0,k;A<s.length;A++){if(k=o[A],k.length&&f&&(k=za.call(this,k)),l)return k;o[A]={field:s[A],result:k}}return o};function ya(r,e,n,i){let o=this.l[r],s=o&&o.length-n;if(s&&0<s)return(s>e||n)&&(o=o.slice(n,n+e)),i&&(o=za.call(this,o)),{tag:r,result:o}}function za(r){let e=Array(r.length);for(let n=0,i;n<r.length;n++)i=r[n],e[n]={id:i,doc:this.store[i]};return e}t.contain=function(r){return!!this.register[r]},t.get=function(r){return this.store[r]},t.set=function(r,e){return this.store[r]=e,this},t.searchCache=oa,t.export=function(r,e,n,i,o){if(o||(o=0),i||(i=0),i<this.h.length){let s=this.h[i],l=this.index[s];e=this,setTimeout(function(){l.export(r,e,o?s.replace(":","-"):"",i,o++)||(i++,o=1,e.export(r,e,s,i,o))})}else{let s;switch(o){case 1:n="tag",s=this.l;break;case 2:n="store",s=this.store;break;default:return}ra(r,this,n,i,o,s)}},t.import=function(r,e){if(e)switch(x(e)&&(e=JSON.parse(e)),r){case"tag":this.l=e;break;case"reg":this.m=!1,this.register=e;for(let i=0,o;i<this.h.length;i++)o=this.index[this.h[i]],o.register=e,o.m=!1;break;case"store":this.store=e;break;default:r=r.split(".");let n=r[0];r=r[1],n&&r&&this.index[n].import(r,e)}},la(Q.prototype);var Ba={encode:Aa,F:!1,G:""};let Ca=[F("[\xE0\xE1\xE2\xE3\xE4\xE5]"),"a",F("[\xE8\xE9\xEA\xEB]"),"e",F("[\xEC\xED\xEE\xEF]"),"i",F("[\xF2\xF3\xF4\xF5\xF6\u0151]"),"o",F("[\xF9\xFA\xFB\xFC\u0171]"),"u",F("[\xFD\u0177\xFF]"),"y",F("\xF1"),"n",F("[\xE7c]"),"k",F("\xDF"),"s",F(" & ")," and "];function Aa(r){var e=r;return e.normalize&&(e=e.normalize("NFD").replace(ea,"")),ca.call(this,e.toLowerCase(),!r.normalize&&Ca)}var Ea={encode:Da,F:!1,G:"strict"};let Fa=/[^a-z0-9]+/,Ga={b:"p",v:"f",w:"f",z:"s",x:"s",\u00DF:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function Da(r){r=Aa.call(this,r).join(" ");let e=[];if(r){let n=r.split(Fa),i=n.length;for(let o=0,s,l=0;o<i;o++)if((r=n[o])&&(!this.filter||!this.filter[r])){s=r[0];let f=Ga[s]||s,h=f;for(let p=1;p<r.length;p++){s=r[p];let g=Ga[s]||s;g&&g!==h&&(f+=g,h=g)}e[l++]=f}}return e}var Ia={encode:Ha,F:!1,G:""};let Ja=[F("ae"),"a",F("oe"),"o",F("sh"),"s",F("th"),"t",F("ph"),"f",F("pf"),"f",F("(?![aeo])h(?![aeo])"),"",F("(?!^[aeo])h(?!^[aeo])"),""];function Ha(r,e){return r&&(r=Da.call(this,r).join(" "),2<r.length&&(r=E(r,Ja)),e||(1<r.length&&(r=ha(r)),r&&(r=r.split(" ")))),r}var La={encode:Ka,F:!1,G:""};let Ma=F("(?!\\b)[aeo]");function Ka(r){return r&&(r=Ha.call(this,r,!0),1<r.length&&(r=r.replace(Ma,"")),1<r.length&&(r=ha(r)),r&&(r=r.split(" "))),r}G["latin:default"]=ja,G["latin:simple"]=Ba,G["latin:balance"]=Ea,G["latin:advanced"]=Ia,G["latin:extra"]=La;let W=self,Y,Z={Index:K,Document:Q,Worker:O,registerCharset:function(r,e){G[r]=e},registerLanguage:function(r,e){ka[r]=e}};(Y=W.define)&&Y.amd?Y([],function(){return Z}):W.exports?W.exports=Z:W.FlexSearch=Z})(exports)});var vh=Bo(Cs());var _c=Bo(Cs());function fo(r){return mn(this,null,function*(){return(yield fetch(r)).json()})}function Dm(){let r=document.createElement("sl-dialog");r.style.setProperty("--width","100%"),r.innerHTML=`
        <span slot="label">Zettelkasten graph</span>
        <div style="height: 100vh; margin: 0; padding: 0;">
            <hr style="color: transparent; font-size: 1px;" />
        </div>
    `;let e=r.querySelector("span");return[r,(i,o)=>{let s=Lm(i,o,()=>r.hide());e.replaceWith(s),e=s}]}function Pm(r,e,n){let i=(0,_c.default)(ki({container:r,style:[{selector:"node:selected",style:{"background-color":"#9333ea"}},{selector:"node",style:{label:"data(title)","text-wrap":"wrap","text-max-width":"120"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle"}}],layout:{name:"preset"}},e));return i.nodes().forEach(o=>{let s=document.createElement("div");s.innerHTML=o.data("title"),MathJax.typeset([s]),o.data("title",s.textContent)}),n&&i.on("select","node",n),i}function Am(){let r=window.location.hash.slice(1);return r?r.startsWith("tags/")?`graph/tag/${r.slice(5)}.json`:Number.isInteger(Number(r))?`graph/note/${r}.json`:"graph/data.json":"graph/data.json"}function Lm(r,e,n){let i=document.createElement("span");return i.slot="label",i.innerHTML=`${r} [<a href="#${e}">${e}</a>]`,n&&i.querySelector("a").addEventListener("click",n),i}function Vc(r){let[e,n]=Dm();r.insertAdjacentElement("afterend",e),r.addEventListener("click",()=>mn(this,null,function*(){e.show();let i=e.querySelector("div"),o=Pm(i,yield fo(Am()),f=>{let{title:h,id:p}=f.target.data();n(h,p)}),s=window.location.hash;if(s===""||s==="#"||!Number.isInteger(Number(s.slice(1)))){let f=o.nodes().roots(),h=Math.floor(Math.random()*f.length);s=`#${f[h].data("id")}`}let l=o.$(s);l.select(),o.center(l),o.zoom({level:1,renderedPosition:l.renderedPosition()}),window.cy=o}))}function Fn(r,e){let n=i=>{if(window.location.hash===r)if(i instanceof HashChangeEvent){let o=new URL(i.oldURL);e(o.hash)}else e()};return window.addEventListener("DOMContentLoaded",n),window.addEventListener("hashchange",n),n}function Hc(){let r=()=>window.location.replace("#home");Fn("",r),Fn("#",r)}function qc(r){let e=Math.floor(Math.random()*r.length);return r[e]}function Bm(r,e){var i;let n=e.slice(1);if(n&&Number.isInteger(Number(n))){let o=r.$(`#${n}`).outgoers().nodes();if(o.length>0)return qc(o).data("id")}return(i=qc(r.nodes().roots()))==null?void 0:i.data("id")}function Kc(r){Fn("#random",e=>{let n=Bm(r,e||"");window.location.replace(`#${n}`)})}function Gc(r){let e=r.tagName.toLowerCase();return r.getAttribute("tabindex")==="-1"||r.hasAttribute("disabled")||r.hasAttribute("aria-disabled")&&r.getAttribute("aria-disabled")!=="false"||e==="input"&&r.getAttribute("type")==="radio"&&!r.hasAttribute("checked")||r.offsetParent===null||window.getComputedStyle(r).visibility==="hidden"?!1:(e==="audio"||e==="video")&&r.hasAttribute("controls")||r.hasAttribute("tabindex")||r.hasAttribute("contenteditable")&&r.getAttribute("contenteditable")!=="false"?!0:["button","input","select","textarea","a","audio","video","summary"].includes(e)}function Wc(r){var e,n;let i=[];function o(f){f instanceof HTMLElement&&(i.push(f),f.shadowRoot!==null&&f.shadowRoot.mode==="open"&&o(f.shadowRoot)),[...f.querySelectorAll("*")].forEach(h=>o(h))}o(r);let s=(e=i.find(f=>Gc(f)))!=null?e:null,l=(n=i.reverse().find(f=>Gc(f)))!=null?n:null;return{start:s,end:l}}var ui=[],Yc=class{constructor(r){this.tabDirection="forward",this.element=r,this.handleFocusIn=this.handleFocusIn.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}activate(){ui.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown)}deactivate(){ui=ui.filter(r=>r!==this.element),document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown)}isActive(){return ui[ui.length-1]===this.element}handleFocusIn(r){let e=r.composedPath();if(this.isActive()&&!e.includes(this.element)){let{start:n,end:i}=Wc(this.element),o=this.tabDirection==="forward"?n:i;typeof(o==null?void 0:o.focus)=="function"&&o.focus({preventScroll:!0})}}handleKeyDown(r){r.key==="Tab"&&r.shiftKey&&(this.tabDirection="backward",setTimeout(()=>this.tabDirection="forward"))}};var Ss=new Set;function Ts(r){Ss.add(r),document.body.classList.add("sl-scroll-lock")}function Ds(r){Ss.delete(r),Ss.size===0&&document.body.classList.remove("sl-scroll-lock")}var Ps=new Set,Mm=new MutationObserver(Uc),As=new Map,ci=document.documentElement.lang||navigator.language,fi;Mm.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]});function Rm(...r){r.map(e=>{let n=e.$code.toLowerCase();As.set(n,e),fi||(fi=e)}),Uc()}function Om(r,e,...n){let i=r.toLowerCase().slice(0,2),o=r.length>2?r.toLowerCase():"",s=As.get(o),l=As.get(i),f;if(s&&s[e])f=s[e];else if(l&&l[e])f=l[e];else if(fi&&fi[e])f=fi[e];else return console.error(`No translation found for: ${e}`),e;return typeof f=="function"?f(...n):f}function Im(r,e,n){return e=new Date(e),new Intl.DateTimeFormat(r,n).format(e)}function zm(r,e,n){return e=Number(e),isNaN(e)?"":new Intl.NumberFormat(r,n).format(e)}function Nm(r,e,n,i){return new Intl.RelativeTimeFormat(r,i).format(e,n)}function Uc(){ci=document.documentElement.lang||navigator.language,[...Ps.keys()].map(r=>{typeof r.requestUpdate=="function"&&r.requestUpdate()})}var Xc=class{constructor(r){this.host=r,this.host.addController(this)}hostConnected(){Ps.add(this.host)}hostDisconnected(){Ps.delete(this.host)}term(r,...e){return Om(this.host.lang||ci,r,...e)}date(r,e){return Im(this.host.lang||ci,r,e)}number(r,e){return zm(this.host.lang||ci,r,e)}relativeTime(r,e,n){return Nm(this.host.lang||ci,r,e,n)}},Fm={$code:"en",$name:"English",$dir:"ltr",close:"Close",copy:"Copy",progress:"Progress",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",toggleColorFormat:"Toggle color format"};Rm(Fm);var Ls=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Bs=Symbol(),jc=new Map,Zc=class{constructor(r,e){if(this._$cssResult$=!0,e!==Bs)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=r}get styleSheet(){let r=jc.get(this.cssText);return Ls&&r===void 0&&(jc.set(this.cssText,r=new CSSStyleSheet),r.replaceSync(this.cssText)),r}toString(){return this.cssText}},Ms=r=>new Zc(typeof r=="string"?r:r+"",Bs),qt=(r,...e)=>{let n=r.length===1?r[0]:e.reduce((i,o,s)=>i+(l=>{if(l._$cssResult$===!0)return l.cssText;if(typeof l=="number")return l;throw Error("Value passed to 'css' function must be a 'css' function result: "+l+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+r[s+1],r[0]);return new Zc(n,Bs)},$m=(r,e)=>{Ls?r.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{let i=document.createElement("style"),o=window.litNonce;o!==void 0&&i.setAttribute("nonce",o),i.textContent=n.cssText,r.appendChild(i)})},Qc=Ls?r=>r:r=>r instanceof CSSStyleSheet?(e=>{let n="";for(let i of e.cssRules)n+=i.cssText;return Ms(n)})(r):r,Rs,Jc=window.trustedTypes,_m=Jc?Jc.emptyScript:"",ef=window.reactiveElementPolyfillSupport,Os={toAttribute(r,e){switch(e){case Boolean:r=r?_m:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,e){let n=r;switch(e){case Boolean:n=r!==null;break;case Number:n=r===null?null:Number(r);break;case Object:case Array:try{n=JSON.parse(r)}catch{n=null}}return n}},tf=(r,e)=>e!==r&&(e==e||r==r),Is={attribute:!0,type:String,converter:Os,reflect:!1,hasChanged:tf},$n=class extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(r){var e;(e=this.l)!==null&&e!==void 0||(this.l=[]),this.l.push(r)}static get observedAttributes(){this.finalize();let r=[];return this.elementProperties.forEach((e,n)=>{let i=this._$Eh(n,e);i!==void 0&&(this._$Eu.set(i,n),r.push(i))}),r}static createProperty(r,e=Is){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(r,e),!e.noAccessor&&!this.prototype.hasOwnProperty(r)){let n=typeof r=="symbol"?Symbol():"__"+r,i=this.getPropertyDescriptor(r,n,e);i!==void 0&&Object.defineProperty(this.prototype,r,i)}}static getPropertyDescriptor(r,e,n){return{get(){return this[e]},set(i){let o=this[r];this[e]=i,this.requestUpdate(r,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(r){return this.elementProperties.get(r)||Is}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;let r=Object.getPrototypeOf(this);if(r.finalize(),this.elementProperties=new Map(r.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){let e=this.properties,n=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(let i of n)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(r){let e=[];if(Array.isArray(r)){let n=new Set(r.flat(1/0).reverse());for(let i of n)e.unshift(Qc(i))}else r!==void 0&&e.push(Qc(r));return e}static _$Eh(r,e){let n=e.attribute;return n===!1?void 0:typeof n=="string"?n:typeof r=="string"?r.toLowerCase():void 0}o(){var r;this._$Ep=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$Em(),this.requestUpdate(),(r=this.constructor.l)===null||r===void 0||r.forEach(e=>e(this))}addController(r){var e,n;((e=this._$Eg)!==null&&e!==void 0?e:this._$Eg=[]).push(r),this.renderRoot!==void 0&&this.isConnected&&((n=r.hostConnected)===null||n===void 0||n.call(r))}removeController(r){var e;(e=this._$Eg)===null||e===void 0||e.splice(this._$Eg.indexOf(r)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((r,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])})}createRenderRoot(){var r;let e=(r=this.shadowRoot)!==null&&r!==void 0?r:this.attachShadow(this.constructor.shadowRootOptions);return $m(e,this.constructor.elementStyles),e}connectedCallback(){var r;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(r=this._$Eg)===null||r===void 0||r.forEach(e=>{var n;return(n=e.hostConnected)===null||n===void 0?void 0:n.call(e)})}enableUpdating(r){}disconnectedCallback(){var r;(r=this._$Eg)===null||r===void 0||r.forEach(e=>{var n;return(n=e.hostDisconnected)===null||n===void 0?void 0:n.call(e)})}attributeChangedCallback(r,e,n){this._$AK(r,n)}_$ES(r,e,n=Is){var i,o;let s=this.constructor._$Eh(r,n);if(s!==void 0&&n.reflect===!0){let l=((o=(i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==null&&o!==void 0?o:Os.toAttribute)(e,n.type);this._$Ei=r,l==null?this.removeAttribute(s):this.setAttribute(s,l),this._$Ei=null}}_$AK(r,e){var n,i,o;let s=this.constructor,l=s._$Eu.get(r);if(l!==void 0&&this._$Ei!==l){let f=s.getPropertyOptions(l),h=f.converter,p=(o=(i=(n=h)===null||n===void 0?void 0:n.fromAttribute)!==null&&i!==void 0?i:typeof h=="function"?h:null)!==null&&o!==void 0?o:Os.fromAttribute;this._$Ei=l,this[l]=p(e,f.type),this._$Ei=null}}requestUpdate(r,e,n){let i=!0;r!==void 0&&(((n=n||this.constructor.getPropertyOptions(r)).hasChanged||tf)(this[r],e)?(this._$AL.has(r)||this._$AL.set(r,e),n.reflect===!0&&this._$Ei!==r&&(this._$E_===void 0&&(this._$E_=new Map),this._$E_.set(r,n))):i=!1),!this.isUpdatePending&&i&&(this._$Ep=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ep}catch(e){Promise.reject(e)}let r=this.scheduleUpdate();return r!=null&&await r,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach((i,o)=>this[o]=i),this._$Et=void 0);let e=!1,n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$Eg)===null||r===void 0||r.forEach(i=>{var o;return(o=i.hostUpdate)===null||o===void 0?void 0:o.call(i)}),this.update(n)):this._$EU()}catch(i){throw e=!1,this._$EU(),i}e&&this._$AE(n)}willUpdate(r){}_$AE(r){var e;(e=this._$Eg)===null||e===void 0||e.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(r)),this.updated(r)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(r){return!0}update(r){this._$E_!==void 0&&(this._$E_.forEach((e,n)=>this._$ES(n,this[n],e)),this._$E_=void 0),this._$EU()}updated(r){}firstUpdated(r){}};$n.finalized=!0,$n.elementProperties=new Map,$n.elementStyles=[],$n.shadowRootOptions={mode:"open"},ef==null||ef({ReactiveElement:$n}),((Rs=globalThis.reactiveElementVersions)!==null&&Rs!==void 0?Rs:globalThis.reactiveElementVersions=[]).push("1.2.3");var zs,_n=globalThis.trustedTypes,rf=_n?_n.createPolicy("lit-html",{createHTML:r=>r}):void 0,Gr=`lit$${(Math.random()+"").slice(9)}$`,nf="?"+Gr,Vm=`<${nf}>`,Vn=document,hi=(r="")=>Vn.createComment(r),vi=r=>r===null||typeof r!="object"&&typeof r!="function",af=Array.isArray,Hm=r=>{var e;return af(r)||typeof((e=r)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},di=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,of=/-->/g,sf=/>/g,hn=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,lf=/'/g,uf=/"/g,cf=/^(?:script|style|textarea|title)$/i,ff=r=>(e,...n)=>({_$litType$:r,strings:e,values:n}),Pt=ff(1),h0=ff(2),Ft=Symbol.for("lit-noChange"),ft=Symbol.for("lit-nothing"),hf=new WeakMap,qm=(r,e,n)=>{var i,o;let s=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:e,l=s._$litPart$;if(l===void 0){let f=(o=n==null?void 0:n.renderBefore)!==null&&o!==void 0?o:null;s._$litPart$=l=new vo(e.insertBefore(hi(),f),f,void 0,n??{})}return l._$AI(r),l},Hn=Vn.createTreeWalker(Vn,129,null,!1),Km=(r,e)=>{let n=r.length-1,i=[],o,s=e===2?"<svg>":"",l=di;for(let h=0;h<n;h++){let p=r[h],g,m,y=-1,w=0;for(;w<p.length&&(l.lastIndex=w,m=l.exec(p),m!==null);)w=l.lastIndex,l===di?m[1]==="!--"?l=of:m[1]!==void 0?l=sf:m[2]!==void 0?(cf.test(m[2])&&(o=RegExp("</"+m[2],"g")),l=hn):m[3]!==void 0&&(l=hn):l===hn?m[0]===">"?(l=o??di,y=-1):m[1]===void 0?y=-2:(y=l.lastIndex-m[2].length,g=m[1],l=m[3]===void 0?hn:m[3]==='"'?uf:lf):l===uf||l===lf?l=hn:l===of||l===sf?l=di:(l=hn,o=void 0);let A=l===hn&&r[h+1].startsWith("/>")?" ":"";s+=l===di?p+Vm:y>=0?(i.push(g),p.slice(0,y)+"$lit$"+p.slice(y)+Gr+A):p+Gr+(y===-2?(i.push(void 0),h):A)}let f=s+(r[n]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return[rf!==void 0?rf.createHTML(f):f,i]},ho=class{constructor({strings:r,_$litType$:e},n){let i;this.parts=[];let o=0,s=0,l=r.length-1,f=this.parts,[h,p]=Km(r,e);if(this.el=ho.createElement(h,n),Hn.currentNode=this.el.content,e===2){let g=this.el.content,m=g.firstChild;m.remove(),g.append(...m.childNodes)}for(;(i=Hn.nextNode())!==null&&f.length<l;){if(i.nodeType===1){if(i.hasAttributes()){let g=[];for(let m of i.getAttributeNames())if(m.endsWith("$lit$")||m.startsWith(Gr)){let y=p[s++];if(g.push(m),y!==void 0){let w=i.getAttribute(y.toLowerCase()+"$lit$").split(Gr),A=/([.?@])?(.*)/.exec(y);f.push({type:1,index:o,name:A[2],strings:w,ctor:A[1]==="."?Wm:A[1]==="?"?Um:A[1]==="@"?Xm:po})}else f.push({type:6,index:o})}for(let m of g)i.removeAttribute(m)}if(cf.test(i.tagName)){let g=i.textContent.split(Gr),m=g.length-1;if(m>0){i.textContent=_n?_n.emptyScript:"";for(let y=0;y<m;y++)i.append(g[y],hi()),Hn.nextNode(),f.push({type:2,index:++o});i.append(g[m],hi())}}}else if(i.nodeType===8)if(i.data===nf)f.push({type:2,index:o});else{let g=-1;for(;(g=i.data.indexOf(Gr,g+1))!==-1;)f.push({type:7,index:o}),g+=Gr.length-1}o++}}static createElement(r,e){let n=Vn.createElement("template");return n.innerHTML=r,n}};function qn(r,e,n=r,i){var o,s,l,f;if(e===Ft)return e;let h=i!==void 0?(o=n._$Cl)===null||o===void 0?void 0:o[i]:n._$Cu,p=vi(e)?void 0:e._$litDirective$;return(h==null?void 0:h.constructor)!==p&&((s=h==null?void 0:h._$AO)===null||s===void 0||s.call(h,!1),p===void 0?h=void 0:(h=new p(r),h._$AT(r,n,i)),i!==void 0?((l=(f=n)._$Cl)!==null&&l!==void 0?l:f._$Cl=[])[i]=h:n._$Cu=h),h!==void 0&&(e=qn(r,h._$AS(r,e.values),h,i)),e}var Gm=class{constructor(r,e){this.v=[],this._$AN=void 0,this._$AD=r,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(r){var e;let{el:{content:n},parts:i}=this._$AD,o=((e=r==null?void 0:r.creationScope)!==null&&e!==void 0?e:Vn).importNode(n,!0);Hn.currentNode=o;let s=Hn.nextNode(),l=0,f=0,h=i[0];for(;h!==void 0;){if(l===h.index){let p;h.type===2?p=new vo(s,s.nextSibling,this,r):h.type===1?p=new h.ctor(s,h.name,h.strings,this,r):h.type===6&&(p=new jm(s,this,r)),this.v.push(p),h=i[++f]}l!==(h==null?void 0:h.index)&&(s=Hn.nextNode(),l++)}return o}m(r){let e=0;for(let n of this.v)n!==void 0&&(n.strings!==void 0?(n._$AI(r,n,e),e+=n.strings.length-2):n._$AI(r[e])),e++}},vo=class{constructor(r,e,n,i){var o;this.type=2,this._$AH=ft,this._$AN=void 0,this._$AA=r,this._$AB=e,this._$AM=n,this.options=i,this._$Cg=(o=i==null?void 0:i.isConnected)===null||o===void 0||o}get _$AU(){var r,e;return(e=(r=this._$AM)===null||r===void 0?void 0:r._$AU)!==null&&e!==void 0?e:this._$Cg}get parentNode(){let r=this._$AA.parentNode,e=this._$AM;return e!==void 0&&r.nodeType===11&&(r=e.parentNode),r}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(r,e=this){r=qn(this,r,e),vi(r)?r===ft||r==null||r===""?(this._$AH!==ft&&this._$AR(),this._$AH=ft):r!==this._$AH&&r!==Ft&&this.$(r):r._$litType$!==void 0?this.T(r):r.nodeType!==void 0?this.S(r):Hm(r)?this.A(r):this.$(r)}M(r,e=this._$AB){return this._$AA.parentNode.insertBefore(r,e)}S(r){this._$AH!==r&&(this._$AR(),this._$AH=this.M(r))}$(r){this._$AH!==ft&&vi(this._$AH)?this._$AA.nextSibling.data=r:this.S(Vn.createTextNode(r)),this._$AH=r}T(r){var e;let{values:n,_$litType$:i}=r,o=typeof i=="number"?this._$AC(r):(i.el===void 0&&(i.el=ho.createElement(i.h,this.options)),i);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===o)this._$AH.m(n);else{let s=new Gm(o,this),l=s.p(this.options);s.m(n),this.S(l),this._$AH=s}}_$AC(r){let e=hf.get(r.strings);return e===void 0&&hf.set(r.strings,e=new ho(r)),e}A(r){af(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,n,i=0;for(let o of r)i===e.length?e.push(n=new vo(this.M(hi()),this.M(hi()),this,this.options)):n=e[i],n._$AI(o),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i)}_$AR(r=this._$AA.nextSibling,e){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,e);r&&r!==this._$AB;){let i=r.nextSibling;r.remove(),r=i}}setConnected(r){var e;this._$AM===void 0&&(this._$Cg=r,(e=this._$AP)===null||e===void 0||e.call(this,r))}},po=class{constructor(r,e,n,i,o){this.type=1,this._$AH=ft,this._$AN=void 0,this.element=r,this.name=e,this._$AM=i,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ft}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(r,e=this,n,i){let o=this.strings,s=!1;if(o===void 0)r=qn(this,r,e,0),s=!vi(r)||r!==this._$AH&&r!==Ft,s&&(this._$AH=r);else{let l=r,f,h;for(r=o[0],f=0;f<o.length-1;f++)h=qn(this,l[n+f],e,f),h===Ft&&(h=this._$AH[f]),s||(s=!vi(h)||h!==this._$AH[f]),h===ft?r=ft:r!==ft&&(r+=(h??"")+o[f+1]),this._$AH[f]=h}s&&!i&&this.k(r)}k(r){r===ft?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,r??"")}},Wm=class extends po{constructor(){super(...arguments),this.type=3}k(r){this.element[this.name]=r===ft?void 0:r}},Ym=_n?_n.emptyScript:"",Um=class extends po{constructor(){super(...arguments),this.type=4}k(r){r&&r!==ft?this.element.setAttribute(this.name,Ym):this.element.removeAttribute(this.name)}},Xm=class extends po{constructor(r,e,n,i,o){super(r,e,n,i,o),this.type=5}_$AI(r,e=this){var n;if((r=(n=qn(this,r,e,0))!==null&&n!==void 0?n:ft)===Ft)return;let i=this._$AH,o=r===ft&&i!==ft||r.capture!==i.capture||r.once!==i.once||r.passive!==i.passive,s=r!==ft&&(i===ft||o);o&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,r),this._$AH=r}handleEvent(r){var e,n;typeof this._$AH=="function"?this._$AH.call((n=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&n!==void 0?n:this.element,r):this._$AH.handleEvent(r)}},jm=class{constructor(r,e,n){this.element=r,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(r){qn(this,r)}},vf=window.litHtmlPolyfillSupport;vf==null||vf(ho,vo),((zs=globalThis.litHtmlVersions)!==null&&zs!==void 0?zs:globalThis.litHtmlVersions=[]).push("2.1.3");var Ns,Fs,Kt=class extends $n{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var r,e;let n=super.createRenderRoot();return(r=(e=this.renderOptions).renderBefore)!==null&&r!==void 0||(e.renderBefore=n.firstChild),n}update(r){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(r),this._$Dt=qm(e,this.renderRoot,this.renderOptions)}connectedCallback(){var r;super.connectedCallback(),(r=this._$Dt)===null||r===void 0||r.setConnected(!0)}disconnectedCallback(){var r;super.disconnectedCallback(),(r=this._$Dt)===null||r===void 0||r.setConnected(!1)}render(){return Ft}};Kt.finalized=!0,Kt._$litElement$=!0,(Ns=globalThis.litElementHydrateSupport)===null||Ns===void 0||Ns.call(globalThis,{LitElement:Kt});var df=globalThis.litElementPolyfillSupport;df==null||df({LitElement:Kt});((Fs=globalThis.litElementVersions)!==null&&Fs!==void 0?Fs:globalThis.litElementVersions=[]).push("3.1.2");var hr=qt`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`;var pf=qt`
  ${hr}

  :host {
    --width: 31rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--sl-z-index-dialog);
  }

  .dialog__panel {
    display: flex;
    flex-direction: column;
    z-index: 2;
    width: var(--width);
    max-width: calc(100% - var(--sl-spacing-2x-large));
    max-height: calc(100% - var(--sl-spacing-2x-large));
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    box-shadow: var(--sl-shadow-x-large);
  }

  .dialog__panel:focus {
    outline: none;
  }

  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */
  @media screen and (max-width: 420px) {
    .dialog__panel {
      max-height: 80vh;
    }
  }

  .dialog--open .dialog__panel {
    display: flex;
    opacity: 1;
    transform: none;
  }

  .dialog__header {
    flex: 0 0 auto;
    display: flex;
  }

  .dialog__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .dialog__close {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-x-large);
    padding: 0 var(--header-spacing);
  }

  .dialog__body {
    flex: 1 1 auto;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .dialog__footer {
    flex: 0 0 auto;
    text-align: right;
    padding: var(--footer-spacing);
  }

  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {
    margin-left: var(--sl-spacing-x-small);
  }

  .dialog:not(.dialog--has-footer) .dialog__footer {
    display: none;
  }

  .dialog__overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
  }
`;var gf=Object.defineProperty,Zm=Object.defineProperties,Qm=Object.getOwnPropertyDescriptor,Jm=Object.getOwnPropertyDescriptors;var go=Object.getOwnPropertySymbols;var mf=Object.prototype.hasOwnProperty,yf=Object.prototype.propertyIsEnumerable,bf=(r,e,n)=>e in r?gf(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,it=(r,e)=>{for(var n in e||(e={}))mf.call(e,n)&&bf(r,n,e[n]);if(go)for(var n of go(e))yf.call(e,n)&&bf(r,n,e[n]);return r},Ot=(r,e)=>Zm(r,Jm(e));var $s=(r,e)=>{var n={};for(var i in r)mf.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&go)for(var i of go(r))e.indexOf(i)<0&&yf.call(r,i)&&(n[i]=r[i]);return n};var Le=(r,e,n,i)=>{for(var o=i>1?void 0:i?Qm(e,n):e,s=r.length-1,l;s>=0;s--)(l=r[s])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&gf(e,n,o),o};function kr(r,e,n){return new Promise(i=>{if((n==null?void 0:n.duration)===1/0)throw new Error("Promise-based animations must be finite.");let o=r.animate(e,Ot(it({},n),{duration:ey()?0:n.duration}));o.addEventListener("cancel",i,{once:!0}),o.addEventListener("finish",i,{once:!0})})}function _s(r){return r=r.toString().toLowerCase(),r.indexOf("ms")>-1?parseFloat(r):r.indexOf("s")>-1?parseFloat(r)*1e3:parseFloat(r)}function ey(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function Wr(r){return Promise.all(r.getAnimations().map(e=>new Promise(n=>{let i=requestAnimationFrame(n);e.addEventListener("cancel",()=>i,{once:!0}),e.addEventListener("finish",()=>i,{once:!0}),e.cancel()})))}var wf=new Map,ty=new WeakMap;function ry(r){return r??{keyframes:[],options:{duration:0}}}function Cr(r,e){wf.set(r,ry(e))}function Sr(r,e){let n=ty.get(r);if(n==null?void 0:n[e])return n[e];let i=wf.get(e);return i||{keyframes:[],options:{duration:0}}}var mo=class{constructor(r,...e){this.slotNames=[],(this.host=r).addController(this),this.slotNames=e,this.handleSlotChange=this.handleSlotChange.bind(this)}hasDefaultSlot(){return[...this.host.childNodes].some(r=>r.nodeType===r.TEXT_NODE&&r.textContent.trim()!==""||r.nodeType===r.ELEMENT_NODE&&!r.hasAttribute("slot"))}hasNamedSlot(r){return this.host.querySelector(`:scope > [slot="${r}"]`)!==null}test(r){return r==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(r)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}handleSlotChange(r){let e=r.target;(this.slotNames.includes("[default]")&&!e.name||e.name&&this.slotNames.includes(e.name))&&this.host.requestUpdate()}};var or={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},vn=r=>(...e)=>({_$litDirective$:r,values:e}),Kn=class{constructor(r){}get _$AU(){return this._$AM._$AU}_$AT(r,e,n){this._$Ct=r,this._$AM=e,this._$Ci=n}_$AS(r,e){return this.update(r,e)}update(r,e){return this.render(...e)}};var Tr=vn(class extends Kn{constructor(r){var e;if(super(r),r.type!==or.ATTRIBUTE||r.name!=="class"||((e=r.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(r){return" "+Object.keys(r).filter(e=>r[e]).join(" ")+" "}update(r,[e]){var n,i;if(this.st===void 0){this.st=new Set,r.strings!==void 0&&(this.et=new Set(r.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(let s in e)e[s]&&!((n=this.et)===null||n===void 0?void 0:n.has(s))&&this.st.add(s);return this.render(e)}let o=r.element.classList;this.st.forEach(s=>{s in e||(o.remove(s),this.st.delete(s))});for(let s in e){let l=!!e[s];l===this.st.has(s)||((i=this.et)===null||i===void 0?void 0:i.has(s))||(l?(o.add(s),this.st.add(s)):(o.remove(s),this.st.delete(s)))}return Ft}});function At(r,e){let n=it({waitUntilFirstUpdate:!1},e);return(i,o)=>{let{update:s}=i;if(r in i){let l=r;i.update=function(f){if(f.has(l)){let h=f.get(l),p=this[l];h!==p&&(!n.waitUntilFirstUpdate||this.hasUpdated)&&this[o](h,p)}s.call(this,f)}}}}function ot(r,e,n){let i=new CustomEvent(e,it({bubbles:!0,cancelable:!1,composed:!0,detail:{}},n));return r.dispatchEvent(i),i}function Gn(r,e){return new Promise(n=>{function i(o){o.target===r&&(r.removeEventListener(e,i),n())}r.addEventListener(e,i)})}var tt=r=>r??ft;var vr=r=>e=>typeof e=="function"?((n,i)=>(window.customElements.define(n,i),i))(r,e):((n,i)=>{let{kind:o,elements:s}=i;return{kind:o,elements:s,finisher(l){window.customElements.define(n,l)}}})(r,e),ny=(r,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?Ot(it({},e),{finisher(n){n.createProperty(e.key,r)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,r)}};function $e(r){return(e,n)=>n!==void 0?((i,o,s)=>{o.constructor.createProperty(s,i)})(r,e,n):ny(r,e)}function pi(r){return $e(Ot(it({},r),{state:!0}))}var ay=({finisher:r,descriptor:e})=>(n,i)=>{var o;if(i===void 0){let s=(o=n.originalKey)!==null&&o!==void 0?o:n.key,l=e!=null?{kind:"method",placement:"prototype",key:s,descriptor:e(n.key)}:Ot(it({},n),{key:s});return r!=null&&(l.finisher=function(f){r(f,s)}),l}{let s=n.constructor;e!==void 0&&Object.defineProperty(n,i,e(i)),r==null||r(s,i)}};function Zt(r,e){return ay({descriptor:n=>{let i={get(){var o,s;return(s=(o=this.renderRoot)===null||o===void 0?void 0:o.querySelector(r))!==null&&s!==void 0?s:null},enumerable:!0,configurable:!0};if(e){let o=typeof n=="symbol"?Symbol():"__"+n;i.get=function(){var s,l;return this[o]===void 0&&(this[o]=(l=(s=this.renderRoot)===null||s===void 0?void 0:s.querySelector(r))!==null&&l!==void 0?l:null),this[o]}}return i}})}var Vs,z0=((Vs=window.HTMLSlotElement)===null||Vs===void 0?void 0:Vs.prototype.assignedElements)!=null?(r,e)=>r.assignedElements(e):(r,e)=>r.assignedNodes(e).filter(n=>n.nodeType===Node.ELEMENT_NODE);var sr=class extends Kt{constructor(){super(...arguments);this.hasSlotController=new mo(this,"footer"),this.localize=new Xc(this),this.open=!1,this.label="",this.noHeader=!1}connectedCallback(){super.connectedCallback(),this.modal=new Yc(this)}firstUpdated(){this.dialog.hidden=!this.open,this.open&&(this.modal.activate(),Ts(this))}disconnectedCallback(){super.disconnectedCallback(),Ds(this)}async show(){if(!this.open)return this.open=!0,Gn(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,Gn(this,"sl-after-hide")}requestClose(r){if(ot(this,"sl-request-close",{cancelable:!0,detail:{source:r}}).defaultPrevented){let n=Sr(this,"dialog.denyClose");kr(this.panel,n.keyframes,n.options);return}this.hide()}handleKeyDown(r){r.key==="Escape"&&(r.stopPropagation(),this.requestClose("keyboard"))}async handleOpenChange(){if(this.open){ot(this,"sl-show"),this.originalTrigger=document.activeElement,this.modal.activate(),Ts(this);let r=this.querySelector("[autofocus]");r&&r.removeAttribute("autofocus"),await Promise.all([Wr(this.dialog),Wr(this.overlay)]),this.dialog.hidden=!1,requestAnimationFrame(()=>{ot(this,"sl-initial-focus",{cancelable:!0}).defaultPrevented||(r?r.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),r&&r.setAttribute("autofocus","")});let e=Sr(this,"dialog.show"),n=Sr(this,"dialog.overlay.show");await Promise.all([kr(this.panel,e.keyframes,e.options),kr(this.overlay,n.keyframes,n.options)]),ot(this,"sl-after-show")}else{ot(this,"sl-hide"),this.modal.deactivate(),await Promise.all([Wr(this.dialog),Wr(this.overlay)]);let r=Sr(this,"dialog.hide"),e=Sr(this,"dialog.overlay.hide");await Promise.all([kr(this.panel,r.keyframes,r.options),kr(this.overlay,e.keyframes,e.options)]),this.dialog.hidden=!0,Ds(this);let n=this.originalTrigger;typeof(n==null?void 0:n.focus)=="function"&&setTimeout(()=>n.focus()),ot(this,"sl-after-hide")}}render(){return Pt`
      <div
        part="base"
        class=${Tr({dialog:!0,"dialog--open":this.open,"dialog--has-footer":this.hasSlotController.test("footer")})}
        @keydown=${this.handleKeyDown}
      >
        <div part="overlay" class="dialog__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="dialog__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${tt(this.noHeader?this.label:void 0)}
          aria-labelledby=${tt(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":Pt`
                <header part="header" class="dialog__header">
                  <h2 part="title" class="dialog__title" id="title">
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <sl-icon-button
                    part="close-button"
                    exportparts="base:close-button__base"
                    class="dialog__close"
                    name="x"
                    label=${this.localize.term("close")}
                    library="system"
                    @click="${()=>this.requestClose("close-button")}"
                  ></sl-icon-button>
                </header>
              `}

          <div part="body" class="dialog__body">
            <slot></slot>
          </div>

          <footer part="footer" class="dialog__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};sr.styles=pf;Le([Zt(".dialog")],sr.prototype,"dialog",2);Le([Zt(".dialog__panel")],sr.prototype,"panel",2);Le([Zt(".dialog__overlay")],sr.prototype,"overlay",2);Le([$e({type:Boolean,reflect:!0})],sr.prototype,"open",2);Le([$e({reflect:!0})],sr.prototype,"label",2);Le([$e({attribute:"no-header",type:Boolean,reflect:!0})],sr.prototype,"noHeader",2);Le([At("open",{waitUntilFirstUpdate:!0})],sr.prototype,"handleOpenChange",1);sr=Le([vr("sl-dialog")],sr);Cr("dialog.show",{keyframes:[{opacity:0,transform:"scale(0.8)"},{opacity:1,transform:"scale(1)"}],options:{duration:250,easing:"ease"}});Cr("dialog.hide",{keyframes:[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.8)"}],options:{duration:250,easing:"ease"}});Cr("dialog.denyClose",{keyframes:[{transform:"scale(1)"},{transform:"scale(1.02)"},{transform:"scale(1)"}],options:{duration:250}});Cr("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});Cr("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});var iy=(()=>{let r=document.createElement("style"),e;try{document.head.appendChild(r),r.sheet.insertRule(":focus-visible { color: inherit }"),e=!0}catch{e=!1}finally{r.remove()}return e})(),xf=Ms(iy?":focus-visible":":focus");var Ef=qt`
  ${hr}

  :host {
    display: inline-block;
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: var(--sl-color-neutral-600);
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-medium) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button${xf} {
    box-shadow: var(--sl-focus-ring);
  }
`;var Qt=class extends Kt{constructor(){super(...arguments);this.label="",this.disabled=!1}render(){let r=!!this.href,e=Pt`
      <sl-icon
        name=${tt(this.name)}
        library=${tt(this.library)}
        src=${tt(this.src)}
        aria-hidden="true"
      ></sl-icon>
    `;return r?Pt`
          <a
            part="base"
            class="icon-button"
            href=${tt(this.href)}
            target=${tt(this.target)}
            download=${tt(this.download)}
            rel=${tt(this.target?"noreferrer noopener":void 0)}
            role="button"
            aria-disabled=${this.disabled?"true":"false"}
            aria-label="${this.label}"
            tabindex=${this.disabled?"-1":"0"}
          >
            ${e}
          </a>
        `:Pt`
          <button
            part="base"
            class=${Tr({"icon-button":!0,"icon-button--disabled":this.disabled})}
            ?disabled=${this.disabled}
            type="button"
            aria-label=${this.label}
          >
            ${e}
          </button>
        `}};Qt.styles=Ef;Le([Zt("button")],Qt.prototype,"button",2);Le([$e()],Qt.prototype,"name",2);Le([$e()],Qt.prototype,"library",2);Le([$e()],Qt.prototype,"src",2);Le([$e()],Qt.prototype,"href",2);Le([$e()],Qt.prototype,"target",2);Le([$e()],Qt.prototype,"download",2);Le([$e()],Qt.prototype,"label",2);Le([$e({type:Boolean,reflect:!0})],Qt.prototype,"disabled",2);Qt=Le([vr("sl-icon-button")],Qt);var kf="";function Cf(r){kf=r}function Sf(){return kf.replace(/\/$/,"")}var Tf=[...document.getElementsByTagName("script")],Df=Tf.find(r=>r.hasAttribute("data-shoelace"));if(Df)Cf(Df.getAttribute("data-shoelace"));else{let r=Tf.find(n=>/shoelace(\.min)?\.js($|\?)/.test(n.src)),e="";r&&(e=r.getAttribute("src")),Cf(e.split("/").slice(0,-1).join("/"))}var oy={name:"default",resolver:r=>`${Sf()}/assets/icons/${r}.svg`},Pf=oy;var Af={"check-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16">
      <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"></path>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,x:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
      <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},sy={name:"system",resolver:r=>r in Af?`data:image/svg+xml,${encodeURIComponent(Af[r])}`:""},Lf=sy;var yo=[Pf,Lf],bo=[];function Bf(r){bo.push(r)}function Mf(r){bo=bo.filter(e=>e!==r)}function Hs(r){return yo.find(e=>e.name===r)}function qs(r,e){Rf(r),yo.push({name:r,resolver:e.resolver,mutator:e.mutator}),bo.forEach(n=>{n.library===r&&n.redraw()})}function Rf(r){yo=yo.filter(e=>e.name!==r)}var Ks=new Map;function Of(r,e="cors"){if(Ks.has(r))return Ks.get(r);let n=fetch(r,{mode:e}).then(async i=>({ok:i.ok,status:i.status,html:await i.text()}));return Ks.set(r,n),n}var Gs=new Map;async function If(r){if(Gs.has(r))return Gs.get(r);let e=await Of(r),n={ok:e.ok,status:e.status,svg:null};if(e.ok){let i=document.createElement("div");i.innerHTML=e.html;let o=i.firstElementChild;n.svg=(o==null?void 0:o.tagName.toLowerCase())==="svg"?o.outerHTML:""}return Gs.set(r,n),n}var zf=qt`
  ${hr}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    contain: strict;
    box-sizing: content-box !important;
  }

  .icon,
  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`;var wo=class extends Kn{constructor(r){if(super(r),this.it=ft,r.type!==or.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(r){if(r===ft||r==null)return this.vt=void 0,this.it=r;if(r===Ft)return r;if(typeof r!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(r===this.it)return this.vt;this.it=r;let e=[r];return e.raw=e,this.vt={_$litType$:this.constructor.resultType,strings:e,values:[]}}};wo.directiveName="unsafeHTML",wo.resultType=1;var Ib=vn(wo),Ws=class extends wo{};Ws.directiveName="unsafeSVG",Ws.resultType=2;var ly=vn(Ws),uy=new DOMParser,dr=class extends Kt{constructor(){super(...arguments);this.svg="",this.label="",this.library="default"}connectedCallback(){super.connectedCallback(),Bf(this)}firstUpdated(){this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),Mf(this)}getUrl(){let r=Hs(this.library);return this.name&&r?r.resolver(this.name):this.src}redraw(){this.setIcon()}async setIcon(){var r;let e=Hs(this.library),n=this.getUrl();if(n)try{let i=await If(n);if(n!==this.getUrl())return;if(i.ok){let s=uy.parseFromString(i.svg,"text/html").body.querySelector("svg");s!==null?((r=e==null?void 0:e.mutator)==null||r.call(e,s),this.svg=s.outerHTML,ot(this,"sl-load")):(this.svg="",ot(this,"sl-error",{detail:{status:i.status}}))}else this.svg="",ot(this,"sl-error",{detail:{status:i.status}})}catch{ot(this,"sl-error",{detail:{status:-1}})}else this.svg.length>0&&(this.svg="")}handleChange(){this.setIcon()}render(){let r=typeof this.label=="string"&&this.label.length>0;return Pt` <div
      part="base"
      class="icon"
      role=${tt(r?"img":void 0)}
      aria-label=${tt(r?this.label:void 0)}
      aria-hidden=${tt(r?void 0:"true")}
    >
      ${ly(this.svg)}
    </div>`}};dr.styles=zf;Le([pi()],dr.prototype,"svg",2);Le([$e()],dr.prototype,"name",2);Le([$e()],dr.prototype,"src",2);Le([$e()],dr.prototype,"label",2);Le([$e()],dr.prototype,"library",2);Le([At("name"),At("src"),At("library")],dr.prototype,"setIcon",1);dr=Le([vr("sl-icon")],dr);var Nf=qt`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control_label {
    font-size: var(--sl-input-label-font-size-large);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
  }

  .form-control--has-help-text .form-control__help-text ::slotted(*) {
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }
`;var Ff=qt`
  ${hr}
  ${Nf}

  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: var(--sl-focus-ring);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    box-shadow: var(--sl-focus-ring);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix ::slotted(sl-icon),
  .input__suffix ::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix ::slotted(*) {
    padding-left: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix ::slotted(*) {
    padding-right: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix ::slotted(*) {
    padding-left: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix ::slotted(*) {
    padding-right: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix ::slotted(*) {
    padding-left: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix ::slotted(*) {
    padding-right: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  .input--empty .input__clear {
    visibility: hidden;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }
`;var cy=r=>r.strings===void 0,fy={},hy=(r,e=fy)=>r._$AH=e,$f=vn(class extends Kn{constructor(r){if(super(r),r.type!==or.PROPERTY&&r.type!==or.ATTRIBUTE&&r.type!==or.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!cy(r))throw Error("`live` bindings can only contain a single expression")}render(r){return r}update(r,[e]){if(e===Ft||e===ft)return e;let n=r.element,i=r.name;if(r.type===or.PROPERTY){if(e===n[i])return Ft}else if(r.type===or.BOOLEAN_ATTRIBUTE){if(!!e===n.hasAttribute(i))return Ft}else if(r.type===or.ATTRIBUTE&&n.getAttribute(i)===e+"")return Ft;return hy(r),e}});var vy=class extends Event{constructor(r){super("formdata");this.formData=r}},dy=class extends FormData{constructor(r){super(r);this.form=r,r.dispatchEvent(new vy(this))}append(r,e){let n=this.form.elements[r];if(n||(n=document.createElement("input"),n.type="hidden",n.name=r,this.form.appendChild(n)),this.has(r)){let i=this.getAll(r),o=i.indexOf(n.value);o!==-1&&i.splice(o,1),i.push(e),this.set(r,i)}else super.append(r,e);n.value=e}};function py(){let r=document.createElement("form"),e=!1;return document.body.append(r),r.addEventListener("submit",n=>{new FormData(n.target),n.preventDefault()}),r.addEventListener("formdata",()=>e=!0),r.dispatchEvent(new Event("submit",{cancelable:!0})),r.remove(),e}function Vf(){!window.FormData||py()||(window.FormData=dy,window.addEventListener("submit",r=>{r.defaultPrevented||new FormData(r.target)}))}document.readyState==="complete"?Vf():window.addEventListener("DOMContentLoaded",()=>Vf());var Hf=class{constructor(r,e){(this.host=r).addController(this),this.options=it({form:n=>n.closest("form"),name:n=>n.name,value:n=>n.value,disabled:n=>n.disabled,reportValidity:n=>typeof n.reportValidity=="function"?n.reportValidity():!0},e),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}hostConnected(){this.form=this.options.form(this.host),this.form&&(this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit))}hostDisconnected(){this.form&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form=void 0)}handleFormData(r){let e=this.options.disabled(this.host),n=this.options.name(this.host),i=this.options.value(this.host);!e&&typeof n=="string"&&typeof i!="undefined"&&(Array.isArray(i)?i.forEach(o=>{r.formData.append(n,o.toString())}):r.formData.append(n,i.toString()))}handleFormSubmit(r){let e=this.options.disabled(this.host),n=this.options.reportValidity;this.form&&!this.form.noValidate&&!e&&!n(this.host)&&(r.preventDefault(),r.stopImmediatePropagation())}submit(r){if(this.form){let e=document.createElement("button");e.type="submit",e.style.position="absolute",e.style.width="0",e.style.height="0",e.style.clip="rect(0 0 0 0)",e.style.clipPath="inset(50%)",e.style.overflow="hidden",e.style.whiteSpace="nowrap",r&&(e.formAction=r.formAction,e.formMethod=r.formMethod,e.formNoValidate=r.formNoValidate,e.formTarget=r.formTarget),this.form.append(e),e.click(),e.remove()}}};var Ye=class extends Kt{constructor(){super(...arguments);this.formSubmitController=new Hf(this),this.hasSlotController=new mo(this,"help-text","label"),this.hasFocus=!1,this.isPasswordVisible=!1,this.type="text",this.size="medium",this.value="",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.togglePassword=!1,this.disabled=!1,this.readonly=!1,this.required=!1,this.invalid=!1}get valueAsDate(){var r,e;return(e=(r=this.input)==null?void 0:r.valueAsDate)!=null?e:null}set valueAsDate(r){this.updateComplete.then(()=>{this.input.valueAsDate=r,this.value=this.input.value})}get valueAsNumber(){var r,e;return(e=(r=this.input)==null?void 0:r.valueAsNumber)!=null?e:parseFloat(this.value)}set valueAsNumber(r){this.updateComplete.then(()=>{this.input.valueAsNumber=r,this.value=this.input.value})}firstUpdated(){this.invalid=!this.input.checkValidity()}focus(r){this.input.focus(r)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(r,e,n="none"){this.input.setSelectionRange(r,e,n)}setRangeText(r,e,n,i="preserve"){this.input.setRangeText(r,e,n,i),this.value!==this.input.value&&(this.value=this.input.value,ot(this,"sl-input"),ot(this,"sl-change"))}reportValidity(){return this.input.reportValidity()}setCustomValidity(r){this.input.setCustomValidity(r),this.invalid=!this.input.checkValidity()}handleBlur(){this.hasFocus=!1,ot(this,"sl-blur")}handleChange(){this.value=this.input.value,ot(this,"sl-change")}handleClearClick(r){this.value="",ot(this,"sl-clear"),ot(this,"sl-input"),ot(this,"sl-change"),this.input.focus(),r.stopPropagation()}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity()}handleFocus(){this.hasFocus=!0,ot(this,"sl-focus")}handleInput(){this.value=this.input.value,ot(this,"sl-input")}handleInvalid(){this.invalid=!0}handleKeyDown(r){let e=r.metaKey||r.ctrlKey||r.shiftKey||r.altKey;r.key==="Enter"&&!e&&this.formSubmitController.submit()}handlePasswordToggle(){this.isPasswordVisible=!this.isPasswordVisible}handleValueChange(){this.invalid=!this.input.checkValidity()}render(){let r=this.hasSlotController.test("label"),e=this.hasSlotController.test("help-text"),n=this.label?!0:!!r,i=this.helpText?!0:!!e;return Pt`
      <div
        part="form-control"
        class=${Tr({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":n,"form-control--has-help-text":i})}
      >
        <label part="label" class="form-control__label" for="input" aria-hidden=${n?"false":"true"}>
          <slot name="label">${this.label}</slot>
        </label>

        <div class="form-control__input">
          <div
            part="base"
            class=${Tr({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":this.value.length===0,"input--invalid":this.invalid})}
          >
            <span part="prefix" class="input__prefix">
              <slot name="prefix"></slot>
            </span>

            <input
              part="input"
              id="input"
              class="input__control"
              type=${this.type==="password"&&this.isPasswordVisible?"text":this.type}
              name=${tt(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${tt(this.placeholder)}
              minlength=${tt(this.minlength)}
              maxlength=${tt(this.maxlength)}
              min=${tt(this.min)}
              max=${tt(this.max)}
              step=${tt(this.step)}
              .value=${$f(this.value)}
              autocapitalize=${tt(this.autocapitalize)}
              autocomplete=${tt(this.autocomplete)}
              autocorrect=${tt(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${tt(this.spellcheck)}
              pattern=${tt(this.pattern)}
              inputmode=${tt(this.inputmode)}
              aria-describedby="help-text"
              aria-invalid=${this.invalid?"true":"false"}
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${this.clearable&&this.value.length>0?Pt`
                  <button
                    part="clear-button"
                    class="input__clear"
                    type="button"
                    @click=${this.handleClearClick}
                    tabindex="-1"
                  >
                    <slot name="clear-icon">
                      <sl-icon name="x-circle-fill" library="system"></sl-icon>
                    </slot>
                  </button>
                `:""}
            ${this.togglePassword?Pt`
                  <button
                    part="password-toggle-button"
                    class="input__password-toggle"
                    type="button"
                    @click=${this.handlePasswordToggle}
                    tabindex="-1"
                  >
                    ${this.isPasswordVisible?Pt`
                          <slot name="show-password-icon">
                            <sl-icon name="eye-slash" library="system"></sl-icon>
                          </slot>
                        `:Pt`
                          <slot name="hide-password-icon">
                            <sl-icon name="eye" library="system"></sl-icon>
                          </slot>
                        `}
                  </button>
                `:""}

            <span part="suffix" class="input__suffix">
              <slot name="suffix"></slot>
            </span>
          </div>
        </div>

        <div
          part="help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};Ye.styles=Ff;Le([Zt(".input__control")],Ye.prototype,"input",2);Le([pi()],Ye.prototype,"hasFocus",2);Le([pi()],Ye.prototype,"isPasswordVisible",2);Le([$e({reflect:!0})],Ye.prototype,"type",2);Le([$e({reflect:!0})],Ye.prototype,"size",2);Le([$e()],Ye.prototype,"name",2);Le([$e()],Ye.prototype,"value",2);Le([$e({type:Boolean,reflect:!0})],Ye.prototype,"filled",2);Le([$e({type:Boolean,reflect:!0})],Ye.prototype,"pill",2);Le([$e()],Ye.prototype,"label",2);Le([$e({attribute:"help-text"})],Ye.prototype,"helpText",2);Le([$e({type:Boolean})],Ye.prototype,"clearable",2);Le([$e({attribute:"toggle-password",type:Boolean})],Ye.prototype,"togglePassword",2);Le([$e()],Ye.prototype,"placeholder",2);Le([$e({type:Boolean,reflect:!0})],Ye.prototype,"disabled",2);Le([$e({type:Boolean,reflect:!0})],Ye.prototype,"readonly",2);Le([$e({type:Number})],Ye.prototype,"minlength",2);Le([$e({type:Number})],Ye.prototype,"maxlength",2);Le([$e()],Ye.prototype,"min",2);Le([$e()],Ye.prototype,"max",2);Le([$e({type:Number})],Ye.prototype,"step",2);Le([$e()],Ye.prototype,"pattern",2);Le([$e({type:Boolean,reflect:!0})],Ye.prototype,"required",2);Le([$e({type:Boolean,reflect:!0})],Ye.prototype,"invalid",2);Le([$e()],Ye.prototype,"autocapitalize",2);Le([$e()],Ye.prototype,"autocorrect",2);Le([$e()],Ye.prototype,"autocomplete",2);Le([$e({type:Boolean})],Ye.prototype,"autofocus",2);Le([$e({type:Boolean})],Ye.prototype,"spellcheck",2);Le([$e()],Ye.prototype,"inputmode",2);Le([At("disabled",{waitUntilFirstUpdate:!0})],Ye.prototype,"handleDisabledChange",1);Le([At("value",{waitUntilFirstUpdate:!0})],Ye.prototype,"handleValueChange",1);Ye=Le([vr("sl-input")],Ye);var qf=qt`
  ${hr}

  :host {
    --max-width: 20rem;
    --hide-delay: 0ms;
    --show-delay: 150ms;

    display: contents;
  }

  .tooltip-target {
    display: contents;
  }

  .tooltip-positioner {
    position: absolute;
    z-index: var(--sl-z-index-tooltip);
    pointer-events: none;
  }

  .tooltip-positioner[data-placement^='top'] .tooltip {
    transform-origin: bottom;
  }

  .tooltip-positioner[data-placement^='bottom'] .tooltip {
    transform-origin: top;
  }

  .tooltip-positioner[data-placement^='left'] .tooltip {
    transform-origin: right;
  }

  .tooltip-positioner[data-placement^='right'] .tooltip {
    transform-origin: left;
  }

  .tooltip__content {
    max-width: var(--max-width);
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    padding: var(--sl-tooltip-padding);
  }

  .tooltip__arrow {
    position: absolute;
    background: var(--sl-tooltip-background-color);
    width: calc(var(--sl-tooltip-arrow-size) * 2);
    height: calc(var(--sl-tooltip-arrow-size) * 2);
    transform: rotate(45deg);
    z-index: -1;
  }
`;function gi(r){return r.split("-")[0]}function Ys(r){return r.split("-")[1]}function mi(r){return["top","bottom"].includes(gi(r))?"x":"y"}function Us(r){return r==="y"?"height":"width"}function Kf(r,e,n){let{reference:i,floating:o}=r,s=i.x+i.width/2-o.width/2,l=i.y+i.height/2-o.height/2,f=mi(e),h=Us(f),p=i[h]/2-o[h]/2,g=gi(e),m=f==="x",y;switch(g){case"top":y={x:s,y:i.y-o.height};break;case"bottom":y={x:s,y:i.y+i.height};break;case"right":y={x:i.x+i.width,y:l};break;case"left":y={x:i.x-o.width,y:l};break;default:y={x:i.x,y:i.y}}switch(Ys(e)){case"start":y[f]-=p*(n&&m?-1:1);break;case"end":y[f]+=p*(n&&m?-1:1);break}return y}var gy=async(r,e,n)=>{let{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:l}=n,f=await(l.isRTL==null?void 0:l.isRTL(e)),h=await l.getElementRects({reference:r,floating:e,strategy:o}),{x:p,y:g}=Kf(h,i,f),m=i,y={},w=new Set,A=0;for(let k=0;k<s.length;k++){let{name:B,fn:R}=s[k];if(w.has(B))continue;let{x:z,y:$,data:H,reset:X}=await R({x:p,y:g,initialPlacement:i,placement:m,strategy:o,middlewareData:y,rects:h,platform:l,elements:{reference:r,floating:e}});if(p=z??p,g=$??g,y=Ot(it({},y),{[B]:it(it({},y[B]),H)}),X){typeof X=="object"&&(X.placement&&(m=X.placement),X.rects&&(h=X.rects===!0?await l.getElementRects({reference:r,floating:e,strategy:o}):X.rects),{x:p,y:g}=Kf(h,m,f),X.skip!==!1&&w.add(B)),k=-1;continue}}return{x:p,y:g,placement:m,strategy:o,middlewareData:y}};function my(r){return it({top:0,right:0,bottom:0,left:0},r)}function Gf(r){return typeof r!="number"?my(r):{top:r,right:r,bottom:r,left:r}}function xo(r){return Ot(it({},r),{top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height})}async function Wf(r,e){var n;e===void 0&&(e={});let{x:i,y:o,platform:s,rects:l,elements:f,strategy:h}=r,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:y=!1,padding:w=0}=e,A=Gf(w),B=f[y?m==="floating"?"reference":"floating":m],R=xo(await s.getClippingRect({element:((n=await(s.isElement==null?void 0:s.isElement(B)))!=null?n:!0)?B:B.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(f.floating)),boundary:p,rootBoundary:g})),z=xo(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m==="floating"?Ot(it({},l.floating),{x:i,y:o}):l.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(f.floating)),strategy:h}):l[m]);return{top:R.top-z.top+A.top,bottom:z.bottom-R.bottom+A.bottom,left:R.left-z.left+A.left,right:z.right-R.right+A.right}}var yy=Math.min,by=Math.max;function Xs(r,e,n){return by(r,yy(e,n))}var Yf=r=>({name:"arrow",options:r,async fn(e){let{element:n,padding:i=0}=r??{},{x:o,y:s,placement:l,rects:f,platform:h}=e;if(n==null)return{};let p=Gf(i),g={x:o,y:s},m=mi(l),y=Us(m),w=await h.getDimensions(n),A=m==="y"?"top":"left",k=m==="y"?"bottom":"right",B=f.reference[y]+f.reference[m]-g[m]-f.floating[y],R=g[m]-f.reference[m],z=await(h.getOffsetParent==null?void 0:h.getOffsetParent(n)),$=z?m==="y"?z.clientHeight||0:z.clientWidth||0:0,H=B/2-R/2,X=p[A],ee=$-w[y]-p[k],_=$/2-w[y]/2+H,te=Xs(X,_,ee);return{data:{[m]:te,centerOffset:_-te}}}}),wy={left:"right",right:"left",bottom:"top",top:"bottom"};function Eo(r){return r.replace(/left|right|bottom|top/g,e=>wy[e])}function xy(r,e,n){n===void 0&&(n=!1);let i=Ys(r),o=mi(r),s=Us(o),l=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(l=Eo(l)),{main:l,cross:Eo(l)}}var Ey={start:"end",end:"start"};function Uf(r){return r.replace(/start|end/g,e=>Ey[e])}function ky(r){let e=Eo(r);return[Uf(r),e,Uf(e)]}var Xf=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var n;let{placement:i,middlewareData:o,rects:s,initialPlacement:l,platform:f,elements:h}=e,p=r,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:w="bestFit",flipAlignment:A=!0}=p,k=$s(p,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),B=gi(i),z=y||(B===l||!A?[Eo(l)]:ky(l)),$=[l,...z],H=await Wf(e,k),X=[],ee=((n=o.flip)==null?void 0:n.overflows)||[];if(g&&X.push(H[B]),m){let{main:ae,cross:ne}=xy(i,s,await(f.isRTL==null?void 0:f.isRTL(h.floating)));X.push(H[ae],H[ne])}if(ee=[...ee,{placement:i,overflows:X}],!X.every(ae=>ae<=0)){var _,te;let ae=((_=(te=o.flip)==null?void 0:te.index)!=null?_:0)+1,ne=$[ae];if(ne)return{data:{index:ae,overflows:ee},reset:{skip:!1,placement:ne}};let re="bottom";switch(w){case"bestFit":{var q;let oe=(q=ee.slice().sort((ie,ve)=>ie.overflows.filter(le=>le>0).reduce((le,he)=>le+he,0)-ve.overflows.filter(le=>le>0).reduce((le,he)=>le+he,0))[0])==null?void 0:q.placement;oe&&(re=oe);break}case"initialPlacement":re=l;break}return{reset:{placement:re}}}return{}}}};function Cy(r,e,n,i){i===void 0&&(i=!1);let o=gi(r),s=Ys(r),l=mi(r)==="x",f=["left","top"].includes(o)?-1:1,h=1;s==="end"&&(h=-1),i&&l&&(h*=-1);let p=typeof n=="function"?n(Ot(it({},e),{placement:r})):n,{mainAxis:g,crossAxis:m}=typeof p=="number"?{mainAxis:p,crossAxis:0}:it({mainAxis:0,crossAxis:0},p);return l?{x:m*h,y:g*f}:{x:g*f,y:m*h}}var jf=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){let{x:n,y:i,placement:o,rects:s,platform:l,elements:f}=e,h=Cy(o,s,r,await(l.isRTL==null?void 0:l.isRTL(f.floating)));return{x:n+h.x,y:i+h.y,data:h}}}};function Sy(r){return r==="x"?"y":"x"}var Zf=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){let{x:n,y:i,placement:o}=e,s=r,{mainAxis:l=!0,crossAxis:f=!1,limiter:h={fn:R=>{let{x:z,y:$}=R;return{x:z,y:$}}}}=s,p=$s(s,["mainAxis","crossAxis","limiter"]),g={x:n,y:i},m=await Wf(e,p),y=mi(gi(o)),w=Sy(y),A=g[y],k=g[w];if(l){let R=y==="y"?"top":"left",z=y==="y"?"bottom":"right",$=A+m[R],H=A-m[z];A=Xs($,A,H)}if(f){let R=w==="y"?"top":"left",z=w==="y"?"bottom":"right",$=k+m[R],H=k-m[z];k=Xs($,k,H)}let B=h.fn(Ot(it({},e),{[y]:A,[w]:k}));return Ot(it({},B),{data:{x:B.x-n,y:B.y-i}})}}};function js(r){return(r==null?void 0:r.toString())==="[object Window]"}function Yr(r){if(r==null)return window;if(!js(r)){let e=r.ownerDocument;return e&&e.defaultView||window}return r}function yi(r){return Yr(r).getComputedStyle(r)}function Dr(r){return js(r)?"":r?(r.nodeName||"").toLowerCase():""}function pr(r){return r instanceof Yr(r).HTMLElement}function Wn(r){return r instanceof Yr(r).Element}function Ty(r){return r instanceof Yr(r).Node}function Zs(r){let e=Yr(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function ko(r){let{overflow:e,overflowX:n,overflowY:i}=yi(r);return/auto|scroll|overlay|hidden/.test(e+i+n)}function Dy(r){return["table","td","th"].includes(Dr(r))}function Qf(r){let e=navigator.userAgent.toLowerCase().includes("firefox"),n=yi(r);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)}var Jf=Math.min,bi=Math.max,Co=Math.round;function Pr(r,e){e===void 0&&(e=!1);let n=r.getBoundingClientRect(),i=1,o=1;return e&&pr(r)&&(i=r.offsetWidth>0&&Co(n.width)/r.offsetWidth||1,o=r.offsetHeight>0&&Co(n.height)/r.offsetHeight||1),{width:n.width/i,height:n.height/o,top:n.top/o,right:n.right/i,bottom:n.bottom/o,left:n.left/i,x:n.left/i,y:n.top/o}}function Ur(r){return((Ty(r)?r.ownerDocument:r.document)||window.document).documentElement}function So(r){return js(r)?{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}:{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function eh(r){return Pr(Ur(r)).left+So(r).scrollLeft}function Py(r){let e=Pr(r);return Co(e.width)!==r.offsetWidth||Co(e.height)!==r.offsetHeight}function Ay(r,e,n){let i=pr(e),o=Ur(e),s=Pr(r,i&&Py(e)),l={scrollLeft:0,scrollTop:0},f={x:0,y:0};if(i||!i&&n!=="fixed")if((Dr(e)!=="body"||ko(o))&&(l=So(e)),pr(e)){let h=Pr(e,!0);f.x=h.x+e.clientLeft,f.y=h.y+e.clientTop}else o&&(f.x=eh(o));return{x:s.left+l.scrollLeft-f.x,y:s.top+l.scrollTop-f.y,width:s.width,height:s.height}}function To(r){return Dr(r)==="html"?r:r.assignedSlot||r.parentNode||(Zs(r)?r.host:null)||Ur(r)}function th(r){return!pr(r)||getComputedStyle(r).position==="fixed"?null:r.offsetParent}function Ly(r){let e=To(r);for(Zs(e)&&(e=e.host);pr(e)&&!["html","body"].includes(Dr(e));){if(Qf(e))return e;e=e.parentNode}return null}function Qs(r){let e=Yr(r),n=th(r);for(;n&&Dy(n)&&getComputedStyle(n).position==="static";)n=th(n);return n&&(Dr(n)==="html"||Dr(n)==="body"&&getComputedStyle(n).position==="static"&&!Qf(n))?e:n||Ly(r)||e}function rh(r){if(pr(r))return{width:r.offsetWidth,height:r.offsetHeight};let e=Pr(r);return{width:e.width,height:e.height}}function By(r){let{rect:e,offsetParent:n,strategy:i}=r,o=pr(n),s=Ur(n);if(n===s)return e;let l={scrollLeft:0,scrollTop:0},f={x:0,y:0};if((o||!o&&i!=="fixed")&&((Dr(n)!=="body"||ko(s))&&(l=So(n)),pr(n))){let h=Pr(n,!0);f.x=h.x+n.clientLeft,f.y=h.y+n.clientTop}return Ot(it({},e),{x:e.x-l.scrollLeft+f.x,y:e.y-l.scrollTop+f.y})}function My(r){let e=Yr(r),n=Ur(r),i=e.visualViewport,o=n.clientWidth,s=n.clientHeight,l=0,f=0;return i&&(o=i.width,s=i.height,Math.abs(e.innerWidth/i.scale-i.width)<.01&&(l=i.offsetLeft,f=i.offsetTop)),{width:o,height:s,x:l,y:f}}function Ry(r){var e;let n=Ur(r),i=So(r),o=(e=r.ownerDocument)==null?void 0:e.body,s=bi(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=bi(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),f=-i.scrollLeft+eh(r),h=-i.scrollTop;return yi(o||n).direction==="rtl"&&(f+=bi(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:l,x:f,y:h}}function nh(r){return["html","body","#document"].includes(Dr(r))?r.ownerDocument.body:pr(r)&&ko(r)?r:nh(To(r))}function Do(r,e){var n;e===void 0&&(e=[]);let i=nh(r),o=i===((n=r.ownerDocument)==null?void 0:n.body),s=Yr(i),l=o?[s].concat(s.visualViewport||[],ko(i)?i:[]):i,f=e.concat(l);return o?f:f.concat(Do(To(l)))}function Oy(r,e){let n=e.getRootNode==null?void 0:e.getRootNode();if(r.contains(e))return!0;if(n&&Zs(n)){let i=e;do{if(i&&r===i)return!0;i=i.parentNode||i.host}while(i)}return!1}function Iy(r){let e=Pr(r),n=e.top+r.clientTop,i=e.left+r.clientLeft;return{top:n,left:i,x:i,y:n,right:i+r.clientWidth,bottom:n+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}function ah(r,e){return e==="viewport"?xo(My(r)):Wn(e)?Iy(e):xo(Ry(Ur(r)))}function zy(r){let e=Do(To(r)),i=["absolute","fixed"].includes(yi(r).position)&&pr(r)?Qs(r):r;return Wn(i)?e.filter(o=>Wn(o)&&Oy(o,i)&&Dr(o)!=="body"):[]}function Ny(r){let{element:e,boundary:n,rootBoundary:i}=r,s=[...n==="clippingAncestors"?zy(e):[].concat(n),i],l=s[0],f=s.reduce((h,p)=>{let g=ah(e,p);return h.top=bi(g.top,h.top),h.right=Jf(g.right,h.right),h.bottom=Jf(g.bottom,h.bottom),h.left=bi(g.left,h.left),h},ah(e,l));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}var Fy={getClippingRect:Ny,convertOffsetParentRelativeRectToViewportRelativeRect:By,isElement:Wn,getDimensions:rh,getOffsetParent:Qs,getDocumentElement:Ur,getElementRects:r=>{let{reference:e,floating:n,strategy:i}=r;return{reference:Ay(e,Qs(n),i),floating:Ot(it({},rh(n)),{x:0,y:0})}},getClientRects:r=>Array.from(r.getClientRects()),isRTL:r=>yi(r).direction==="rtl"};function ih(r,e,n,i){i===void 0&&(i={});let{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:l=!0,animationFrame:f=!1}=i,h=!1,p=o&&!f,g=s&&!f,m=l&&!f,y=p||g?[...Wn(r)?Do(r):[],...Do(e)]:[];y.forEach(R=>{p&&R.addEventListener("scroll",n,{passive:!0}),g&&R.addEventListener("resize",n)});let w=null;m&&(w=new ResizeObserver(n),Wn(r)&&w.observe(r),w.observe(e));let A,k=f?Pr(r):null;f&&B();function B(){if(h)return;let R=Pr(r);k&&(R.x!==k.x||R.y!==k.y||R.width!==k.width||R.height!==k.height)&&n(),k=R,A=requestAnimationFrame(B)}return()=>{var R;h=!0,y.forEach(z=>{p&&z.removeEventListener("scroll",n),g&&z.removeEventListener("resize",n)}),(R=w)==null||R.disconnect(),w=null,f&&cancelAnimationFrame(A)}}var oh=(r,e,n)=>gy(r,e,it({platform:Fy},n));var wt=class extends Kt{constructor(){super(...arguments);this.content="",this.placement="top",this.disabled=!1,this.distance=10,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleBlur=this.handleBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.updateComplete.then(()=>{this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut),this.target=this.getTarget()})}async firstUpdated(){this.tooltip.hidden=!this.open,this.open&&(await this.updateComplete,this.updatePositioner())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("blur",this.handleBlur,!0),this.removeEventListener("focus",this.handleFocus,!0),this.removeEventListener("click",this.handleClick),this.removeEventListener("keydown",this.handleKeyDown),this.removeEventListener("mouseover",this.handleMouseOver),this.removeEventListener("mouseout",this.handleMouseOut),this.stopPositioner()}async show(){if(!this.open)return this.open=!0,Gn(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,Gn(this,"sl-after-hide")}getTarget(){let r=[...this.children].find(e=>e.tagName.toLowerCase()!=="style"&&e.getAttribute("slot")!=="content");if(!r)throw new Error("Invalid tooltip target: no child element was found.");return r}handleBlur(){this.hasTrigger("focus")&&this.hide()}handleClick(){this.hasTrigger("click")&&(this.open?this.hide():this.show())}handleFocus(){this.hasTrigger("focus")&&this.show()}handleKeyDown(r){this.open&&r.key==="Escape"&&(r.stopPropagation(),this.hide())}handleMouseOver(){if(this.hasTrigger("hover")){let r=_s(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>void this.show(),r)}}handleMouseOut(){if(this.hasTrigger("hover")){let r=_s(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>void this.hide(),r)}}async handleOpenChange(){if(!this.disabled)if(this.open){ot(this,"sl-show"),await Wr(this.tooltip),this.startPositioner(),this.tooltip.hidden=!1;let{keyframes:r,options:e}=Sr(this,"tooltip.show");await kr(this.tooltip,r,e),ot(this,"sl-after-show")}else{ot(this,"sl-hide"),await Wr(this.tooltip);let{keyframes:r,options:e}=Sr(this,"tooltip.hide");await kr(this.tooltip,r,e),this.tooltip.hidden=!0,this.stopPositioner(),ot(this,"sl-after-hide")}}handleOptionsChange(){this.updatePositioner()}handleDisabledChange(){this.disabled&&this.open&&this.hide()}hasTrigger(r){return this.trigger.split(" ").includes(r)}startPositioner(){this.stopPositioner(),this.updatePositioner(),this.positionerCleanup=ih(this.target,this.positioner,this.updatePositioner.bind(this))}updatePositioner(){!this.open||!this.target||!this.positioner||oh(this.target,this.positioner,{placement:this.placement,middleware:[jf({mainAxis:this.distance,crossAxis:this.skidding}),Xf(),Zf(),Yf({element:this.arrow,padding:10})],strategy:this.hoist?"fixed":"absolute"}).then(({x:r,y:e,middlewareData:n,placement:i})=>{let o=n.arrow.x,s=n.arrow.y,l={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];this.positioner.setAttribute("data-placement",i),Object.assign(this.positioner.style,{position:this.hoist?"fixed":"absolute",left:`${r}px`,top:`${e}px`}),Object.assign(this.arrow.style,{left:typeof o=="number"?`${o}px`:"",top:typeof s=="number"?`${s}px`:"",right:"",bottom:"",[l]:"calc(var(--sl-tooltip-arrow-size) * -1)"})})}stopPositioner(){this.positionerCleanup&&(this.positionerCleanup(),this.positionerCleanup=void 0,this.positioner.removeAttribute("data-placement"))}render(){return Pt`
      <div class="tooltip-target" aria-describedby="tooltip">
        <slot></slot>
      </div>

      <div class="tooltip-positioner">
        <div
          part="base"
          id="tooltip"
          class=${Tr({tooltip:!0,"tooltip--open":this.open})}
          role="tooltip"
          aria-hidden=${this.open?"false":"true"}
        >
          <div class="tooltip__arrow"></div>
          <div class="tooltip__content">
            <slot name="content"> ${this.content} </slot>
          </div>
        </div>
      </div>
    `}};wt.styles=qf;Le([Zt(".tooltip-positioner")],wt.prototype,"positioner",2);Le([Zt(".tooltip")],wt.prototype,"tooltip",2);Le([Zt(".tooltip__arrow")],wt.prototype,"arrow",2);Le([$e()],wt.prototype,"content",2);Le([$e()],wt.prototype,"placement",2);Le([$e({type:Boolean,reflect:!0})],wt.prototype,"disabled",2);Le([$e({type:Number})],wt.prototype,"distance",2);Le([$e({type:Boolean,reflect:!0})],wt.prototype,"open",2);Le([$e({type:Number})],wt.prototype,"skidding",2);Le([$e()],wt.prototype,"trigger",2);Le([$e({type:Boolean})],wt.prototype,"hoist",2);Le([At("open",{waitUntilFirstUpdate:!0})],wt.prototype,"handleOpenChange",1);Le([At("content"),At("distance"),At("hoist"),At("placement"),At("skidding")],wt.prototype,"handleOptionsChange",1);Le([At("disabled")],wt.prototype,"handleDisabledChange",1);wt=Le([vr("sl-tooltip")],wt);Cr("tooltip.show",{keyframes:[{opacity:0,transform:"scale(0.8)"},{opacity:1,transform:"scale(1)"}],options:{duration:150,easing:"ease"}});Cr("tooltip.hide",{keyframes:[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.8)"}],options:{duration:150,easing:"ease"}});qs("boxicons",{resolver:r=>{let e="regular";return r.substring(0,4)==="bxs-"&&(e="solid"),r.substring(0,4)==="bxl-"&&(e="logos"),`assets/boxicons/svg/${e}/${r}.svg`},mutator:r=>r.setAttribute("fill","currentColor")});function sh(r){let e=document.createElement("sl-icon");return e.name=r,e.library="boxicons",e}var uh=Bo(lh());function $y(){let r={tokenize:"forward"},e=new uh.Index(r),n=Array.from(document.getElementsByClassName("slipbox-note"));for(let i of n)e.add(Number(i.id),i.textContent||"");return e}function _y(r,e){let n=document.createElement("sl-input");n.size="small",n.pill=!0,n.placeholder="Search notes",n.clearable=!0,n.addEventListener("sl-input",()=>{try{let o=n.value===""?[]:r.search(n.value);e(o)}catch(o){}});let i=sh("bx-search");return i.slot="prefix",n.appendChild(i),n}function Vy(r){return document.getElementById(String(r))}function Hy(r){var o;let e=(o=r.querySelector("h1"))==null?void 0:o.innerHTML;if(e==null||e==="")return null;let n=document.createElement("a");n.href=`#${r.id}`,n.innerHTML=e;let i=document.createElement("h3");return i.appendChild(n),i}function qy(r){let e=Hy(r);if(e==null)return null;let n=document.createDocumentFragment();n.appendChild(e);let i=r.querySelector("p");return i!=null&&n.appendChild(i.cloneNode(!0)),n}function Ky(r){let e=Vy(r);if(e==null)return null;let n=qy(e);if(n==null)return null;let i=document.createElement("div");return i.classList.add("search-result"),i.appendChild(n),i}function ch(r){let e=document.createElement("div");for(let n of r){let i=Ky(n);i!=null&&e.appendChild(i)}return e}function fh(){let r=ch([]),e=$y(),i=_y(e,s=>{let l=ch(s);r.replaceWith(l),r=l}),o=document.createElement("section");return o.id="search",o.classList.add("level1"),o.title="Search notes",o.append(i,r),[o,()=>i.focus()]}function Gy(r,e){let n=document.createElement("sl-tooltip"),i='<sl-icon library="boxicons" name="bx-link-external"></sl-icon>';return n.innerHTML=`<div slot="content">${r} ${e?i:""}</div>`,n}function Wy(r){let e=r.split("/");if(e.length<2)return null;let n=e[0],i=e.slice(1).join("");return{library:n,name:i}}function Yy(r,e){let n=document.createElement("sl-icon-button");return n.style.fontSize="1.25rem",n.library=r.library,n.name=r.name,e!=null&&(n.href=e),n}function Uy(r,e){return r.append(e),r}customElements.define("sb-nav-item",class extends HTMLElement{constructor(){super();let r=this.attachShadow({mode:"open"}),e=this.getAttribute("title")||"",n=this.getAttribute("external")!=null,i=this.getAttribute("href"),o=Wy(this.getAttribute("icon")||"");if(o==null)throw new Error("sb-nav-item: invalid icon");let s=Uy(Gy(e,n),Yy(o,i));r.append(s)}});var hh=class extends HTMLElement{constructor(){super();let[e,n]=fh();this.append(e),Fn("#search",n)}};customElements.define("sb-search-section",hh);window.addEventListener("DOMContentLoaded",()=>mn(void 0,null,function*(){let r=yield fo("graph/data.json"),e=document.getElementById("title-block-header");e&&e.remove();let n=document.querySelector('sl-icon-button[name="bx-network-chart"]');Vc(n),Kc((0,vh.default)(ki({headless:!0},r)))}));Hc();
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/
/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
//# sourceMappingURL=slipbox.js.map
