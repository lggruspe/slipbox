<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>tmpihfcp3y_</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="basic.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script type="module">
  import cytoscape from 'https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.15.2/cytoscape.esm.min.js';
  import Fuse from 'https://cdn.jsdelivr.net/npm/fuse.js@6.4.0/dist/fuse.esm.js';

  function graphArea () {
    const div = document.createElement('div');
    div.style.width = '100%';
    div.style.height = '500px';
    div.style.position = 'relative';
    div.style.top = '0px';
    div.style.left = '0px';
    return div
  }

  function noteElement (note, currentNote = false) {
    return {
      data: {
        id: note.id,
        title: note.title,
        label: note.id,
        color: currentNote ? 'white' : undefined
      }
    }
  }

  function linkElement (type, source, target) {
    console.assert(['backlink', 'direct', 'sequence'].includes(type));
    const id = type.slice(0, 1) + `${source}-${target}`;
    const style = type === 'backlink' ? 'dashed' : 'solid';
    const color = type === 'sequence' ? 'red' : 'black';
    return {
      data: { id, source, target, arrow: 'triangle', style, color }
    }
  }

  function * neighborElements (query, id) {
    const note = query.note(id);
    yield noteElement(note, true);

    for (const backlink of note.backlinks()) {
      yield noteElement(backlink.src);
      yield linkElement('backlink', backlink.src.id, id);
    }
    for (const link of note.links()) {
      yield noteElement(link.dest);
      yield linkElement('direct', id, link.dest.id);
    }
    for (const parent of note.parents()) {
      yield noteElement(parent.note);
      yield linkElement('sequence', parent.note.id, id);
    }
    for (const child of note.children()) {
      yield noteElement(child.note);
      yield linkElement('sequence', id, child.note.id);
    }
    for (const descendant of query.descendants(String(id))) {
      yield noteElement(descendant.note);
      yield noteElement(query.note(descendant.parentID));
      yield linkElement('sequence', descendant.parentID, descendant.note.id);
    }
  }

  function createCytoscape (container, elements) {
    return cytoscape({
      directed: true,
      multigraph: true,
      container: container,
      elements: elements,
      style: [
        {
          selector: 'node',
          style: {
            label: 'data(label)',
            height: 'label',
            width: 'label',
            padding: '8px',
            'text-halign': 'center',
            'text-valign': 'center'
          }
        },
        {
          selector: 'node[color]',
          style: {
            'background-color': 'black',
            color: 'data(color)',
            label: 'data(label)',
            height: 'label',
            width: 'label',
            padding: '8px',
            'text-halign': 'center',
            'text-valign': 'center'
          }
        },
        {
          selector: 'edge',
          style: {
            width: 2,
            'curve-style': 'bezier',
            'line-color': 'data(color)',
            'line-style': 'data(style)'
          }
        },
        {
          selector: 'edge[arrow]',
          style: {
            'target-arrow-color': 'data(color)',
            'target-arrow-shape': 'data(arrow)'
          }
        }
      ]
    })
  }

  function noteInfoDiv () {
    const div = document.createElement('div');
    div.style.bottom = 0;
    div.style.right = 0;
    div.style.padding = '20px';
    div.style.position = 'fixed';
    div.style.zIndex = 1;
    return div
  }

  function hoverHandlers (container) {
    const h3 = document.createElement('h3');
    const infoDiv = noteInfoDiv();
    infoDiv.appendChild(h3);
    container.appendChild(infoDiv);

    const show = event => {
      h3.textContent = event.target.data().title;
    };
    const hide = event => {
      h3.textContent = '';
    };
    return [show, hide]
  }

  function init (query) {
    let container = graphArea();
    let infoContainer = document.createElement('div');

    function resetGraph () {
      container.remove();
      infoContainer.remove();

      const id = Number(window.location.hash.slice(1));
      if (!Number.isInteger(id)) return

      const elements = Array.from(neighborElements(query, id));
      if (elements.length < 2) return

      container = graphArea();
      infoContainer = document.createElement('div');
      document.body.appendChild(infoContainer);
      document.body.appendChild(container);

      const cy = createCytoscape(container, elements);
      cy.layout({ name: 'cose' }).run();
      cy.reset();
      cy.center();

      const [show, hide] = hoverHandlers(infoContainer);
      cy.on('select', 'node', show);
      cy.on('unselect', 'node', hide);
    }

    resetGraph();
    window.addEventListener('hashchange', resetGraph);
  }

  function characterClass (character) {
    const code = character.charCodeAt();
    return code >= 47 && code < 58 ? 'd'
      : code >= 97 && code < 123 ? 'a' : null
  }

  function isValidAlias (alias) {
    if (alias === null) return true
    if (typeof alias !== 'string') return false
    if (!alias) return false
    if (characterClass(alias.slice(0, 1)) !== 'd') return false
    for (const c of alias) {
      const charClass = characterClass(c);
      if (charClass !== 'd' && charClass !== 'a') {
        return false
      }
    }
    return true
  }

  function isNumber (string) {
    if (!string) return false
    for (const c of string) {
      if (characterClass(c) !== 'd') return false
    }
    return true
  }

  function aliasParent (alias) {
    if (!isValidAlias(alias)) return null
    if (alias === null) return null

    const last = characterClass(alias.slice(-1));
    const pattern = last === 'd' ? /^(.*?)[0-9]+$/ : /^(.*?)[a-z]+$/;
    return alias.replace(pattern, '$1') || null
  }

  function isSequence (prev, next) {
    return aliasParent(next) === prev
  }

  class Database {
    // Schema
    // {
    //   aliases: {
    //     <alias:str>: { id: <int>, children: [<str>], parent: <str> }
    //   },
    //   notes: [
    //     {
    //       title: <str>,
    //       aliases: [<str>],
    //       links: [{ src: <int>, dest: <int>, annotation: <str> }],
    //       backlinks: [<link>]
    //     }
    //   ]
    // }

    constructor () {
      this.data = { aliases: {}, notes: [] };
    }

    add (record) {
      return record.addTo(this) || record
    }
  }

  class IntegrityError extends Error {}
  class DomainError extends IntegrityError {}
  class ReferenceError extends IntegrityError {}

  function check (condition, message) {
    if (!condition) throw new DomainError(message)
  }

  class Note {
    constructor (id, title) {
      check(Number.isInteger(id), 'invalid Note.id');
      check(typeof title === 'string', 'invalid Note.title');
      check(title, 'empty Note.title');

      this.id = id;
      this.title = title;
    }

    addTo (db) {
      // Overwrite existing entry in notes.
      db.data.notes[this.id] = {
        title: this.title,
        aliases: [],
        links: [],
        backlinks: []
      };
    }

    equals (note) {
      return this.id === note.id && this.title === note.title
    }
  }

  class Alias {
    constructor (id, alias) {
      check(Number.isInteger(id), 'non-integer Alias.id');
      check(typeof alias === 'string', 'non-string Alias.alias');
      check(isValidAlias(alias), 'malformed Alias.alias');
      check(alias, 'empty alias');
      if (isNumber(alias)) {
        check(String(id) === alias, 'invalid Alias.alias');
      }

      this.id = id;
      this.alias = alias;
    }

    addTo (db) {
      // Overwrite existing entry in aliases.
      // Note with ID must exist.
      const note = db.data.notes[this.id];
      if (!note) return new ReferenceError('Alias.id')

      db.data.aliases[this.alias] = {
        id: this.id,
        children: [],
        parent: null
      };
      note.aliases.push(this.alias);
    }
  }

  class Sequence {
    constructor (prev, next) {
      check(isValidAlias(prev), 'malformed Sequence.prev');
      check(isValidAlias(next), 'malformed Sequence.next');
      check(isSequence(prev, next),
        'Sequence.prev and Sequence.next not in sequence');
      check(prev != null, 'null Sequence.prev');
      check(next != null, 'null Sequence.next');

      this.prev = prev;
      this.next = next;
    }

    addTo (db) {
      let prev = db.data.aliases[this.prev];
      const next = db.data.aliases[this.next];

      if (!next) return
      if (!prev) {
        try {
          if (!db.add(new Alias(Number(this.prev), this.prev))) {
            return null
          }
          prev = db.data.aliases[this.prev];
        } catch (e) {
          return null
        }
      }

      const prevNote = db.data.notes[prev.id];
      const nextNote = db.data.notes[next.id];
      if (!prevNote || !nextNote) return

      next.parent = this.prev;
      prev.children.push(this.next);
    }
  }

  class Link {
    constructor (src, dest, annotation) {
      check(src instanceof Note, 'invalid src Note');
      check(dest instanceof Note, 'invalid dest Note');
      check(typeof annotation === 'string', 'non-string Link.annotation');

      this.src = src;
      this.dest = dest;
      this.annotation = annotation;
    }

    addTo (db) {
      const src = db.data.notes[this.src.id];
      const dest = db.data.notes[this.dest.id];
      if (!src) return new ReferenceError('Link.src')
      if (!dest) return new ReferenceError('Link.dest')

      // Existing entries get overwritten.
      const link = {
        src: this.src,
        dest: this.dest,
        annotation: this.annotation
      };
      src.links.push(link);
      if (link.annotation) {
        dest.backlinks.push(link);
      }
    }
  }

  class Query {
    constructor (db) {
      this.db = db;
    }

    note (id) {
      const record = this.db.data.notes[id];
      if (!record) return null

      const note = new Note(id, record.title);

      note.links = () => this.links(note);
      note.backlinks = () => this.backlinks(note);

      note.aliases = function * () {
        yield * record.aliases;
      };

      const self = this;
      note.parents = function * () {
        for (const alias of record.aliases) {
          const parent = self.parent(alias);
          if (parent) {
            yield parent;
          }
        }
      };

      note.children = function * () {
        for (const alias of record.aliases) {
          yield * self.children(alias);
        }
      };
      return note
    }

    * links (note) {
      const src = this.db.data.notes[note.id];
      if (src && src.links) {
        yield * src.links;
      }
    }

    * backlinks (note) {
      const dest = this.db.data.notes[note.id];
      if (dest && dest.backlinks) {
        yield * dest.backlinks;
      }
    }

    parent (alias) {
      const record = this.db.data.aliases[alias];
      if (!record || !record.parent) return null
      const parentRecord = this.db.data.aliases[record.parent];
      // TODO what if parentRecord.id === 0?
      if (!parentRecord || !parentRecord.id) return null
      return {
        note: this.note(parentRecord.id),
        alias: record.parent
      }
    }

    * children (alias) {
      const record = this.db.data.aliases[alias];
      if (record) {
        const children = record.children || [];
        for (const childAlias of children) {
          const childRecord = this.db.data.aliases[childAlias];
          if (!childRecord) continue
          const childID = childRecord.id;
          const child = this.note(childID);
          if (child) {
            yield {
              note: child,
              alias: childAlias,
              parentID: record.id,
              parentAlias: alias
            };
          }
        }
      }
    }

    * descendants (alias) {
      const record = this.db.data.aliases[alias];
      if (record) {
        for (const child of this.children(alias)) {
          yield child;
          yield * this.descendants(child.alias);
        }
      }
    }
  }

  var Model = /*#__PURE__*/Object.freeze({
    __proto__: null,
    Alias: Alias,
    aliasParent: aliasParent,
    Database: Database,
    DomainError: DomainError,
    isNumber: isNumber,
    isSequence: isSequence,
    Link: Link,
    Note: Note,
    Query: Query,
    ReferenceError: ReferenceError,
    Sequence: Sequence
  });

  function createFuse () {
    const options = {
      includeMatches: true,
      ignoreLocation: true,
      keys: ['textContent'],
      threshold: 0.45
    };
    const nodes = document.body.querySelectorAll('section.level1');
    const sections = Array.prototype.filter.call(nodes, function (node) {
      return Number.isInteger(Number(node.id))
    });
    return new Fuse(sections, options)
  }

  function getSearchResults (fuse) {
    const div = document.querySelector('input.search-bar');
    return fuse.search(div.value)
  }

  function displayResults (results) {
    const div = document.querySelector('div.search-results');
    div.textContent = '';
    for (const result of results) {
      const p = document.createElement('p');
      const h3 = document.createElement('h3');
      h3.innerHTML = `<a href="#${result.item.id}">${result.item.title}</a>`;
      p.appendChild(h3);

      let count = 3;
      for (const child of result.item.children) {
        const clone = child.cloneNode(true);
        if (count-- <= 0) break
        if (clone.tagName === 'H1' && clone.title === result.item.title) {
          continue
        }
        p.appendChild(clone);
      }

      div.appendChild(p);
      div.appendChild(document.createElement('hr'));
    }
  }

  function searchNotes (fuse) {
    const results = getSearchResults(fuse);
    displayResults(results);
  }

  function searchBar () {
    const form = document.createElement('form');
    form.action = 'javascript:void(0)';
    form.style.textAlign = 'center';

    const fuse = createFuse();

    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = 'Search notes...';
    input.classList.add('search-bar');
    input.style.width = '80%';
    input.addEventListener('change', () => searchNotes(fuse));

    form.appendChild(input);
    return form
  }

  function searchResults () {
    const div = document.createElement('div');
    div.classList.add('search-results');
    return div
  }

  function searchPage () {
    const page = document.createElement('section');
    page.id = 'search';
    page.title = 'Search';
    page.classList.add('level1');
    page.appendChild(searchBar());
    page.appendChild(document.createElement('br'));
    page.appendChild(searchResults());
    return page
  }

  function searchButton () {
    const a = document.createElement('a');
    a.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M23.809 21.646l-6.205-6.205c1.167-1.605 1.857-3.579 1.857-5.711 0-5.365-4.365-9.73-9.731-9.73-5.365 0-9.73 4.365-9.73 9.73 0 5.366 4.365 9.73 9.73 9.73 2.034 0 3.923-.627 5.487-1.698l6.238 6.238 2.354-2.354zm-20.955-11.916c0-3.792 3.085-6.877 6.877-6.877s6.877 3.085 6.877 6.877-3.085 6.877-6.877 6.877c-3.793 0-6.877-3.085-6.877-6.877z"/></svg>';
    a.href = '#search';
    a.title = 'Search notes';
    return a
  }

  function init$1 () {
    document.body.appendChild(searchPage());
    document.body.insertBefore(searchButton(), document.body.firstChild);
  }

  function hideSections () {
    const sections = document.getElementsByTagName('section');
    for (let i = 0; i < sections.length; i++) {
      const section = sections[i];
      if (section.classList.contains('level1')) {
        switch (true) {
          case Number.isInteger(Number(section.id)):
          case section.id.charAt(0) === '#':
          case section.id === 'references':
          case section.id.slice(0, 4) === 'ref-':
          case section.id === 'search':
          case section.id === 'tags':
            section.style.display = 'none';
            break
        }
      }
    }
  }

  function getSectionFromHash (hash) {
    const id = hash.substring(1);
    if (!id) { return null }
    const elem = document.getElementById(id);
    if (elem) {
      return elem.closest('section.level1')
    }
  }

  function sectionChanger () {
    let _previousHash = window.location.hash;
    return function () {
      const oldSection = getSectionFromHash(_previousHash);
      if (oldSection) {
        oldSection.style.display = 'none';
      }
      _previousHash = window.location.hash;
      const newSection = getSectionFromHash(_previousHash);
      if (newSection) {
        newSection.style.display = '';
        document.title = newSection.title || 'Slipbox';
      } else {
        window.location.hash = '#0';
      }
      window.scrollTo(0, 0);
    }
  }

  function notFoundSection () {
    const section = document.createElement('section');
    section.id = '0';
    section.classList.add('level1');
    const h1 = document.createElement('h1');
    h1.innerText = 'Note not found';
    section.appendChild(h1);
    return section
  }

  function init$2 () {
    document.body.appendChild(notFoundSection());
    hideSections();

    const changeSection = sectionChanger();
    changeSection();
    window.addEventListener('hashchange', changeSection);
  }

  function A (innerText, href, title) {
    const a = document.createElement('a');
    a.innerText = innerText;
    a.href = href;
    if (title != null) {
      a.title = title;
    }
    return a
  }

  function Li (children) {
    const li = document.createElement('li');
    for (const child of children) {
      li.appendChild(child);
    }
    return li
  }

  function aliasOwner (alias) {
    const found = alias.match(/^\d+/);
    return found ? found[0] : ''
  }

  function * backlinkLIs (query, id) {
    const note = query.note(id);
    if (note) {
      for (const backlink of note.backlinks()) {
        yield {
          note: backlink.src,
          li: Li([
            document.createTextNode(`[${backlink.src.id}] `),
            A(backlink.src.title, `#${backlink.src.id}`, backlink.annotation)
          ])
        };
      }
    }
  }

  function * directLinkLIs (query, id) {
    const note = query.note(id);
    if (note) {
      for (const link of note.links()) {
        const b = document.createElement('b');
        b.textContent = `[${link.dest.id}] `;
        yield {
          note: link.dest,
          li: Li([b, A(link.dest.title, '#' + link.dest.id, link.annotation)])
        };
      }
    }
  }

  function * parentLIs (query, id) {
    const note = query.note(id);
    if (note) {
      for (const parent of note.parents()) {
        yield {
          note: parent.note,
          li: Li([
            document.createTextNode(`[${parent.note.id}/${parent.alias}] `),
            A(parent.note.title, '#' + parent.note.id)
          ])
        };
      }
    }
  }

  function * childrenLIs (query, id) {
    const note = query.note(id);
    if (note) {
      for (const child of note.children()) {
        yield {
          note: child.note,
          li: Li([
            document.createTextNode(`[${child.note.id}/${child.alias}] `),
            A(child.note.title, '#' + child.note.id)
          ])
        };
      }
    }
  }

  function * descendantLIs (query, id) {
    const note = query.note(id);
    if (note) {
      for (const descendant of query.descendants(String(id))) {
        if (descendant.parentID === id) continue
        yield {
          note: descendant.note,
          li: Li([
            document.createTextNode(`[${descendant.note.id}/${descendant.alias}] `),
            A(descendant.note.title, '#' + descendant.note.id)
          ])
        };
      }
    }
  }

  function createRelatedUl (query, id) {
    const related = [
      ...backlinkLIs(query, id),
      ...directLinkLIs(query, id),
      ...parentLIs(query, id),
      ...childrenLIs(query, id),
      ...descendantLIs(query, id)
    ];
    related.sort((a, b) => {
      if (a.note.id < b.note.id) return -1
      if (a.note.id > b.note.id) return 1
      const atext = a.li.innerText;
      const btext = b.li.innerText;
      return atext < btext ? -1 : atext === btext ? 0 : 1
    });

    const ul = document.createElement('ul');
    for (const note of related) {
      ul.appendChild(note.li);
    }
    return ul
  }

  function createSeeAlsoDiv (query, id) {
    const div = document.createElement('div');
    div.id = 'slipbox-see-also';
    const ul = createRelatedUl(query, id);
    if (ul.children.length > 0) {
      const h3 = document.createElement('h3');
      h3.innerText = 'See also';
      div.appendChild(h3);
      div.appendChild(ul);
    }
    return div
  }

  function createAliasesP (query, id) {
    const p = document.createElement('p');
    p.id = 'slipbox-aliases';

    const note = query.note(id);
    if (!note) return p

    const aliases = Array.from(note.aliases()).map(alias => {
      const span = document.createElement('span');
      span.appendChild(document.createTextNode(' ['));
      span.appendChild(A(alias, '#' + aliasOwner(alias)));
      span.appendChild(document.createTextNode(']'));
      return span
    });
    if (aliases.length > 0) {
      const text = document.createElement('strong');
      text.innerText = 'Aliases:';
      p.appendChild(text);
      aliases.forEach(alias => p.appendChild(alias));
    }
    return p
  }

  function setAliasesP (query, id) {
    const p = document.getElementById('slipbox-aliases');
    if (p) {
      p.remove();
    }
    document.body.appendChild(createAliasesP(query, id));
  }

  function setSeeAlsoDiv (query, id) {
    const div = document.getElementById('slipbox-see-also');
    if (div) {
      div.remove();
    }
    document.body.appendChild(createSeeAlsoDiv(query, id));
  }

  function seeAlso (query, hash) {
    const section = getSectionFromHash(hash); // closest level1 ancestor
    const id = section ? Number(section.id) : 0;
    setAliasesP(query, id);
    setSeeAlsoDiv(query, id);
  }

  function init$3 (query) {
    const handler = () => seeAlso(query, window.location.hash);
    window.addEventListener('hashchange', handler);
    handler();
  }

  window.query = new Query(new Database());

  window.Model = Model;

  window.initSlipbox = function () {
    init$1();
    init$3(window.query);
    init$2();
    init(window.query);
  };
  </script>
  <script type="text/javascript">
  window.addEventListener('DOMContentLoaded', () => {
  window.query.db.add(new Model.Note(0, 'slipbox'))
  window.query.db.add(new Model.Note(1, 'Installation'))
  window.query.db.add(new Model.Note(2, 'Basic usage'))
  window.query.db.add(new Model.Note(3, 'How to organize notes'))
  window.query.db.add(new Model.Note(4, 'How to find related notes'))
  window.query.db.add(new Model.Note(5, 'Tags'))
  window.query.db.add(new Model.Note(6, 'Direct links'))
  window.query.db.add(new Model.Note(7, 'Sequence links'))
  window.query.db.add(new Model.Note(8, 'Text search'))
  window.query.db.add(new Model.Note(9, 'Citations'))
  window.query.db.add(new Model.Note(10, 'Questions'))
  window.query.db.add(new Model.Link(
    window.query.note(3), window.query.note(7), ''))
  window.query.db.add(new Model.Link(
    window.query.note(4), window.query.note(6), 'Annotated links generates backlinks'))
  window.query.db.add(new Model.Link(
    window.query.note(6), window.query.note(4), ''))
  window.query.db.add(new Model.Link(
    window.query.note(6), window.query.note(3), ''))
  window.query.db.add(new Model.Link(
    window.query.note(7), window.query.note(6), ''))
  window.query.db.add(new Model.Link(
    window.query.note(8), window.query.note(5), ''))
  window.query.db.add(new Model.Link(
    window.query.note(8), window.query.note(6), ''))
  window.query.db.add(new Model.Link(
    window.query.note(0), window.query.note(3), ''))
  window.query.db.add(new Model.Link(
    window.query.note(0), window.query.note(4), ''))
  window.query.db.add(new Model.Link(
    window.query.note(10), window.query.note(6), ''))
  window.query.db.add(new Model.Link(
    window.query.note(10), window.query.note(7), ''))
  window.query.db.add(new Model.Alias(0, '0'))
  window.query.db.add(new Model.Alias(1, '0a'))
  window.query.db.add(new Model.Alias(1, '1'))
  window.query.db.add(new Model.Alias(2, '0a1'))
  window.query.db.add(new Model.Alias(2, '1a'))
  window.query.db.add(new Model.Alias(2, '2'))
  window.query.db.add(new Model.Alias(3, '2a'))
  window.query.db.add(new Model.Alias(3, '3'))
  window.query.db.add(new Model.Alias(4, '3a'))
  window.query.db.add(new Model.Alias(4, '4'))
  window.query.db.add(new Model.Alias(5, '4a'))
  window.query.db.add(new Model.Alias(6, '4b'))
  window.query.db.add(new Model.Alias(6, '6'))
  window.query.db.add(new Model.Alias(7, '4c'))
  window.query.db.add(new Model.Alias(7, '6a'))
  window.query.db.add(new Model.Alias(8, '4d'))
  window.query.db.add(new Model.Alias(9, '4a1'))
  window.query.db.add(new Model.Alias(10, '0b'))
  window.query.db.add(new Model.Alias(10, '6b'))
  window.query.db.add(new Model.Sequence('0', '0a'))
  window.query.db.add(new Model.Sequence('0', '0b'))
  window.query.db.add(new Model.Sequence('0a', '0a1'))
  window.query.db.add(new Model.Sequence('1', '1a'))
  window.query.db.add(new Model.Sequence('2', '2a'))
  window.query.db.add(new Model.Sequence('3', '3a'))
  window.query.db.add(new Model.Sequence('4', '4a'))
  window.query.db.add(new Model.Sequence('4', '4b'))
  window.query.db.add(new Model.Sequence('4', '4c'))
  window.query.db.add(new Model.Sequence('4', '4d'))
  window.query.db.add(new Model.Sequence('4a', '4a1'))
  window.query.db.add(new Model.Sequence('6', '6a'))
  window.query.db.add(new Model.Sequence('6', '6b'))
  window.initSlipbox()
  })
  </script>
</head>
<body>
<section id="0" class="level1" title="slipbox">
<h1 title="slipbox">0 slipbox</h1>
<p><code>slipbox</code> is a static site generator for Zettelkasten notes.</p>
<ul>
<li><a href="#1" title="0a">Installation</a> [0a]</li>
<li><a href="#2" title="0a1">Basic usage</a> [0a1]</li>
<li><a href="#3">Organizing notes</a> [3]</li>
<li><a href="#4">Connecting notes</a> [4]</li>
<li><a href="#10" title="0b">Questions</a> [0b]</li>
</ul>
<p>GitHub: <a href="https://github.com/lggruspe/slipbox" class="uri">https://github.com/lggruspe/slipbox</a></p>
</section>
<section id="1" class="level1" title="Installation">
<h1 title="Installation">1 Installation</h1>
<p>Make sure you have <code>grep</code>, <code>pandoc</code> and <code>python</code> installed.</p>
<p>Then</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="ex">pip</span> install slipbox</span></code></pre></div>
<p>Next step: <a href="#2" title="1a">run slipbox</a> [1a]</p>
</section>
<section id="2" class="level1" title="Basic usage">
<h1 title="Basic usage">2 Basic usage</h1>
<p><a href="##examples">#examples</a></p>
<p><code>slipbox</code> recursively looks for notes in the locations that you specify when you run <code>slipbox</code>.</p>
<p>Here’s a minimal example.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="fu"># 202001011200 Hello</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>Hello.</span></code></pre></div>
<p>To run slipbox:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="co"># Put your notes here.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="fu">mkdir</span> notes</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="co"># Replace $EDITOR with your text editor and copy the example.</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a><span class="va">$EDITOR</span> <span class="ex">notes/hello.md</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a><span class="co"># Take note of the quotes and spaces.</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="ex">python</span> -m slipbox notes slipbox.db -d <span class="st">&#39; -o example.html&#39;</span></span></code></pre></div>
<p>This creates an SQLite file and an HTML file containing <a href="#3" title="2a">all your notes</a> [2a]. Don’t delete the database file, because <code>slipbox</code> will use it to avoid recompiling all notes from scratch in future invocations.</p>
</section>
<section id="3" class="level1" title="How to organize notes">
<h1 title="How to organize notes">3 How to organize notes</h1>
<p><a href="##examples">#examples</a></p>
<p>You can put multiple notes in a single file, because a note is just a section in a markdown file.</p>
<p>Notes in one file are separated by level 1 headings. The heading must contain a note ID and a title for <code>slipbox</code> to find the note. The ID can be any number, but it has to be unique.</p>
<p>Example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>202003151630 The note ID must be unique</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="fu">=======================================</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>Everything between this note&#39;s heading and the next belongs to this</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>note.</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>202006151725 Next note</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a><span class="fu">======================</span></span></code></pre></div>
<p>I recommend shorter IDs instead of longer ones if you want to use <a href="#7">sequence links</a> [7]. It’s important to <a href="#4" title="3a">make connections</a> [3a] between ideas in your notes.</p>
</section>
<section id="4" class="level1" title="How to find related notes">
<h1 title="How to find related notes">4 How to find related notes</h1>
<p><code>slipbox</code> provides multiple ways to connect notes.</p>
<ul>
<li><a href="#5" title="4a">Tags</a> [4a]</li>
<li><a href="#6" title="4b">Direct links</a> [4b]</li>
<li><a href="#6" title="Annotated links generates backlinks">Backlinks</a> [6]</li>
<li><a href="#7" title="4c">Sequence links</a> [4c]</li>
<li><a href="#8" title="4d">Text search</a> [4d]</li>
<li><a href="#9" title="4a1">Citations</a> [4a1]</li>
</ul>
</section>
<section id="5" class="level1" title="Tags">
<h1 title="Tags">5 Tags</h1>
<p>Notes can be related by tags. You can click on a <a href="##tag">#tag</a> to see a list of other notes that share the tag.</p>
<p>Clicking on the header in the <a href="##tag">#tag</a> page will show a list of all #<a href="#tags">tags</a>.</p>
</section>
<section id="6" class="level1" title="Direct links">
<h1 title="Direct links">6 Direct links</h1>
<p><a href="##examples">#examples</a> <a href="##links">#links</a> <a href="##visualization">#visualization</a></p>
<p>Direct links are an explicit way to <a href="#4">connect</a> [4] two notes. To link to a note, you only have to specify the <a href="#3">ID of the note</a> [3] as the link target. In markdown, <code class="sourceCode markdown"><span class="co">[</span><span class="ot">link to note 3</span><span class="co">](#3)</span></code>. This works even when the linked note is in another file.</p>
<p>Direct links from the active note appear in the See also section with a boldfaced ID. The interactive graph displays these links with solid black lines.</p>
<section id="backlinks" class="level3">
<h3>Backlinks</h3>
<p><code>slipbox</code> generates backlinks from annotated links.</p>
<ul>
<li>Backlink IDs in the See also section have regular font.</li>
<li>Hovering over the backlink will show the link annotation.</li>
<li>Backlinks in the interactive graph appear as dashed lines.</li>
</ul>
<p><a href="#7" title="6a">Sequence links</a> [6a] also use link annotations, but in a different way.</p>
</section>
<section id="external-links" class="level3">
<h3>External links</h3>
<p>It’s also possible to <a href="#10" title="6b">link to files</a> [6b] outside of the slipbox.</p>
</section>
</section>
<section id="7" class="level1" title="Sequence links">
<h1 title="Sequence links">7 Sequence links</h1>
<p><a href="##examples">#examples</a> <a href="##links">#links</a> <a href="##visualization">#visualization</a></p>
<p>A sequence link is a special type of <a href="#6">link</a> [6] that indicates that a set of notes are to be read in sequence.</p>
<section id="note-aliases" class="level3">
<h3>Note aliases</h3>
<p>You can determine which sequences a particular note belongs to by simply looking at its note aliases. A note alias is a string that alternates between numbers and letters.</p>
<p>For example, suppose 4a2b is a note alias of note 12. The note alias says that note 12 belongs in a sequence containing notes 4, 4a, 4a2, etc., in that order.</p>
<p>We can think of notes 4a and 4a2b as neighbors of note 4a2.</p>
<ul>
<li>Links to neighbor notes in the See also section show the note ID and the alias.</li>
<li>Neighbor links in the interactive graph are solid red.</li>
</ul>
</section>
<section id="how-to-create-sequence-links" class="level3">
<h3>How to create sequence links</h3>
<p>Sequence links are created using regular links, but the link has to have a note alias in the description.</p>
<p>Example: <code class="sourceCode markdown"><span class="co">[</span><span class="ot">sequence link</span><span class="co">](#12 &#39;#4a2b&#39;)</span></code>` assigns 4a2b as an alias to note 12.</p>
</section>
</section>
<section id="8" class="level1" title="Text search">
<h1 title="Text search">8 Text search</h1>
<p>Even without <a href="#5">tags</a> [5] or <a href="#6">links</a> [6], you can look for notes using text search. You can open the #<a href="#search">search</a> page by clicking on the search button at the top.</p>
</section>
<section id="9" class="level1" title="Citations">
<h1 title="Citations">9 Citations</h1>
<p><a href="##examples">#examples</a> <a href="##links">#links</a></p>
<p><code>slipbox</code> uses <code>pandoc-citeproc</code> for citations. You can click on a citation to see a list of all notes that cite the same reference.</p>
<p>Clicking on the header of the reference page will open a list of all cited references.</p>
<p>Here’s how a citation looks: <span class="citation" data-cites="cite2020">(Author <a href="#ref-cite2020" role="doc-biblioref">2020</a>)</span>.</p>
<p>In order to activate <code>citeproc</code>, you have to specify a bibliography file to <code>pandoc</code> using the <code>-c</code> option. Take note of the quotes and spaces in the options.</p>
<p>Example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="ex">python</span> -m slipbox notes.db notes -c <span class="st">&#39; --bibliography notes.bib&#39;</span> -d <span class="st">&#39; -o notes.html&#39;</span></span></code></pre></div>
</section>
<section id="10" class="level1" title="Questions">
<h1 title="Questions">10 Questions</h1>
<section id="support-for-formats-other-than-markdown" class="level3">
<h3>Support for formats other than markdown</h3>
<p><code>slipbox</code> should have partial support for most input formats that <code>pandoc</code> supports. However, certain features such as <a href="#6">backlinks</a> [6] and <a href="#7">sequence links</a> [7] require link annotations.</p>
</section>
<section id="how-to-link-to-external-files" class="level3">
<h3>How to link to external files</h3>
<p>Links must be relative to the output HTML.</p>
<p>Suppose you have the following directory structure.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="ex">notes/input.md</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="ex">output.html</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a><span class="ex">images/image.png</span></span></code></pre></div>
<p>To link to the image from <code>input.md</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="co">&lt;!--input.md--&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="al">![](images/image.png)</span></span></code></pre></div>
</section>
</section>

<section id='#examples' title='#examples' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #examples
    </a>
  </h1>
  <ul>
    <li>
      [2] 
      <a href='#2'>
        Basic usage
      </a>
    </li>
    <li>
      [3] 
      <a href='#3'>
        How to organize notes
      </a>
    </li>
    <li>
      [6] 
      <a href='#6'>
        Direct links
      </a>
    </li>
    <li>
      [7] 
      <a href='#7'>
        Sequence links
      </a>
    </li>
    <li>
      [9] 
      <a href='#9'>
        Citations
      </a>
    </li>
  </ul>
</section>
<section id='#links' title='#links' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #links
    </a>
  </h1>
  <ul>
    <li>
      [6] 
      <a href='#6'>
        Direct links
      </a>
    </li>
    <li>
      [7] 
      <a href='#7'>
        Sequence links
      </a>
    </li>
    <li>
      [9] 
      <a href='#9'>
        Citations
      </a>
    </li>
  </ul>
</section>
<section id='#tag' title='#tag' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #tag
    </a>
  </h1>
  <ul>
    <li>
      [5] 
      <a href='#5'>
        Tags
      </a>
    </li>
  </ul>
</section>
<section id='#visualization' title='#visualization' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #visualization
    </a>
  </h1>
  <ul>
    <li>
      [6] 
      <a href='#6'>
        Direct links
      </a>
    </li>
    <li>
      [7] 
      <a href='#7'>
        Sequence links
      </a>
    </li>
  </ul>
</section>
<section id='tags' title='Tags' class='level1'>
  <h1>
    Tags
  </h1>
  <ul>
    <li>
      <a href='##examples'>
        #examples
      </a>
    </li>
    <li>
      <a href='##links'>
        #links
      </a>
    </li>
    <li>
      <a href='##tag'>
        #tag
      </a>
    </li>
    <li>
      <a href='##visualization'>
        #visualization
      </a>
    </li>
  </ul>
</section>
<section id='ref-cite2020' title='ref-cite2020' class='level1'>
  <h1>
    <a href='#references'>
      @cite2020
    </a>
  </h1>
  <p>
    Author. 2020. Title.
  </p>
  <ul>
    <li>
      [9] 
      <a href='#9'>
        Citations
      </a>
    </li>
  </ul>
</section>
<section id='references' title='References' class='level1'>
  <h1>
    References
  </h1>
  <dl>
    <dt>
      <a href='#ref-cite2020'>
        [@cite2020]
      </a>
    </dt>
    <dd>
      Author. 2020. Title.
    </dd>
  </dl>
</section>
<p><span class="math inline"> </span></p>
<div class="sourceCode" id="cb1" style="display:none"><pre class="sourceCode c"><code class="sourceCode c"></code></pre></div>
</body>
</html>
