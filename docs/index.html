<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>tmpzhyd7ji4</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="basic.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script type="module">
  import cytoscape from 'https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.15.2/cytoscape.esm.min.js'
  import Fuse from 'https://cdn.jsdelivr.net/npm/fuse.js@6.4.0/dist/fuse.esm.js'
  const slipbox = {
    aliases: {},
    notes: {}
  }
  slipbox.notes[0] = { title: 'Note 0 is the entry point', aliases: [], links: [], backlinks: [] }
  slipbox.notes[1] = { title: 'Every note has an ID and a title', aliases: [], links: [], backlinks: [] }
  slipbox.notes[2] = { title: 'A file can contain multiple notes', aliases: [], links: [], backlinks: [] }
  slipbox.notes[3] = { title: 'You can use hashtags anywhere in the note', aliases: [], links: [], backlinks: [] }
  slipbox.notes[4] = { title: 'Types of links', aliases: [], links: [], backlinks: [] }
  slipbox.notes[5] = { title: 'Backlinks are generated from annotated direct links', aliases: [], links: [], backlinks: [] }
  slipbox.notes[6] = { title: 'Notes in a sequence have aliases', aliases: [], links: [], backlinks: [] }
  slipbox.notes[7] = { title: 'Specify a bibliography file to use citations', aliases: [], links: [], backlinks: [] }
  slipbox.notes[8] = { title: 'See also section: backlinks and sequence links', aliases: [], links: [], backlinks: [] }
  slipbox.notes[9] = { title: 'How to derive note aliases', aliases: [], links: [], backlinks: [] }
  slipbox.notes[10] = { title: 'How to create a sequence link', aliases: [], links: [], backlinks: [] }
  slipbox.notes[11] = { title: 'Visualize notes using Cytoscape', aliases: [], links: [], backlinks: [] }
  slipbox.notes[12] = { title: 'How to link to images', aliases: [], links: [], backlinks: [] }
  slipbox.notes[13] = { title: 'Text search', aliases: [], links: [], backlinks: [] }
  slipbox.notes[1].aliases.push('0a')
  slipbox.aliases['0a'] = { id: 1, children: [] }
  slipbox.notes[2].aliases.push('0b')
  slipbox.aliases['0b'] = { id: 2, children: [] }
  slipbox.notes[3].aliases.push('0c')
  slipbox.aliases['0c'] = { id: 3, children: [] }
  slipbox.notes[4].aliases.push('0a1')
  slipbox.aliases['0a1'] = { id: 4, children: [] }
  slipbox.notes[5].aliases.push('0a1a')
  slipbox.aliases['0a1a'] = { id: 5, children: [] }
  slipbox.notes[6].aliases.push('0a1b')
  slipbox.aliases['0a1b'] = { id: 6, children: [] }
  slipbox.notes[7].aliases.push('0d')
  slipbox.aliases['0d'] = { id: 7, children: [] }
  slipbox.notes[8].aliases.push('0a2')
  slipbox.aliases['0a2'] = { id: 8, children: [] }
  slipbox.notes[9].aliases.push('0a1b1')
  slipbox.aliases['0a1b1'] = { id: 9, children: [] }
  slipbox.notes[10].aliases.push('0a1b2')
  slipbox.aliases['0a1b2'] = { id: 10, children: [] }
  slipbox.notes[11].aliases.push('0e')
  slipbox.aliases['0e'] = { id: 11, children: [] }
  slipbox.notes[12].aliases.push('0e1')
  slipbox.aliases['0e1'] = { id: 12, children: [] }
  slipbox.notes[13].aliases.push('0f')
  slipbox.aliases['0f'] = { id: 13, children: [] }
  slipbox.notes[1].backlinks.push({ src: 2, annotation: 'Notes in a single file are separated by headers.' })
  slipbox.notes[2].links.push({ dest: 1, annotation: 'Notes in a single file are separated by headers.' })
  slipbox.notes[4].links.push({ dest: 2, annotation: '' })
  slipbox.notes[5].backlinks.push({ src: 4, annotation: 'An annotated direct link generates a backlink.' })
  slipbox.notes[4].links.push({ dest: 5, annotation: 'An annotated direct link generates a backlink.' })
  slipbox.notes[5].backlinks.push({ src: 4, annotation: 'This creates another backlink.' })
  slipbox.notes[4].links.push({ dest: 5, annotation: 'This creates another backlink.' })
  slipbox.notes[4].links.push({ dest: 6, annotation: '' })
  slipbox.notes[8].backlinks.push({ src: 5, annotation: 'The See also section contains generated backlinks.' })
  slipbox.notes[5].links.push({ dest: 8, annotation: 'The See also section contains generated backlinks.' })
  slipbox.notes[5].links.push({ dest: 4, annotation: '' })
  slipbox.notes[1].backlinks.push({ src: 6, annotation: 'Notes can have alias IDs.' })
  slipbox.notes[6].links.push({ dest: 1, annotation: 'Notes can have alias IDs.' })
  slipbox.notes[6].links.push({ dest: 10, annotation: '' })
  slipbox.notes[8].backlinks.push({ src: 6, annotation: 'The aliases of the sequence neighbors of a note appear in the See also section.' })
  slipbox.notes[6].links.push({ dest: 8, annotation: 'The aliases of the sequence neighbors of a note appear in the See also section.' })
  slipbox.notes[5].backlinks.push({ src: 8, annotation: 'Backlinks appear in the See also section.' })
  slipbox.notes[8].links.push({ dest: 5, annotation: 'Backlinks appear in the See also section.' })
  slipbox.notes[6].backlinks.push({ src: 8, annotation: 'Immediate neighbors appear in the See also section.' })
  slipbox.notes[8].links.push({ dest: 6, annotation: 'Immediate neighbors appear in the See also section.' })
  slipbox.notes[8].links.push({ dest: 1, annotation: '' })
  slipbox.notes[8].links.push({ dest: 6, annotation: '' })
  slipbox.notes[8].links.push({ dest: 9, annotation: '' })
  slipbox.notes[9].links.push({ dest: 6, annotation: '' })
  slipbox.notes[9].links.push({ dest: 4, annotation: '' })
  slipbox.notes[9].links.push({ dest: 1, annotation: '' })
  slipbox.notes[9].links.push({ dest: 5, annotation: '' })
  slipbox.notes[9].links.push({ dest: 0, annotation: '' })
  slipbox.notes[10].links.push({ dest: 4, annotation: '' })
  slipbox.notes[10].links.push({ dest: 1, annotation: '' })
  slipbox.notes[6].backlinks.push({ src: 10, annotation: 'The note alias is used to annotate a sequence link.' })
  slipbox.notes[10].links.push({ dest: 6, annotation: 'The note alias is used to annotate a sequence link.' })
  slipbox.notes[10].links.push({ dest: 0, annotation: '' })
  slipbox.notes[4].backlinks.push({ src: 11, annotation: 'Direct links appear as black lines in the interactive graph.' })
  slipbox.notes[11].links.push({ dest: 4, annotation: 'Direct links appear as black lines in the interactive graph.' })
  slipbox.notes[10].backlinks.push({ src: 11, annotation: 'Sequence links appear as red lines in the interactive graph.' })
  slipbox.notes[11].links.push({ dest: 10, annotation: 'Sequence links appear as red lines in the interactive graph.' })
  slipbox.notes[5].backlinks.push({ src: 11, annotation: 'Backlinks appear as dashed lines in the interactive graph.' })
  slipbox.notes[11].links.push({ dest: 5, annotation: 'Backlinks appear as dashed lines in the interactive graph.' })
  slipbox.notes[12].links.push({ dest: 4, annotation: '' })
  slipbox.aliases['0a1'].parent = '0a'
  slipbox.aliases['0a'].children.push('0a1')
  slipbox.aliases['0a2'].parent = '0a'
  slipbox.aliases['0a'].children.push('0a2')
  slipbox.aliases['0a1a'].parent = '0a1'
  slipbox.aliases['0a1'].children.push('0a1a')
  slipbox.aliases['0a1b'].parent = '0a1'
  slipbox.aliases['0a1'].children.push('0a1b')
  slipbox.aliases['0a1b1'].parent = '0a1b'
  slipbox.aliases['0a1b'].children.push('0a1b1')
  slipbox.aliases['0a1b2'].parent = '0a1b'
  slipbox.aliases['0a1b'].children.push('0a1b2')
  slipbox.aliases['0e1'].parent = '0e'
  slipbox.aliases['0e'].children.push('0e1')
  function createFuse () {
    const options = {
      includeMatches: true,
      ignoreLocation: true,
      keys: ['textContent'],
      threshold: 0.45
    }
    const nodes = document.body.querySelectorAll('section.level1')
    const sections = Array.prototype.filter.call(nodes, function (node) {
      return Number.isInteger(Number(node.id))
    })
    return new Fuse(sections, options)
  }

  function getSearchResults (fuse) {
    const div = document.querySelector('input.search-bar')
    return fuse.search(div.value)
  }

  function displayResults (results) {
    const div = document.querySelector('div.search-results')
    div.textContent = ''
    for (const result of results) {
      const p = document.createElement('p')
      const h3 = document.createElement('h3')
      h3.innerHTML = `<a href="#${result.item.id}">${result.item.title}</a>`
      p.appendChild(h3)

      let count = 3
      for (const child of result.item.children) {
        const clone = child.cloneNode(true)
        if (count-- <= 0) break
        if (clone.tagName === 'H1' && clone.title === result.item.title) {
          continue
        }
        p.appendChild(clone)
      }

      div.appendChild(p)
      div.appendChild(document.createElement('hr'))
    }
  }

  function searchNotes (fuse) {
    const results = getSearchResults(fuse)
    displayResults(results)
  }

  function createSearchBar () {
    const form = document.createElement('form')
    form.action = 'javascript:void(0)'
    form.style.textAlign = 'center'

    const fuse = createFuse()

    const input = document.createElement('input')
    input.type = 'text'
    input.placeholder = 'Search notes...'
    input.classList.add('search-bar')
    input.style.width = '80%'
    input.addEventListener('change', () => searchNotes(fuse))

    form.appendChild(input)
    return form
  }

  function createSearchResults () {
    const div = document.createElement('div')
    div.classList.add('search-results')
    return div
  }

  function createSearchPage () {
    const page = document.createElement('section')
    page.id = 'search'
    page.title = 'Search'
    page.classList.add('level1')
    page.appendChild(createSearchBar())
    page.appendChild(document.createElement('br'))
    page.appendChild(createSearchResults())
    return page
  }

  function createSearchButton () {
    const a = document.createElement('a')
    a.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M23.809 21.646l-6.205-6.205c1.167-1.605 1.857-3.579 1.857-5.711 0-5.365-4.365-9.73-9.731-9.73-5.365 0-9.73 4.365-9.73 9.73 0 5.366 4.365 9.73 9.73 9.73 2.034 0 3.923-.627 5.487-1.698l6.238 6.238 2.354-2.354zm-20.955-11.916c0-3.792 3.085-6.877 6.877-6.877s6.877 3.085 6.877 6.877-3.085 6.877-6.877 6.877c-3.793 0-6.877-3.085-6.877-6.877z"/></svg>'
    a.href = '#search'
    a.title = 'Search notes'
    return a
  }

  window.addEventListener('DOMContentLoaded', function () {
    document.body.appendChild(createSearchPage())
    document.body.insertBefore(createSearchButton(), document.body.firstChild)
  })

  function A (innerText, href, title) {
    const a = document.createElement('a')
    a.innerText = innerText
    a.href = href
    if (title != null) {
      a.title = title
    }
    return a
  }

  function Li (children) {
    const li = document.createElement('li')
    for (const child of children) {
      li.appendChild(child)
    }
    return li
  }

  function aliasOwner (alias) {
    const found = alias.match(/^\d+/)
    return found ? found[0] : ''
  }

  function compareSeeAlsoItems (a, b) {
    const atext = a.innerText
    const btext = b.innerText
    return atext < btext ? -1 : atext === btext ? 0 : 1
  }

  function * generateBacklinkLis (slipbox, id) {
    console.assert(slipbox)
    console.assert(slipbox.notes)
    console.assert(typeof (id) === 'number')
    const notes = slipbox.notes
    const note = notes[id] || { backlinks: [] }
    for (const link of note.backlinks) {
      console.assert(typeof (link.src) === 'number')
      console.assert(notes[link.src])
      console.assert(typeof (notes[link.src].title) === 'string')
      console.assert(notes[link.src].title)
      yield Li([
        document.createTextNode('[' + link.src + '] '),
        A(notes[link.src].title, '#' + link.src, link.annotation)
      ])
    }
  }

  function * generateDirectLinkLis (slipbox, id) {
    console.assert(slipbox)
    console.assert(slipbox.notes)
    console.assert(typeof (id) === 'number')
    const notes = slipbox.notes
    const note = notes[id] || { backlinks: [] }
    for (const link of note.links) {
      console.assert(typeof (link.dest) === 'number')
      console.assert(notes[link.dest])
      console.assert(typeof (notes[link.dest].title) === 'string')
      console.assert(notes[link.dest].title)
      const b = document.createElement('b')
      b.appendChild(document.createTextNode(`[${link.dest}] `))
      yield Li([b, A(notes[link.dest].title, '#' + link.dest, link.annotation)])
    }
  }

  function * generateParentLis (slipbox, id) {
    console.assert(slipbox)
    console.assert(slipbox.notes)
    console.assert(typeof (id) === 'number')
    const notes = slipbox.notes
    const note = notes[id] || { aliases: [] }
    for (const alias of note.aliases) {
      console.assert(slipbox.aliases[alias])
      const parentAlias = slipbox.aliases[alias].parent
      if (parentAlias) {
        const parentId = slipbox.aliases[parentAlias].id
        console.assert(typeof (parentId) === 'number')
        yield Li([
          document.createTextNode(`[${parentId}/${parentAlias}] `),
          A(slipbox.notes[parentId].title, '#' + parentId)
        ])
      }
    }
  }

  function * generateChildLis (slipbox, id) {
    console.assert(slipbox)
    console.assert(slipbox.notes)
    console.assert(typeof (id) === 'number')
    const notes = slipbox.notes
    const note = notes[id] || { aliases: [] }
    for (const alias of note.aliases) {
      console.assert(slipbox.aliases[alias])
      for (const child of slipbox.aliases[alias].children) {
        const childId = slipbox.aliases[child].id
        yield Li([
          document.createTextNode(`[${childId}/${child}] `),
          A(slipbox.notes[childId].title, '#' + childId)
        ])
      }
    }
  }

  function createRelatedUl (slipbox, id) {
    const lis = Array.from(generateBacklinkLis(slipbox, id))
    for (const li of generateDirectLinkLis(slipbox, id)) {
      lis.push(li)
    }
    for (const li of generateParentLis(slipbox, id)) {
      lis.push(li)
    }
    for (const li of generateChildLis(slipbox, id)) {
      lis.push(li)
    }
    lis.sort(compareSeeAlsoItems)
    const ul = document.createElement('ul')
    for (const li of lis) {
      ul.appendChild(li)
    }
    return ul
  }

  function createSeeAlsoDiv (slipbox, id) {
    const div = document.createElement('div')
    div.id = 'slipbox-see-also'
    const ul = createRelatedUl(slipbox, id)
    if (ul.children.length > 0) {
      const h3 = document.createElement('h3')
      h3.innerText = 'See also'
      div.appendChild(h3)
      div.appendChild(ul)
    }
    return div
  }

  function createAliasesP (slipbox, id) {
    console.assert(slipbox)
    console.assert(slipbox.notes)
    console.assert(typeof (id) === 'number')
    const note = slipbox.notes[id] || { aliases: [] }
    const p = document.createElement('p')
    p.id = 'slipbox-aliases'
    const aliases = note.aliases.map(alias => {
      const span = document.createElement('span')
      span.appendChild(document.createTextNode(' ['))
      span.appendChild(A(alias, '#' + aliasOwner(alias)))
      span.appendChild(document.createTextNode(']'))
      return span
    })
    if (aliases.length > 0) {
      const text = document.createElement('strong')
      text.innerText = 'Aliases:'
      p.appendChild(text)
      aliases.forEach(alias => p.appendChild(alias))
    }
    return p
  }

  function setAliasesP (slipbox, id) {
    const p = document.getElementById('slipbox-aliases')
    if (p) {
      p.remove()
    }
    document.body.appendChild(createAliasesP(slipbox, id))
  }

  function setSeeAlsoDiv (slipbox, id) {
    const div = document.getElementById('slipbox-see-also')
    if (div) {
      div.remove()
    }
    document.body.appendChild(createSeeAlsoDiv(slipbox, id))
  }

  function seeAlso (slipbox, hash) {
    const section = getSectionFromHash(hash) // closest level1 ancestor
    const id = section ? Number(section.id) : 0
    setAliasesP(slipbox, id)
    setSeeAlsoDiv(slipbox, id)
  }

  window.addEventListener('hashchange', function () {
    seeAlso(slipbox, window.location.hash)
  })

  window.addEventListener('DOMContentLoaded', function () {
    seeAlso(slipbox, window.location.hash)
  })

  function hideSections () {
    const sections = document.getElementsByTagName('section')
    for (let i = 0; i < sections.length; i++) {
      const section = sections[i]
      if (section.classList.contains('level1')) {
        if (Number.isInteger(Number(section.id))) {
          section.style.display = 'none'
        } else if (section.id.charAt(0) === '#') {
          section.style.display = 'none'
        } else if (section.id === 'references') {
          section.style.display = 'none'
        } else if (section.id.slice(0, 4) === 'ref-') {
          section.style.display = 'none'
        } else if (section.id === 'search') {
          section.style.display = 'none'
        } else if (section.id === 'tags') {
          section.style.display = 'none'
        }
      }
    }
  }

  function getSectionFromHash (hash) {
    const id = hash.substring(1)
    if (!id) { return null }
    const elem = document.getElementById(id)
    if (elem) {
      return elem.closest('section.level1')
    }
  }

  let _previousHash = window.location.hash
  function changeSection () {
    const oldSection = getSectionFromHash(_previousHash)
    if (oldSection) {
      oldSection.style.display = 'none'
    }
    _previousHash = window.location.hash
    const newSection = getSectionFromHash(_previousHash)
    if (newSection) {
      newSection.style.display = ''
      document.title = newSection.title || 'Slipbox'
    } else {
      window.location.hash = '#0'
    }
    window.scrollTo(0, 0)
  }

  function addNotFoundSection () {
    const section = document.createElement('section')
    section.id = '0'
    section.classList.add('level1')
    const h1 = document.createElement('h1')
    h1.innerText = 'Note not found'
    section.appendChild(h1)
    document.body.appendChild(section)
  }

  window.addEventListener('DOMContentLoaded', addNotFoundSection)
  window.addEventListener('DOMContentLoaded', hideSections)
  window.addEventListener('DOMContentLoaded', changeSection)
  window.addEventListener('hashchange', changeSection)

  function createGraphArea () {
    const div = document.createElement('div')
    div.style.width = '100%'
    div.style.height = '500px'
    div.style.position = 'relative'
    div.style.top = '0px'
    div.style.left = '0px'
    return div
  }

  function getNoteElement (slipbox, id, currentNote = false) {
    const element = {
      data: {
        id: id,
        label: id
      }
    }
    if (currentNote) {
      element.data.color = 'white'
    }
    return element
  }

  function getLinkElement (slipbox, type, source, target) {
    console.assert(['backlink', 'direct', 'sequence'].includes(type))
    const id = type.slice(0, 1) + `${source}-${target}`
    const style = type === 'backlink' ? 'dashed' : 'solid'
    const color = type === 'sequence' ? 'red' : 'black'
    return {
      data: { id, source, target, arrow: 'triangle', style, color }
    }
  }

  function * getNeighborElements (slipbox, id) {
    yield getNoteElement(slipbox, id, true)

    const note = slipbox.notes[id]
    for (const backlink of note.backlinks) {
      yield getNoteElement(slipbox, backlink.src)
      yield getLinkElement(slipbox, 'backlink', backlink.src, id)
    }
    for (const link of note.links) {
      yield getNoteElement(slipbox, link.dest)
      yield getLinkElement(slipbox, 'direct', id, link.dest)
    }

    for (const alias of note.aliases) {
      const parent = slipbox.aliases[alias].parent
      const pid = parent ? slipbox.aliases[parent].id : -1
      if (pid !== -1) {
        yield getNoteElement(slipbox, pid)
        yield getLinkElement(slipbox, 'sequence', pid, id)
      }
      // children
      for (const child of slipbox.aliases[alias].children) {
        console.assert(id === slipbox.aliases[alias].id)
        const cid = slipbox.aliases[child].id
        if (!Number.isInteger(cid)) continue
        yield getNoteElement(slipbox, cid)
        yield getLinkElement(slipbox, 'sequence', id, cid)
      }
    }
  }

  function createCytoscape (container, elements) {
    return cytoscape({
      directed: true,
      multigraph: true,
      container: container,
      elements: elements,
      style: [
        {
          selector: 'node',
          style: {
            label: 'data(label)',
            height: 'label',
            width: 'label',
            padding: '8px',
            'text-halign': 'center',
            'text-valign': 'center'
          }
        },
        {
          selector: 'node[color]',
          style: {
            'background-color': 'black',
            color: 'data(color)',
            label: 'data(label)',
            height: 'label',
            width: 'label',
            padding: '8px',
            'text-halign': 'center',
            'text-valign': 'center'
          }
        },
        {
          selector: 'edge',
          style: {
            width: 2,
            'curve-style': 'bezier',
            'line-color': 'data(color)',
            'line-style': 'data(style)'
          }
        },
        {
          selector: 'edge[arrow]',
          style: {
            'target-arrow-color': 'data(color)',
            'target-arrow-shape': 'data(arrow)'
          }
        }
      ]
    })
  }

  function initGraph () {
    let container = createGraphArea()

    function resetGraph () {
      container.remove()
      const id = Number(window.location.hash.slice(1))
      if (!Number.isInteger(id)) return

      const elements = Array.from(getNeighborElements(slipbox, id))
      if (elements.length < 2) return

      container = createGraphArea()
      document.body.append(container)
      const cy = createCytoscape(container, elements)
      cy.layout({ name: 'cose' }).run()
      cy.reset()
      cy.center()
    }

    window.addEventListener('DOMContentLoaded', resetGraph)
    window.addEventListener('hashchange', resetGraph)
  }

  initGraph()
  </script>
</head>
<body>
<section id="0" class="level1" title="Note 0 is the entry point">
<h1 title="Note 0 is the entry point">0 Note 0 is the entry point</h1>
<p><code>slipbox</code> assumes that note 0 is the first page. You can use it as an entry point to your notes.</p>
<ul>
<li>You can organize your notes in files in many ways  [<a href="#2" title="0b">0b</a>].</li>
<li>Just remember to put the note ID and the title in a level 1 header.  [<a href="#1" title="0a">0a</a>].</li>
<li>You can make connections between notes using tags  [<a href="#3" title="0c">0c</a>].</li>
<li>But it’s better if you make more specific types of connections  [<a href="#4" title="0a1">0a1</a>].</li>
<li><code>slipbox</code> supports direct links, backlinks  [<a href="#5" title="0a1a">0a1a</a>] and sequence links  [<a href="#6" title="0a1b">0a1b</a>].
<ul>
<li>To create note sequences, you need to understand note aliases  [<a href="#9" title="0a1b1">0a1b1</a>]</li>
<li>and the syntax  [<a href="#10" title="0a1b2">0a1b2</a>].</li>
</ul></li>
<li>Another way to look for notes is by using text search  [<a href="#13" title="0f">0f</a>].</li>
<li>Backlinks and sequence links appear in the ‘See also’ section of each note  [<a href="#8" title="0a2">0a2</a>].</li>
<li>You can add citations by specifying a bibliography file  [<a href="#7" title="0d">0d</a>].</li>
<li>Cytoscape.js provides an interactive visualization of your notes  [<a href="#11" title="0e">0e</a>].
<ul>
<li>How to link to images?  [<a href="#12" title="0e1">0e1</a>].</li>
</ul></li>
</ul>
</section>
<section id="1" class="level1" title="Every note has an ID and a title">
<h1 title="Every note has an ID and a title">1 Every note has an ID and a title</h1>
<p>Each note must have a unique ID and a title. The ID has to be an integer. To add a new note just create a level 1 header containing an ID followed by a space and a title.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="fu"># 1 Every note has an ID and a title</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>This belongs to note 1.</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="fu"># 2 This is a different note</span></span></code></pre></div>
</section>
<section id="2" class="level1" title="A file can contain multiple notes">
<h1 title="A file can contain multiple notes">2 A file can contain multiple notes</h1>
<p>You can place any number of notes in a file, but notes can’t be split into multiple files. In this case, a note contains everything until the <a href="#1" title="Notes in a single file are separated by headers.">header</a> [1] of the next note.</p>
</section>
<section id="3" class="level1" title="You can use hashtags anywhere in the note">
<h1 title="You can use hashtags anywhere in the note">3 You can use hashtags anywhere in the note</h1>
<p><a href="##You">#You</a> <a href="##can">#can</a> <a href="##add">#add</a> <a href="##tags">#tags</a> <a href="##like">#like</a> <a href="##this.">#this.</a></p>
<p>Click on the tags to see a list of notes with the same tag.</p>
</section>
<section id="4" class="level1" title="Types of links">
<h1 title="Types of links">4 Types of links</h1>
<p><a href="##links">#links</a> <a href="##backlinks">#backlinks</a> <a href="##sequence-links">#sequence-links</a></p>
<p><code>slipbox</code> supports several types of links.</p>
<dl>
<dt>Direct links</dt>
<dd>You can link to other notes by specifying the note ID as the target. This works even when the note section is in <a href="#2">another file</a> [2]. Even if you move the linked note to another file, the link will still be valid.
</dd>
<dt><a href="#5" title="An annotated direct link generates a backlink.">Backlinks</a> [5]</dt>
<dd>An annotated direct link generates a backlink. It’s sometimes nicer to put the annotation in a reference link. But you have to make sure that the label is unique across all your note files. One way to do this is to use IDs of the source and target notes, like this <a href="#5" title="This creates another backlink.">[4-5]</a> [5].
</dd>
<dt>Sequence links</dt>
<dd>A <a href="#6">sequence link</a> [6] is a special type of link that indicates the order to read a sequence of notes in.
</dd>
</dl>
</section>
<section id="5" class="level1" title="Backlinks are generated from annotated direct links">
<h1 title="Backlinks are generated from annotated direct links">5 Backlinks are generated from annotated direct links</h1>
<p><a href="##links">#links</a> <a href="##backlinks">#backlinks</a></p>
<p>This note has backlinks generated from note 4 in the ‘See also’ section  [<a href="#8" title="The See also section contains generated backlinks.">8</a>]. If you hover over the backlink, you’ll see the description from the <a href="#4">forward link</a> [4].</p>
</section>
<section id="6" class="level1" title="Notes in a sequence have aliases">
<h1 title="Notes in a sequence have aliases">6 Notes in a sequence have aliases</h1>
<p><a href="##sequence-links">#sequence-links</a> <a href="##aliases">#aliases</a></p>
<p>While <a href="#1" title="Notes can have alias IDs.">note IDs</a> [1] are meant to uniquely identify notes, aliases are meant to show which notes belong in a sequence. For example,</p>
<pre><code>0a -&gt; 0a1 -&gt; 0a1b</code></pre>
<p>Just by looking at the aliases of a note, you’ll know which notes come before and after it. Each of these aliases correspond to a real ID. These aliases are defined in an outline note using <a href="#10">sequence links</a> [10].</p>
<p>You can see the immediate neighbors of this note in the ‘See also’ section  [<a href="#8" title="The aliases of the sequence neighbors of a note appear in the See also section.">8</a>].</p>
</section>
<section id="7" class="level1" title="Specify a bibliography file to use citations">
<h1 title="Specify a bibliography file to use citations">7 Specify a bibliography file to use citations</h1>
<p><a href="##tools">#tools</a></p>
<p>If you specify a bibliography in the options, <code>slipbox</code> generates a bibliography page containing every reference in the bibliography. You can access this page by replacing the URL hash with #<a href="#references">references</a>.</p>
<p>It also generates a section for each cited reference, which contains a list of all notes that cite the reference <span class="citation" data-cites="cite2020">(Author <a href="#ref-cite2020" role="doc-biblioref">2020</a>)</span>.</p>
<p>You have to specify the bibliography file using the <code>-c</code> option. Take note of the quotes and the spaces in the options.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="ex">python</span> -m slipbox notes.db notes -c <span class="st">&#39; --bibliography notes.bib&#39;</span> -d <span class="st">&#39; -o notes.html&#39;</span></span></code></pre></div>
</section>
<section id="8" class="level1" title="See also section: backlinks and sequence links">
<h1 title="See also section: backlinks and sequence links">8 See also section: backlinks and sequence links</h1>
<p><a href="##backlinks">#backlinks</a> <a href="##sequence-links">#sequence-links</a> <a href="##aliases">#aliases</a></p>
<p>The ‘See also’ section lists <a href="#5" title="Backlinks appear in the See also section.">backlinks</a> [5] and <a href="#6" title="Immediate neighbors appear in the See also section.">sequence links</a> [6]. The sequence links include ‘previous notes’ and ‘next notes’ as defined by some outline note. You can distinguish between backlinks and sequence links by looking at the ID that appears next to the title of the linked note.</p>
<ul>
<li>Backlinks are shown with <a href="#1">real IDs</a> [1] (only contain numbers).</li>
<li>Sequence links are shown with <a href="#6">aliases</a> [6] (contain a mix of numbers and letters  [<a href="#9">9</a>]).</li>
</ul>
</section>
<section id="9" class="level1" title="How to derive note aliases">
<h1 title="How to derive note aliases">9 How to derive note aliases</h1>
<p><a href="##aliases">#aliases</a> <a href="##sequence-links">#sequence-links</a></p>
<p>A note alias is a string of numbers and letters. It always starts with a number.</p>
<p>Example: <a href="#6">0a1b</a> [6]. The first number (0) indicates the owner or the outline note of the sequence. Often it is the ID of the note that contains the sequence link for the alias.</p>
<p>In this example, <a href="#4">0a1</a> [4] is preceded by <a href="#1">0a</a> [1] and followed by <a href="#6">0a1b</a> [6]. Presumably, there’s another note <a href="#5">0a1a</a> [5] that follows note <a href="#4">0a1</a> [4]. So to follow a note alias, just append a number [letter] if the last symbol is a letter [number]. The sequence links for these note aliases are defined in note  [<a href="#0">0</a>].</p>
</section>
<section id="10" class="level1" title="How to create a sequence link">
<h1 title="How to create a sequence link">10 How to create a sequence link</h1>
<p><a href="##sequence-links">#sequence-links</a> <a href="##aliases">#aliases</a></p>
<p>A sequence link looks just like a <a href="#4">direct link</a> [4], but there’s one difference: it contains an alias description.</p>
<p>A sequence link has three parts.</p>
<ol type="1">
<li>Some (optional) text</li>
<li>The <a href="#1">real ID</a> [1] of the target note</li>
<li>The note <a href="#6" title="The note alias is used to annotate a sequence link.">alias</a> [6]</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="co">[</span><span class="ot">Text</span><span class="co">](#11 &#39;10a1b3&#39;)</span></span></code></pre></div>
<p>Note 0 contains sequence links for these notes  [<a href="#0">0</a>].</p>
</section>
<section id="11" class="level1" title="Visualize notes using Cytoscape">
<h1 title="Visualize notes using Cytoscape">11 Visualize notes using Cytoscape</h1>
<p><a href="##links">#links</a> <a href="##sequence-links">#sequence-links</a> <a href="##backlinks">#backlinks</a> <a href="##visualization">#visualization</a> <a href="##interactive">#interactive</a></p>
<p>An interactive visualization of your notes will appear below the See also section if the active note is connected to other notes. Black lines represent <a href="#4" title="Direct links appear as black lines in the interactive graph.">direct links</a> [4], red lines represent <a href="#10" title="Sequence links appear as red lines in the interactive graph.">sequence links</a> [10]. Dashed lines represent <a href="#5" title="Backlinks appear as dashed lines in the interactive graph.">backlinks</a> [5].</p>
</section>
<section id="12" class="level1" title="How to link to images">
<h1 title="How to link to images">12 How to link to images</h1>
<p><a href="##images">#images</a> <a href="##links">#links</a></p>
<p>You can <a href="#4">link</a> [4] to images using absolute paths, relative paths and URLs. Relative paths are interpreted to be relative to the output HTML.</p>
<p>Suppose you have the following directory structure.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="ex">notes/input.md</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="ex">output.html</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a><span class="ex">images/image.png</span></span></code></pre></div>
<p>You could link to <code>image.png</code> from <code>notes/input.md</code> as:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="al">![description](images/image.png)</span></span></code></pre></div>
</section>
<section id="13" class="level1" title="Text search">
<h1 title="Text search">13 Text search</h1>
<p><a href="##text">#text</a> <a href="##search">#search</a></p>
<p>You can search your notes by going to #<a href="#search">search</a>.</p>
</section>

<section id='#You' title='#You' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #You
    </a>
  </h1>
  <ul>
    <li>
      [3] 
      <a href='#3'>
        You can use hashtags anywhere in the note
      </a>
    </li>
  </ul>
</section>
<section id='#add' title='#add' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #add
    </a>
  </h1>
  <ul>
    <li>
      [3] 
      <a href='#3'>
        You can use hashtags anywhere in the note
      </a>
    </li>
  </ul>
</section>
<section id='#aliases' title='#aliases' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #aliases
    </a>
  </h1>
  <ul>
    <li>
      [6] 
      <a href='#6'>
        Notes in a sequence have aliases
      </a>
    </li>
    <li>
      [8] 
      <a href='#8'>
        See also section: backlinks and sequence links
      </a>
    </li>
    <li>
      [9] 
      <a href='#9'>
        How to derive note aliases
      </a>
    </li>
    <li>
      [10] 
      <a href='#10'>
        How to create a sequence link
      </a>
    </li>
  </ul>
</section>
<section id='#backlinks' title='#backlinks' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #backlinks
    </a>
  </h1>
  <ul>
    <li>
      [4] 
      <a href='#4'>
        Types of links
      </a>
    </li>
    <li>
      [5] 
      <a href='#5'>
        Backlinks are generated from annotated direct links
      </a>
    </li>
    <li>
      [8] 
      <a href='#8'>
        See also section: backlinks and sequence links
      </a>
    </li>
    <li>
      [11] 
      <a href='#11'>
        Visualize notes using Cytoscape
      </a>
    </li>
  </ul>
</section>
<section id='#can' title='#can' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #can
    </a>
  </h1>
  <ul>
    <li>
      [3] 
      <a href='#3'>
        You can use hashtags anywhere in the note
      </a>
    </li>
  </ul>
</section>
<section id='#images' title='#images' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #images
    </a>
  </h1>
  <ul>
    <li>
      [12] 
      <a href='#12'>
        How to link to images
      </a>
    </li>
  </ul>
</section>
<section id='#interactive' title='#interactive' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #interactive
    </a>
  </h1>
  <ul>
    <li>
      [11] 
      <a href='#11'>
        Visualize notes using Cytoscape
      </a>
    </li>
  </ul>
</section>
<section id='#like' title='#like' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #like
    </a>
  </h1>
  <ul>
    <li>
      [3] 
      <a href='#3'>
        You can use hashtags anywhere in the note
      </a>
    </li>
  </ul>
</section>
<section id='#links' title='#links' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #links
    </a>
  </h1>
  <ul>
    <li>
      [4] 
      <a href='#4'>
        Types of links
      </a>
    </li>
    <li>
      [5] 
      <a href='#5'>
        Backlinks are generated from annotated direct links
      </a>
    </li>
    <li>
      [11] 
      <a href='#11'>
        Visualize notes using Cytoscape
      </a>
    </li>
    <li>
      [12] 
      <a href='#12'>
        How to link to images
      </a>
    </li>
  </ul>
</section>
<section id='#search' title='#search' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #search
    </a>
  </h1>
  <ul>
    <li>
      [13] 
      <a href='#13'>
        Text search
      </a>
    </li>
  </ul>
</section>
<section id='#sequence-links' title='#sequence-links' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #sequence-links
    </a>
  </h1>
  <ul>
    <li>
      [4] 
      <a href='#4'>
        Types of links
      </a>
    </li>
    <li>
      [6] 
      <a href='#6'>
        Notes in a sequence have aliases
      </a>
    </li>
    <li>
      [8] 
      <a href='#8'>
        See also section: backlinks and sequence links
      </a>
    </li>
    <li>
      [9] 
      <a href='#9'>
        How to derive note aliases
      </a>
    </li>
    <li>
      [10] 
      <a href='#10'>
        How to create a sequence link
      </a>
    </li>
    <li>
      [11] 
      <a href='#11'>
        Visualize notes using Cytoscape
      </a>
    </li>
  </ul>
</section>
<section id='#tags' title='#tags' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #tags
    </a>
  </h1>
  <ul>
    <li>
      [3] 
      <a href='#3'>
        You can use hashtags anywhere in the note
      </a>
    </li>
  </ul>
</section>
<section id='#text' title='#text' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #text
    </a>
  </h1>
  <ul>
    <li>
      [13] 
      <a href='#13'>
        Text search
      </a>
    </li>
  </ul>
</section>
<section id='#this.' title='#this.' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #this.
    </a>
  </h1>
  <ul>
    <li>
      [3] 
      <a href='#3'>
        You can use hashtags anywhere in the note
      </a>
    </li>
  </ul>
</section>
<section id='#tools' title='#tools' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #tools
    </a>
  </h1>
  <ul>
    <li>
      [7] 
      <a href='#7'>
        Specify a bibliography file to use citations
      </a>
    </li>
  </ul>
</section>
<section id='#visualization' title='#visualization' class='level1'>
  <h1>
    <a href='#tags' title='List of tags'>
      #visualization
    </a>
  </h1>
  <ul>
    <li>
      [11] 
      <a href='#11'>
        Visualize notes using Cytoscape
      </a>
    </li>
  </ul>
</section>
<section id='tags' title='Tags' class='level1'>
  <h1>
    Tags
  </h1>
  <ul>
    <li>
      <a href='##You'>
        #You
      </a>
    </li>
    <li>
      <a href='##add'>
        #add
      </a>
    </li>
    <li>
      <a href='##aliases'>
        #aliases
      </a>
    </li>
    <li>
      <a href='##backlinks'>
        #backlinks
      </a>
    </li>
    <li>
      <a href='##can'>
        #can
      </a>
    </li>
    <li>
      <a href='##images'>
        #images
      </a>
    </li>
    <li>
      <a href='##interactive'>
        #interactive
      </a>
    </li>
    <li>
      <a href='##like'>
        #like
      </a>
    </li>
    <li>
      <a href='##links'>
        #links
      </a>
    </li>
    <li>
      <a href='##search'>
        #search
      </a>
    </li>
    <li>
      <a href='##sequence-links'>
        #sequence-links
      </a>
    </li>
    <li>
      <a href='##tags'>
        #tags
      </a>
    </li>
    <li>
      <a href='##text'>
        #text
      </a>
    </li>
    <li>
      <a href='##this.'>
        #this.
      </a>
    </li>
    <li>
      <a href='##tools'>
        #tools
      </a>
    </li>
    <li>
      <a href='##visualization'>
        #visualization
      </a>
    </li>
  </ul>
</section>
<section id='ref-cite2020' title='ref-cite2020' class='level1'>
  <h1>
    <a href='#references'>
      @cite2020
    </a>
  </h1>
  <p>
    Author. 2020. Title.
  </p>
  <ul>
    <li>
      [7] 
      <a href='#7'>
        Specify a bibliography file to use citations
      </a>
    </li>
  </ul>
</section>
<section id='references' title='References' class='level1'>
  <h1>
    References
  </h1>
  <dl>
    <dt>
      <a href='#ref-cite2020'>
        [@cite2020]
      </a>
    </dt>
    <dd>
      Author. 2020. Title.
    </dd>
  </dl>
</section>
<p><span class="math inline"> </span></p>
<div class="sourceCode" id="cb1" style="display:none"><pre class="sourceCode c"><code class="sourceCode c"></code></pre></div>
</body>
</html>
